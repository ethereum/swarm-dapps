!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=533)}([function(t,e,n){"use strict";
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */class i extends Error{constructor(t,e){e&&(t+=" "+JSON.stringify(e)),super(t),this.name="CKEditorError",this.data=e}static isCKEditorError(t){return t instanceof i}}e.a=i},function(t,e,n){"use strict";var i=n(40),r=n(20),s=n(60),o=n(0),a=n(24);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class c{constructor(t,e){if(!t.is("element")&&!t.is("documentFragment"))throw new o.a("model-position-root-invalid: Position root invalid.");if(!(e instanceof Array)||0===e.length)throw new o.a("model-position-path-incorrect: Position path must be an Array with at least one item.",{path:e});e=t.getPath().concat(e),t=t.root,this.root=t,this.path=e}get offset(){return n.i(r.a)(this.path)}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let e=0;e<this.path.length-1;e++)t=t.getChild(t.offsetToIndex(this.path[e]));return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){let t=this.parent.getChild(this.index);return t instanceof a.a&&t.startOffset<this.offset?t:null}get nodeAfter(){return null===this.textNode?this.parent.getChild(this.index):null}get nodeBefore(){return null===this.textNode?this.parent.getChild(this.index-1):null}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const e=n.i(s.a)(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after"}}getLastMatchingPosition(t,e={}){e.startPosition=this;const n=new i.a(e);return n.skip(t),n.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeNode:!0})}getCommonPath(t){if(this.root!=t.root)return[];let e=n.i(s.a)(this.path,t.path),i="string"==typeof e?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,i)}getShiftedBy(t){let e=c.createFromPosition(this),n=e.offset+t;return e.offset=n<0?0:n,e}isAfter(t){return"after"==this.compareWith(t)}isBefore(t){return"before"==this.compareWith(t)}isEqual(t){return"same"==this.compareWith(t)}isTouching(t){let e=null,n=null;switch(this.compareWith(t)){case"same":return!0;case"before":e=c.createFromPosition(this),n=c.createFromPosition(t);break;case"after":e=c.createFromPosition(t),n=c.createFromPosition(this);break;default:return!1}let i=e.parent;for(;e.path.length+n.path.length;){if(e.isEqual(n))return!0;if(e.path.length>n.path.length){if(e.offset!==i.maxOffset)return!1;e.path=e.path.slice(0,-1),i=i.parent,e.offset++}else{if(0!==n.offset)return!1;n.path=n.path.slice(0,-1)}}}_getTransformedByDeletion(t,e){let i=c.createFromPosition(this);if(this.root!=t.root)return i;if("same"==n.i(s.a)(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+e>this.offset)return null;i.offset-=e}}else if("prefix"==n.i(s.a)(t.getParentPath(),this.getParentPath())){const n=t.path.length-1;if(t.offset<=this.path[n]){if(t.offset+e>this.path[n])return null;i.path[n]-=e}}return i}_getTransformedByInsertion(t,e,i){let r=c.createFromPosition(this);if(this.root!=t.root)return r;if("same"==n.i(s.a)(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&i)&&(r.offset+=e);else if("prefix"==n.i(s.a)(t.getParentPath(),this.getParentPath())){const n=t.path.length-1;t.offset<=this.path[n]&&(r.path[n]+=e)}return r}_getTransformedByMove(t,e,n,i,r){let s=this._getTransformedByDeletion(t,n);return e=e._getTransformedByDeletion(t,n),s=null===s||r&&s.isEqual(t)?this._getCombined(t,e):s._getTransformedByInsertion(e,n,i)}_getCombined(t,e){const n=t.path.length-1;let i=c.createFromPosition(e);return i.offset=i.offset+this.path[n]-t.offset,i.path=i.path.concat(this.path.slice(n+1)),i}static createAt(t,e){if(t instanceof c)return this.createFromPosition(t);{const n=t;if("end"==e)e=n.maxOffset;else{if("before"==e)return this.createBefore(n);if("after"==e)return this.createAfter(n);e||(e=0)}return this.createFromParentAndOffset(n,e)}}static createAfter(t){if(!t.parent)throw new o.a("model-position-after-root: You can not make position after root.",{root:t});return this.createFromParentAndOffset(t.parent,t.endOffset)}static createBefore(t){if(!t.parent)throw new o.a("model-position-before-root: You can not make position before root.",{root:t});return this.createFromParentAndOffset(t.parent,t.startOffset)}static createFromParentAndOffset(t,e){if(!t.is("element")&&!t.is("documentFragment"))throw new o.a("model-position-parent-incorrect: Position parent have to be a element or document fragment.");const n=t.getPath();return n.push(e),new this(t.root,n)}static createFromPosition(t){return new this(t.root,t.path.slice())}static fromJSON(t,e){if("$graveyard"===t.root)return new c(e.graveyard,t.path);if(!e.hasRoot(t.root))throw new o.a("model-position-fromjson-no-root: Cannot create position for document. Root with specified name does not exist.",{rootName:t.root});return new c(e.getRoot(t.root),t.path)}}e.a=c},function(t,e,n){"use strict";var i=n(1),r=n(40),s=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class o{constructor(t,e=null){this.start=i.a.createFromPosition(t),this.end=e?i.a.createFromPosition(e):i.a.createFromPosition(t)}*[Symbol.iterator](){yield*new r.a({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t){return this.containsPosition(t.start)&&this.containsPosition(t.end)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new o(this.start,t.start)),this.containsPosition(t.end)&&e.push(new o(t.end,this.end))):e.push(o.createFromRange(this)),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,n=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(n=t.end),new o(e,n)}return null}getMinimalFlatRanges(){const t=[],e=this.start.getCommonPath(this.end).length;let n=i.a.createFromPosition(this.start),r=n.parent;for(;n.path.length>e+1;){let e=r.maxOffset-n.offset;0!==e&&t.push(new o(n,n.getShiftedBy(e))),n.path=n.path.slice(0,-1),n.offset++,r=r.parent}for(;n.path.length<=this.end.path.length;){let e=this.end.path[n.path.length-1],i=e-n.offset;0!==i&&t.push(new o(n,n.getShiftedBy(i))),n.offset=e,n.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new r.a(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new r.a(t);for(let t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new r.a(t);yield e.position;for(let t of e)yield t.nextPosition}getTransformedByDelta(t){let e=[o.createFromRange(this)];const n=new Set(["insert","move","remove","reinsert"]);for(let i of t.operations)if(n.has(i.type))for(let n=0;n<e.length;n++){const r=e[n]._getTransformedByDocumentChange(i.type,t.type,i.targetPosition||i.position,i.howMany||i.nodes.maxOffset,i.sourcePosition);e.splice(n,1,...r),n+=r.length-1}return e}getTransformedByDeltas(t){let e=[o.createFromRange(this)];for(let n of t)for(let t=0;t<e.length;t++){let i=e[t].getTransformedByDelta(n);e.splice(t,1,...i),t+=i.length-1}for(let t=0;t<e.length;t++){const n=e[t];for(let i=t+1;i<e.length;i++){const t=e[i];(n.containsRange(t)||t.containsRange(n)||n.isEqual(t))&&e.splice(i,1)}}return e}_getTransformedByDocumentChange(t,e,n,i,r){if("insert"==t)return this._getTransformedByInsertion(n,i,!1,!1);{const s=o.createFromPositionAndShift(r,i);if("merge"==e&&this.isCollapsed&&(this.start.isEqual(s.start)||this.start.isEqual(s.end)))return[new o(n.getShiftedBy(this.start.offset))];if("move"==t){if(s.containsPosition(this.start)&&this.containsPosition(s.end)&&this.end.isAfter(n)){let t=this.start._getCombined(r,n._getTransformedByDeletion(r,i));const e=this.end._getTransformedByMove(r,n,i,!1,!1);return[new o(t,e)]}if(s.containsPosition(this.end)&&this.containsPosition(s.start)&&this.start.isBefore(n)){const t=this.start._getTransformedByMove(r,n,i,!0,!1);let e=this.end._getCombined(r,n._getTransformedByDeletion(r,i));return[new o(t,e)]}}return this._getTransformedByMove(r,n,i)}}_getTransformedByInsertion(t,e,n=!1,i=!1){if(n&&this.containsPosition(t))return[new o(this.start,t),new o(t._getTransformedByInsertion(t,e,!0),this.end._getTransformedByInsertion(t,e,this.isCollapsed))];{const n=o.createFromRange(this);let r=!!n.isCollapsed||!i,s=!!n.isCollapsed||i;return n.start=n.start._getTransformedByInsertion(t,e,r),n.end=n.end._getTransformedByInsertion(t,e,s),[n]}}_getTransformedByMove(t,e,n){if(this.isCollapsed){const i=this.start._getTransformedByMove(t,e,n,!0,!1);return[new o(i)]}let i;const r=new o(t,t.getShiftedBy(n)),s=this.getDifference(r);let a=null;const c=this.getIntersection(r);1==s.length?a=new o(s[0].start._getTransformedByDeletion(t,n),s[0].end._getTransformedByDeletion(t,n)):2==s.length&&(a=new o(this.start,this.end._getTransformedByDeletion(t,n)));const l=e._getTransformedByDeletion(t,n);return i=a?a._getTransformedByInsertion(l,n,null!==c):[],c&&i.push(new o(c.start._getCombined(r.start,l),c.end._getCombined(r.start,l))),i}static createFromPositionAndShift(t,e){const n=t,i=t.getShiftedBy(e);return e>0?new this(n,i):new this(i,n)}static createFromParentsAndOffsets(t,e,n,r){return new this(i.a.createFromParentAndOffset(t,e),i.a.createFromParentAndOffset(n,r))}static createFromRange(t){return new this(t.start,t.end)}static createIn(t){return this.createFromParentsAndOffsets(t,0,t,t.maxOffset)}static createOn(t){return this.createFromPositionAndShift(i.a.createBefore(t),t.offsetSize)}static createFromRanges(t){if(0===t.length)throw new s.a("range-create-from-ranges-empty-array: At least one range has to be passed.");if(1==t.length)return this.createFromRange(t[0]);const e=t[0];t.sort((t,e)=>t.start.isAfter(e.start)?1:-1);const n=t.indexOf(e),r=new this(e.start,e.end);for(let e=n-1;e>=0&&t[e].end.isEqual(r.start);e++)r.start=i.a.createFromPosition(t[e].start);for(let e=n+1;e<t.length&&t[e].start.isEqual(r.end);e++)r.end=i.a.createFromPosition(t[e].end);return r}static fromJSON(t,e){return new this(i.a.fromJSON(t.start,e),i.a.fromJSON(t.end,e))}}e.a=o},function(t,e,n){"use strict";var i=n(31),r=n(4);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class s{constructor(t){this.editor=t}init(){}afterInit(){}destroy(){}}e.a=s,n.i(r.a)(s,i.a)},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,...e){e.forEach(e=>{Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)).forEach(n=>{if(n in t.prototype)return;const i=Object.getOwnPropertyDescriptor(e,n);i.enumerable=!1,Object.defineProperty(t.prototype,n,i)})})}},function(t,e,n){"use strict";var i=n(0),r=n(4),s=n(7),o=n(75),a=n(9),c=n(116),l=n(469),u=n(15),h=n(36);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const d="http://www.w3.org/1999/xhtml";class f{constructor(t){Object.assign(this,k(_(t))),this._isRendered=!1,this._revertData=null}render(){const t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t}apply(t){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:t,isApplying:!0,revertData:this._revertData}),t}revert(t){if(!this._revertData)throw new i.a("ui-template-revert-not-applied: Attempting reverting a template which has not been applied yet.");this._revertTemplateFromNode(t,this._revertData)}static bind(t,e){return{to:(n,i)=>new g({eventNameOrFunction:n,attribute:n,observable:t,emitter:e,callback:i}),if:(n,i,r)=>new m({observable:t,emitter:e,attribute:n,valueIfTrue:i,callback:r})}}static extend(t,e){t._isRendered&&h.a.warn("template-extend-render: Attempting to extend a template which has already been rendered."),function t(e,n){n.attributes&&(e.attributes||(e.attributes={}),A(e.attributes,n.attributes));n.eventListeners&&(e.eventListeners||(e.eventListeners={}),A(e.eventListeners,n.eventListeners));n.text&&e.text.push(...n.text);if(n.children&&n.children.length){if(e.children.length!=n.children.length)throw new i.a("ui-template-extend-children-mismatch: The number of children in extended definition does not match.");let r=0;for(let i of n.children)t(e.children.get(r++),i)}}(t,k(_(e)))}_renderNode(t){let e;if(e=t.node?this.tag&&this.text:this.tag?this.text:!this.text)throw new i.a('ui-template-wrong-syntax: Node definition must have either "tag" or "text" when rendering new Node.');return this.text?this._renderText(t):this._renderElement(t)}_renderElement(t){let e=t.node;return e||(e=t.node=document.createElementNS(this.ns||d,this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),e}_renderText(t){let e=t.node;return e?t.revertData.text=e.textContent:e=t.node=document.createTextNode(""),b(this.text)?this._bindToObservable({schema:this.text,updater:function(t){return{set(e){t.textContent=e},remove(){t.textContent=""}}}(e),data:t}):e.textContent=this.text.join(""),e}_renderAttributes(t){let e,i,r,s;if(!this.attributes)return;const o=t.node,a=t.revertData;for(e in this.attributes)if(r=o.getAttribute(e),i=this.attributes[e],a&&(a.attributes[e]=r),s=n.i(u.a)(i[0])&&i[0].ns?i[0].ns:null,b(i)){const n=s?i[0].value:i;a&&O(e)&&n.unshift(r),this._bindToObservable({schema:n,updater:v(o,e,s),data:t})}else"style"==e&&"string"!=typeof i[0]?this._renderStyleAttribute(i[0],t):(a&&r&&O(e)&&i.unshift(r),T(i=i.map(t=>t&&t.value||t).reduce((t,e)=>t.concat(e),[]).reduce(C,""))||o.setAttributeNS(s,e,i))}_renderStyleAttribute(t,e){const n=e.node;for(let i in t){const r=t[i];b(r)?this._bindToObservable({schema:[r],updater:y(n,i),data:e}):n.style[i]=r}}_renderElementChildren(t){const e=t.node,n=t.intoFragment?document.createDocumentFragment():e,i=t.isApplying;let r=0;for(let s of this.children)if(E(s)){if(!i){s.setParent(e);for(let t of s)n.appendChild(t.element)}}else if(S(s))i||n.appendChild(s.element);else if(i){const e={children:[],bindings:[],attributes:{}};t.revertData.children.push(e),s._renderNode({node:n.childNodes[r++],isApplying:!0,revertData:e})}else n.appendChild(s.render());t.intoFragment&&e.appendChild(n)}_setUpListeners(t){if(this.eventListeners)for(let e in this.eventListeners){const n=this.eventListeners[e].map(n=>{const[i,r]=e.split("@");return n.activateDomEventListener(i,r,t)});t.revertData&&t.revertData.bindings.push(n)}}_bindToObservable({schema:t,updater:e,data:n}){const i=n.revertData;w(t,e,n);const r=t.filter(t=>!T(t)).filter(t=>t.observable).map(i=>i.activateAttributeListener(t,e,n));i&&i.bindings.push(r)}_revertTemplateFromNode(t,e){for(let t of e.bindings)for(let e of t)e();if(e.text)t.textContent=e.text;else{for(let n in e.attributes){const i=e.attributes[n];null===i?t.removeAttribute(n):t.setAttribute(n,i)}for(let n=0;n<e.children.length;++n)this._revertTemplateFromNode(t.childNodes[n],e.children[n])}}}e.a=f,n.i(r.a)(f,s.a);class p{constructor(t){Object.assign(this,t)}getValue(t){const e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}activateAttributeListener(t,e,n){const i=()=>w(t,e,n);return this.emitter.listenTo(this.observable,"change:"+this.attribute,i),()=>{this.emitter.stopListening(this.observable,"change:"+this.attribute,i)}}}class g extends p{activateDomEventListener(t,e,n){const i=(t,n)=>{e&&!n.target.matches(e)||("function"==typeof this.eventNameOrFunction?this.eventNameOrFunction(n):this.observable.fire(this.eventNameOrFunction,n))};return this.emitter.listenTo(n.node,t,i),()=>{this.emitter.stopListening(n.node,t,i)}}}class m extends p{getValue(t){return!T(super.getValue(t))&&(this.valueIfTrue||!0)}}function b(t){return!!t&&(t.value&&(t=t.value),Array.isArray(t)?t.some(b):t instanceof p)}function w(t,e,{node:n}){let i=function(t,e){return t.map(t=>t instanceof p?t.getValue(e):t)}(t,n);T(i=1==t.length&&t[0]instanceof m?i[0]:i.reduce(C,""))?e.remove():e.set(i)}function v(t,e,n){return{set(i){t.setAttributeNS(n,e,i)},remove(){t.removeAttributeNS(n,e)}}}function y(t,e){return{set(n){t.style[e]=n},remove(){t.style[e]=null}}}function _(t){return n.i(l.a)(t,t=>{if(t&&(t instanceof p||P(t)||S(t)||E(t)))return t})}function k(t){if("string"==typeof t?t=function(t){return{text:[t]}}(t):t.text&&function(t){Array.isArray(t.text)||(t.text=[t.text])}(t),t.on&&(t.eventListeners=function(t){for(let e in t)x(t,e);return t}(t.on),delete t.on),!t.text){t.attributes&&function(t){for(let e in t)t[e].value&&(t[e].value=[].concat(t[e].value)),x(t,e)}(t.attributes);const e=new o.a;if(t.children)if(E(t.children))e.add(t.children);else for(let n of t.children)P(n)||S(n)?e.add(n):e.add(new f(n));t.children=e}return t}function x(t,e){Array.isArray(t[e])||(t[e]=[t[e]])}function C(t,e){return T(e)?t:T(t)?e:`${t} ${e}`}function A(t,e){for(let n in e)t[n]?t[n].push(...e[n]):t[n]=e[n]}function T(t){return!t&&0!==t}function S(t){return t instanceof a.a}function P(t){return t instanceof f}function E(t){return t instanceof c.a}function O(t){return"class"==t||"style"==t}},function(t,e,n){"use strict";var i=n(55),r=n(68),s=n(24),o=n(41);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class a extends i.a{constructor(t,e,n){super(e),this.name=t,this._children=new r.a,n&&this.insertChildren(0,n)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}is(t,e=null){return e?"element"==t&&e==this.name:"element"==t||t==this.name}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}clone(t=!1){const e=t?Array.from(this._children).map(t=>t.clone(!0)):null;return new a(this.name,this.getAttributes(),e)}offsetToIndex(t){return this._children.offsetToIndex(t)}appendChildren(t){this.insertChildren(this.childCount,t)}insertChildren(t,e){e=function(t){if("string"==typeof t)return[new s.a(t)];n.i(o.a)(t)||(t=[t]);return Array.from(t).map(t=>"string"==typeof t?new s.a(t):t)}(e);for(let t of e)t.parent=this;this._children.insertNodes(t,e)}removeChildren(t,e=1){const n=this._children.removeNodes(t,e);for(let t of n)t.parent=null;return n}getNodeByPath(t){let e=this;for(const n of t)e=e.getChild(n);return e}toJSON(){let t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(let e of this._children)t.children.push(e.toJSON())}return t}static fromJSON(t){let e=null;if(t.children){e=[];for(let n of t.children)n.name?e.push(a.fromJSON(n)):e.push(s.a.fromJSON(n))}return new a(t.name,t.attributes,e)}}e.a=a},function(t,e,n){"use strict";e.b=function(t,e){if(t[o]&&t[o][e])return t[o][e].emitter;return null},e.c=l;var i=n(387),r=n(67),s=n(488);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const o=Symbol("listeningTo"),a=Symbol("emitterId"),c={on(t,e,n={}){!function(t,e){const n=h(t);if(n[e])return;let i=e,r=null;const s=[];for(;""!==i&&!n[i];)n[i]={callbacks:[],childEvents:[]},s.push(n[i]),r&&n[i].childEvents.push(r),r=i,i=i.substr(0,i.lastIndexOf(":"));if(""!==i){for(let t of s)t.callbacks=n[i].callbacks.slice();n[i].childEvents.push(r)}}(this,t);const i=d(this,t),r=s.a.get(n.priority);e={callback:e,context:n.context||this,priority:r};for(let t of i){let n=!1;for(let i=0;i<t.length;i++)if(t[i].priority<r){t.splice(i,0,e),n=!0;break}n||t.push(e)}},once(t,e,n){this.on(t,function(t){t.off(),e.apply(this,arguments)},n)},off(t,e,n){const i=d(this,t);for(let t of i)for(let i=0;i<t.length;i++)t[i].callback==e&&(n&&n!=t[i].context||(t.splice(i,1),i--))},listenTo(t,e,n,i){let r,s,a,c;this[o]||(this[o]={}),r=this[o],u(t)||l(t),(a=r[s=u(t)])||(a=r[s]={emitter:t,callbacks:{}}),(c=a.callbacks[e])||(c=a.callbacks[e]=[]),c.push(n),t.on(e,n,i)},stopListening(t,e,n){let i=this[o],r=t&&u(t),s=i&&r&&i[r],a=s&&e&&s.callbacks[e];if(!(!i||t&&!s||e&&!a))if(n)t.off(e,n);else if(a){for(;n=a.pop();)t.off(e,n);delete s.callbacks[e]}else if(s){for(e in s.callbacks)this.stopListening(t,e);delete i[r]}else{for(r in i)this.stopListening(i[r].emitter);delete this[o]}},fire(t,...e){const n=t instanceof i.a?t:new i.a(this,t),r=n.name;let s=function t(e,n){let i;if(!e._events||!(i=e._events[n])||!i.callbacks.length)return n.indexOf(":")>-1?t(e,n.substr(0,n.lastIndexOf(":"))):null;return i.callbacks}(this,r);if(n.path.push(this),s){const t=[n,...e];s=Array.from(s);for(let e=0;e<s.length&&(s[e].callback.apply(s[e].context,t),n.off.called&&(delete n.off.called,this.off(r,s[e].callback,s[e].context)),!n.stop.called);e++);}if(this._delegations){const t=this._delegations.get(r),i=this._delegations.get("*");t&&f(t,n,e),i&&f(i,n,e)}},delegate(...t){return{to:(e,n)=>{this._delegations||(this._delegations=new Map);for(let i of t){let t=this._delegations.get(i);t?t.set(e,n):this._delegations.set(i,new Map([[e,n]]))}}}},stopDelegating(t,e){if(this._delegations)if(t)if(e){const n=this._delegations.get(t);n&&n.delete(e)}else this._delegations.delete(t);else this._delegations.clear()}};function l(t,e){t[a]||(t[a]=e||n.i(r.a)())}function u(t){return t[a]}function h(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function d(t,e){const n=h(t)[e];if(!n)return[];let i=[n.callbacks];for(let e=0;e<n.childEvents.length;e++){let r=d(t,n.childEvents[e]);i=i.concat(r)}return i}function f(t,e,n){for(let[r,s]of t){s?"function"==typeof s&&(s=s(e.name)):s=e.name;const t=new i.a(e.source,s);t.path=[...e.path],r.fire(t,...n)}}e.a=c},function(t,e,n){"use strict";var i=n(185),r=n(16),s="Expected a function",o=Math.max;e.a=function(t,e){if("function"!=typeof t)throw new TypeError(s);return e=o(void 0===e?t.length-1:n.i(r.a)(e),0),function(){for(var r=arguments,s=-1,a=o(r.length-e,0),c=Array(a);++s<a;)c[s]=r[e+s];switch(e){case 0:return t.call(this,c);case 1:return t.call(this,r[0],c);case 2:return t.call(this,r[0],r[1],c)}var l=Array(e+1);for(s=-1;++s<e;)l[s]=r[s];return l[e]=c,n.i(i.a)(t,this,l)}}},function(t,e,n){"use strict";var i=n(0),r=n(116),s=n(5),o=n(76),a=n(31),c=n(75),l=n(4),u=n(41);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class h{constructor(t){this.locale=t,this.t=t&&t.t,this.set("ready",!1),this._viewCollections=new c.a,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(e,n)=>{n.locale=t})}get element(){return this._element?this._element:this.template?(this._addTemplateChildren(),this._element=this.template.render()):null}set element(t){this._element=t}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=s.a.bind(this,this)}createCollection(){const t=new r.a;return this._viewCollections.add(t),t}addChildren(t){n.i(u.a)(t)||(t=[t]);for(let e of t)this._unboundChildren.add(e)}init(){if(this.ready)throw new i.a("ui-view-init-reinit: This View has already been initialized.");return Promise.resolve().then(()=>Promise.all(this._viewCollections.map(t=>t.init()))).then(()=>{this.ready=!0})}destroy(){this.stopListening();const t=this._viewCollections.map(t=>t.destroy());return this._unboundChildren.clear(),this._viewCollections.clear(),this.element=this.template=this.locale=this.t=this._viewCollections=this._unboundChildren=null,Promise.all(t)}_addTemplateChildren(){const t=e=>{if(e.children)for(let n of e.children)n instanceof h?this.addChildren(n):t(n)};t(this.template)}}e.a=h,n.i(l.a)(h,o.a),n.i(l.a)(h,a.a)},function(t,e,n){"use strict";var i=n(409),r=n(410),s=n(219),o=n(12),a=n(480);e.a=function(t){return"function"==typeof t?t:null==t?s.a:"object"==typeof t?n.i(o.a)(t)?n.i(r.a)(t[0],t[1]):n.i(i.a)(t):n.i(a.a)(t)}},function(t,e,n){"use strict";var i=n(31),r=n(4);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class s{constructor(t){this.editor=t,this.set("isEnabled",!0),this._checkEnabled&&this.on("refreshState",(t,e)=>{e.isEnabled=this._checkEnabled()})}destroy(){this.stopListening()}refreshState(){const t={isEnabled:!0};this.fire("refreshState",t),this.isEnabled=t.isEnabled}_execute(t){this.isEnabled&&this._doExecute(t)}_disable(){this.on("refreshState",o),this.refreshState()}_enable(){this.off("refreshState",o),this.refreshState()}_doExecute(){}}function o(t,e){e.isEnabled=!1}e.a=s,n.i(r.a)(s,i.a)},function(t,e,n){"use strict";var i=Array.isArray;e.a=i},function(t,e,n){"use strict";e.c=h,e.b=d;var i=n(55),r=n(24),s=n(71),o=n(2),a=n(37),c=n(68),l=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const u={insert:function(t,e){const n=(e=d(e)).reduce((t,e)=>t+e.offsetSize,0),i=t.parent;p(t);const r=t.index;return i.insertChildren(r,e),f(i,r+e.length),f(i,r),new o.a(t,t.getShiftedBy(n))},remove:h,move:function(t,e){if(!t.isFlat)throw new l.a("model-writer-move-range-not-flat: Trying to move a range that starts and ends in different element.");const n=this.remove(t);return e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),this.insert(e,n)},setAttribute:function(t,e,n){p(t.start),p(t.end);for(let i of t.getItems()){let t=i.is("textProxy")?i.textNode:i;null!==n?t.setAttribute(e,n):t.removeAttribute(e),f(t.parent,t.index)}f(t.end.parent,t.end.index)},removeAttribute:function(t,e){this.setAttribute(t,e,null)},normalizeNodes:d};function h(t){if(!t.isFlat)throw new l.a("model-writer-remove-range-not-flat: Trying to remove a range that starts and ends in different element.");const e=t.start.parent;p(t.start),p(t.end);const n=e.removeChildren(t.start.index,t.end.index-t.start.index);return f(e,t.start.index),n}function d(t){const e=[];t instanceof Array||(t=[t]);for(let n=0;n<t.length;n++)if("string"==typeof t[n])e.push(new r.a(t[n]));else if(t[n]instanceof s.a)e.push(new r.a(t[n].data,t[n].getAttributes()));else if(t[n]instanceof a.a||t[n]instanceof c.a)for(let i of t[n])e.push(i);else t[n]instanceof i.a&&e.push(t[n]);for(let t=1;t<e.length;t++){const n=e[t],i=e[t-1];n instanceof r.a&&i instanceof r.a&&g(n,i)&&(e.splice(t-1,2,new r.a(i.data+n.data,i.getAttributes())),t--)}return e}function f(t,e){const n=t.getChild(e-1),i=t.getChild(e);if(n&&i&&n.is("text")&&i.is("text")&&g(n,i)){const s=new r.a(n.data+i.data,n.getAttributes());t.removeChildren(e-1,2),t.insertChildren(e-1,s)}}function p(t){const e=t.textNode,n=t.parent;if(e){const i=t.offset-e.startOffset,s=e.index;n.removeChildren(s,1);const o=new r.a(e.data.substr(0,i),e.getAttributes()),a=new r.a(e.data.substr(i),e.getAttributes());n.insertChildren(s,[o,a])}}function g(t,e){const n=t.getAttributes(),i=e.getAttributes();for(let t of n){if(t[1]!==e.getAttribute(t[0]))return!1;i.next()}return i.next().done}e.a=u},function(t,e,n){"use strict";var i=n(93),r=n(43);e.a=function(t){return n.i(r.a)(t)&&n.i(i.a)(t)}},function(t,e,n){"use strict";e.a=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";var i=n(482);e.a=function(t){var e=n.i(i.a)(t),r=e%1;return e==e?r?e-r:e:0}},function(t,e,n){"use strict";e.b=function(t,e){if(r.prototype[t])throw new i.a("model-batch-register-taken: This batch method name is already taken.",{name:t});r.prototype[t]=e};var i=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */class r{constructor(t,e="default"){this.document=t,this.deltas=[],this.type=e}get baseVersion(){return this.deltas.length>0?this.deltas[0].baseVersion:null}addDelta(t){return t.batch=this,this.deltas.push(t),t}*getOperations(){for(let t of this.deltas)yield*t.operations}}e.a=r},function(t,e,n){"use strict";var i=n(0),r=n(306);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const s=new Map;e.a=class{static fromJSON(t,e){if(!s.has(t.__className))throw new i.a("delta-fromjson-no-deserializer: This delta has no defined deserializer",{name:t.__className});let n=new(s.get(t.__className));for(let i of t.operations)n.addOperation(r.a.fromJSON(i,e));return n}static register(t){s.set(t.className,t)}}},function(t,e,n){"use strict";var i=n(9),r=n(5),s=n(361),o=n(22);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this.set("label"),this.set("keystroke"),this.set("tooltip"),this.set("type","button"),this.set("isOn",!1),this.set("isEnabled",!0),this.set("withText",!1),this.set("icon"),this.set("tabindex",-1),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const e=this.bindTemplate;this.template=new r.a({tag:"button",attributes:{class:["ck-button",e.if("_tooltipString","ck-tooltip_s"),e.to("isEnabled",t=>t?"ck-enabled":"ck-disabled"),e.to("isOn",t=>t?"ck-on":"ck-off"),e.if("withText","ck-button_with-text")],type:e.to("type",t=>t||"button"),"data-ck-tooltip":[e.to("_tooltipString")],tabindex:e.to("tabindex")},children:[{tag:"span",attributes:{class:["ck-button__label"]},children:[{text:e.to("label")}]}],on:{mousedown:e.to(t=>{t.preventDefault()}),click:e.to(t=>{this.isEnabled?this.fire("execute"):t.preventDefault()})}})}init(){let t=Promise.resolve();if(this.icon&&!this.iconView){const e=this.iconView=new s.a;e.bind("content").to(this,"icon"),this.element.insertBefore(e.element,this.element.firstChild),t=t.then(()=>this.addChildren(e))}return t.then(()=>super.init())}focus(){this.element.focus()}_getTooltipString(t,e,i){if(t){if("string"==typeof t)return t;if(i&&(i=n.i(o.b)(i)),t instanceof Function)return t(e,i);if(!0===t)return`${e}${i?` (${i})`:""}`}return!1}}},function(t,e,n){"use strict";e.a=function(t){var e=t?t.length:0;return e?t[e-1]:void 0}},function(t,e,n){"use strict";var i=n(92),r=n(18);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class s{constructor(){this.batch=null,this.operations=[]}get baseVersion(){return this.operations.length>0?this.operations[0].baseVersion:null}set baseVersion(t){for(let e of this.operations)e.baseVersion=t++}get _reverseDeltaClass(){return s}addOperation(t){return t.delta=this,this.operations.push(t),t}clone(){let t=new this.constructor;for(let e of this.operations)t.addOperation(e.clone());return t}getReversed(){let t=new this._reverseDeltaClass;for(let e of this.operations)t.addOperation(e.getReversed());t.operations.reverse();for(let e=0;e<t.operations.length;e++)t.operations[e].baseVersion=this.operations[this.operations.length-1].baseVersion+e+1;return t}toJSON(){let t=n.i(i.a)(this);return t.__className=this.constructor.className,delete t.batch,t}static get className(){return"engine.model.delta.Delta"}static get _priority(){return 0}}e.a=s,r.a.register(s)},function(t,e,n){"use strict";e.d=o,e.c=function(t){"string"==typeof t&&(t=a(t));return t.map(t=>"string"==typeof t?o(t):t).reduce((t,e)=>e+t,0)},e.b=function(t){const e=a(t);if(r.a.mac&&"ctrl"==e[0].toLowerCase())return"âŒ˜"+(e[1]||"");return t};var i=n(0),r=n(386);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const s=function(){const t={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,esc:27,tab:9,ctrl:1114112,cmd:1114112,shift:2228224,alt:4456448};for(let e=65;e<=90;e++){const n=String.fromCharCode(e);t[n.toLowerCase()]=e}for(let e=48;e<=57;e++)t[e-48]=e;for(let e=112;e<=123;e++)t["f"+(e-111)]=e;return t}();function o(t){let e;if("string"==typeof t){if(!(e=s[t.toLowerCase()]))throw new i.a("keyboard-unknown-key: Unknown key name.",{key:t})}else e=t.keyCode+(t.altKey?s.alt:0)+(t.ctrlKey?s.ctrl:0)+(t.shiftKey?s.shift:0);return e}function a(t){return t.split(/\s*\+\s*/)}e.a=s},function(t,e,n){"use strict";var i=n(81),r=n(443);e.a=function t(e,s,o,a,c){var l=-1,u=e.length;for(o||(o=r.a),c||(c=[]);++l<u;){var h=e[l];s>0&&o(h)?s>1?t(h,s-1,o,a,c):n.i(i.a)(c,h):a||(c[c.length]=h)}return c}},function(t,e,n){"use strict";var i=n(55);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */class r extends i.a{constructor(t,e){super(e),this.data=t||""}get offsetSize(){return this.data.length}is(t){return"text"==t}clone(){return new r(this.data,this.getAttributes())}toJSON(){let t=super.toJSON();return t.data=this.data,t}static fromJSON(t){return new r(t.data,t.attributes)}}e.a=r},function(t,e,n){"use strict";var i=n(72),r=n(29),s=n(264),o=n(41),a=n(95),c=n(164);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class l extends i.a{constructor(t,e,i){if(super(),this.name=t,n.i(a.a)(e)?this._attrs=n.i(s.a)(e):this._attrs=new Map(e),this._children=[],i&&this.insertChildren(0,i),this._classes=new Set,this._attrs.has("class")){const t=this._attrs.get("class");h(this._classes,t),this._attrs.delete("class")}this._styles=new Map,this._attrs.has("style")&&(u(this._styles,this._attrs.get("style")),this._attrs.delete("style")),this._customProperties=new Map}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}is(t,e=null){return e?"element"==t&&e==this.name:"element"==t||t==this.name}clone(t=!1){const e=[];if(t)for(let n of this.getChildren())e.push(n.clone(t));const n=new this.constructor(this.name,this._attrs,e);return n._classes=new Set(this._classes),n._styles=new Map(this._styles),n._customProperties=new Map(this._customProperties),n.getFillerOffset=this.getFillerOffset,n}appendChildren(t){return this.insertChildren(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.size>0&&(yield"style");for(let t of this._attrs.keys())yield t}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.size>0&&(yield["style",this.getAttribute("style")])}getAttribute(t){if("class"==t)return this._classes.size>0?[...this._classes].join(" "):void 0;if("style"!=t)return this._attrs.get(t);if(this._styles.size>0){let t="";for(let[e,n]of this._styles)t+=`${e}:${n};`;return t}}hasAttribute(t){return"class"==t?this._classes.size>0:"style"==t?this._styles.size>0:this._attrs.has(t)}setAttribute(t,e){this._fireChange("attributes",this),"class"==t?h(this._classes,e):"style"==t?u(this._styles,e):this._attrs.set(t,e)}insertChildren(t,e){this._fireChange("children",this);let i=0;e=function(t){if("string"==typeof t)return[new r.a(t)];n.i(o.a)(t)||(t=[t]);return Array.from(t).map(t=>"string"==typeof t?new r.a(t):t)}(e);for(let n of e)n.parent=this,this._children.splice(t,0,n),t++,i++;return i}removeAttribute(t){return this._fireChange("attributes",this),"class"==t?this._classes.size>0&&(this._classes.clear(),!0):"style"==t?this._styles.size>0&&(this._styles.clear(),!0):this._attrs.delete(t)}removeChildren(t,e=1){this._fireChange("children",this);for(let n=t;n<t+e;n++)this._children[n].parent=null;return this._children.splice(t,e)}isSimilar(t){if(!(t instanceof l))return!1;if(this===t)return!0;if(this.name!=t.name)return!1;if(this._attrs.size!==t._attrs.size||this._classes.size!==t._classes.size||this._styles.size!==t._styles.size)return!1;for(let[e,n]of this._attrs)if(!t._attrs.has(e)||t._attrs.get(e)!==n)return!1;for(let e of this._classes)if(!t._classes.has(e))return!1;for(let[e,n]of this._styles)if(!t._styles.has(e)||t._styles.get(e)!==n)return!1;return!0}addClass(...t){this._fireChange("attributes",this),t.forEach(t=>this._classes.add(t))}removeClass(...t){this._fireChange("attributes",this),t.forEach(t=>this._classes.delete(t))}hasClass(...t){for(let e of t)if(!this._classes.has(e))return!1;return!0}getClassNames(){return this._classes.keys()}setStyle(t,e){if(this._fireChange("attributes",this),n.i(a.a)(t)){const e=Object.keys(t);for(let n of e)this._styles.set(n,t[n])}else this._styles.set(t,e)}getStyle(t){return this._styles.get(t)}getStyleNames(){return this._styles.keys()}hasStyle(...t){for(let e of t)if(!this._styles.has(e))return!1;return!0}removeStyle(...t){this._fireChange("attributes",this),t.forEach(t=>this._styles.delete(t))}findAncestor(...t){const e=new c.a(...t);let n=this.parent;for(;n;){if(e.match(n))return n;n=n.parent}return null}setCustomProperty(t,e){this._customProperties.set(t,e)}getCustomProperty(t){return this._customProperties.get(t)}removeCustomProperty(t){return this._customProperties.delete(t)}*getCustomProperties(){yield*this._customProperties.entries()}}function u(t,e){let n=null,i=0,r=0,s=null;if(t.clear(),""!==e){";"!=e.charAt(e.length-1)&&(e+=";");for(let o=0;o<e.length;o++){const a=e.charAt(o);if(null===n)switch(a){case":":s||(s=e.substr(i,o-i),r=o+1);break;case'"':case"'":n=a;break;case";":let c=e.substr(r,o-r);s&&t.set(s.trim(),c.trim()),s=null,i=o+1}else a===n&&(n=null)}}}function h(t,e){const n=e.split(/\s+/);t.clear(),n.forEach(e=>t.add(e))}e.a=l},function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}},function(t,e,n){"use strict";var i=n(32),r=n(1),s=n(2),o=n(0),a=n(60),c=n(13);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t,e,n,i){super(i),this.sourcePosition=r.a.createFromPosition(t),this.howMany=e,this.targetPosition=r.a.createFromPosition(n),this.isSticky=!1}get type(){return"move"}clone(){const t=new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion);return t.isSticky=this.isSticky,t}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){let t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);const e=new this.constructor(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1);return e.isSticky=this.isSticky,e}_execute(){let t=this.sourcePosition.parent,e=this.targetPosition.parent,i=this.sourcePosition.offset,r=this.targetPosition.offset;if(!t||!e)throw new o.a("move-operation-position-invalid: Source position or target position is invalid.");if(i+this.howMany>t.maxOffset)throw new o.a("move-operation-nodes-do-not-exist: The nodes which should be moved do not exist.");if(t===e&&i<r&&r<i+this.howMany)throw new o.a("move-operation-range-into-itself: Trying to move a range of nodes to the inside of that range.");if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==n.i(a.a)(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){let t=this.sourcePosition.path.length-1;if(this.targetPosition.path[t]>=i&&this.targetPosition.path[t]<i+this.howMany)throw new o.a("move-operation-node-into-itself: Trying to move a range of nodes into one of nodes from that range.")}const l=c.a.move(s.a.createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition);return{sourcePosition:this.sourcePosition,range:l}}static get className(){return"engine.model.operation.MoveOperation"}static fromJSON(t,e){let n=r.a.fromJSON(t.sourcePosition,e),i=r.a.fromJSON(t.targetPosition,e);const s=new this(n,t.howMany,i,t.baseVersion);return t.isSticky&&(s.isSticky=!0),s}}},function(t,e,n){"use strict";var i=n(48),r=n(60),s=n(0),o=n(112);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class a{constructor(t,e){this.parent=t,this.offset=e}get nodeAfter(){return this.parent.is("text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const t=this.parent.is("text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof o.a);){if(!t.parent)return null;t=t.parent}return t}getShiftedBy(t){let e=a.createFromPosition(this),n=e.offset+t;return e.offset=n<0?0:n,e}getLastMatchingPosition(t,e={}){e.startPosition=this;const n=new i.a(e);return n.skip(t),n.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeNode:!0})}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return"before"==this.compareWith(t)}isAfter(t){return"after"==this.compareWith(t)}compareWith(t){if(this.isEqual(t))return"same";if(this.parent===t.parent)return this.offset-t.offset<0?"before":"after";const e=this.getAncestors(),i=t.getAncestors(),s=n.i(r.a)(e,i);let o;switch(s){case 0:return"different";case"prefix":o=e.length-1;break;case"extension":o=i.length-1;break;default:o=s-1}const a=e[o],c=e[o+1],l=i[o+1];if(a===this.parent){return this.offset-l.index<=0?"before":"after"}if(a===t.parent){return c.index-t.offset<0?"before":"after"}return c.index-l.index<0?"before":"after"}static createAt(t,e){if(t instanceof a)return this.createFromPosition(t);{let n=t;if("end"==e)e=n.is("text")?n.data.length:n.childCount;else{if("before"==e)return this.createBefore(n);if("after"==e)return this.createAfter(n);e||(e=0)}return new a(n,e)}}static createAfter(t){if(t.is("textProxy"))return new a(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new s.a("view-position-after-root: You can not make position after root.",{root:t});return new a(t.parent,t.index+1)}static createBefore(t){if(t.is("textProxy"))return new a(t.textNode,t.offsetInText);if(!t.parent)throw new s.a("view-position-before-root: You can not make position before root.",{root:t});return new a(t.parent,t.index)}static createFromPosition(t){return new this(t.parent,t.offset)}}e.a=a},function(t,e,n){"use strict";var i=n(72);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */class r extends i.a{constructor(t){super(),this._data=t}clone(){return new r(this.data)}is(t){return"text"==t}get data(){return this._data}set data(t){this._fireChange("text",this),this._data=t}isSimilar(t){return t instanceof r&&(this===t||this.data===t.data)}}e.a=r},function(t,e,n){"use strict";(function(t,i){var r=n(416),s={function:!0,object:!0},o=s[typeof exports]&&exports&&!exports.nodeType?exports:void 0,a=s[typeof t]&&t&&!t.nodeType?t:void 0,c=n.i(r.a)(o&&a&&"object"==typeof i&&i),l=n.i(r.a)(s[typeof self]&&self),u=n.i(r.a)(s[typeof window]&&window),h=n.i(r.a)(s[typeof this]&&this),d=c||u!==(h&&h.window)&&u||l||h||Function("return this")();e.a=d}).call(e,n(269)(t),n(149))},function(t,e,n){"use strict";var i=n(7),r=n(0),s=n(53),o=n(15);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const a=Symbol("attributes"),c=Symbol("boundObservables"),l=Symbol("boundAttributes"),u={set(t,e){if(n.i(o.a)(t))return void Object.keys(t).forEach(e=>{this.set(e,t[e])},this);h(this);const i=this[a];if(t in this&&!i.has(t))throw new r.a("observable-set-cannot-override: Cannot override an existing property.");Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:()=>i.get(t),set(e){const n=i.get(t);n===e&&i.has(t)||(i.set(t,e),this.fire("change:"+t,t,e,n))}}),this[t]=e},bind(...t){if(!t.length||!f(t))throw new r.a("observable-bind-wrong-attrs: All attributes must be strings.");if(new Set(t).size!==t.length)throw new r.a("observable-bind-duplicate-attrs: Attributes must be unique.");h(this);const e=this[l];t.forEach(t=>{if(e.has(t))throw new r.a("observable-bind-rebind: Cannot bind the same attribute more that once.")});const n=new Map;return t.forEach(t=>{const i={attr:t,to:[]};e.set(t,i),n.set(t,i)}),{to:d,_observable:this,_bindAttrs:t,_to:[],_bindings:n}},unbind(...t){if(!(a in this))return;const e=this[l],n=this[c];if(t.length){if(!f(t))throw new r.a("observable-unbind-wrong-attrs: Attributes must be strings.");t.forEach(t=>{const i=e.get(t);let r,s,o,a;i.to.forEach(t=>{r=t[0],s=t[1],o=n.get(r),(a=o[s]).delete(i),a.size||delete o[s],Object.keys(o).length||(n.delete(r),this.stopListening(r,"change"))}),e.delete(t)})}else n.forEach((t,e)=>{this.stopListening(e,"change")}),n.clear(),e.clear()}};function h(t){a in t||(Object.defineProperty(t,a,{value:new Map}),Object.defineProperty(t,c,{value:new Map}),Object.defineProperty(t,l,{value:new Map}))}function d(...t){const e=function(...t){if(!t.length)throw new r.a("observable-bind-to-parse-error: Invalid argument syntax in `to()`.");const e={to:[]};let n;"function"==typeof t[t.length-1]&&(e.callback=t.pop());return t.forEach(t=>{if("string"==typeof t)n.attrs.push(t);else{if("object"!=typeof t)throw new r.a("observable-bind-to-parse-error: Invalid argument syntax in `to()`.");n={observable:t,attrs:[]},e.to.push(n)}}),e}(...t),n=Array.from(this._bindings.keys()),i=n.length;if(!e.callback&&e.to.length>1)throw new r.a("observable-bind-to-no-callback: Binding multiple observables only possible with callback.");if(i>1&&e.callback)throw new r.a("observable-bind-to-extra-callback: Cannot bind multiple attributes and use a callback in one binding.");var s;e.to.forEach(t=>{if(t.attrs.length&&t.attrs.length!==i)throw new r.a("observable-bind-to-attrs-length: The number of attributes must match.");t.attrs.length||(t.attrs=this._bindAttrs)}),this._to=e.to,e.callback&&(this._bindings.get(n[0]).callback=e.callback),s=this._observable,this._to.forEach(t=>{const e=s[c];let n;e.get(t.observable)||s.listenTo(t.observable,"change",(i,r)=>{(n=e.get(t.observable)[r])&&n.forEach(t=>{p(s,t.attr)})})}),function(t){let e;t._bindings.forEach((n,i)=>{t._to.forEach(r=>{e=r.attrs[n.callback?0:t._bindAttrs.indexOf(i)],n.to.push([r.observable,e]),function(t,e,n,i){const r=t[c],s=r.get(n),o=s||{};o[i]||(o[i]=new Set);o[i].add(e),s||r.set(n,o)}(t._observable,n,r.observable,e)})})}(this),this._bindAttrs.forEach(t=>{p(this._observable,t)})}function f(t){return t.every(t=>"string"==typeof t)}function p(t,e){const n=t[l].get(e);let i;i=n.callback?n.callback.apply(t,n.to.map(t=>t[0][t[1]])):(i=n.to[0])[0][i[1]],t.hasOwnProperty(e)?t[e]=i:t.set(e,i)}e.a=u,n.i(s.a)(u,i.a)},function(t,e,n){"use strict";var i=n(92);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class{constructor(t){this.baseVersion=t}toJSON(){const t=n.i(i.a)(this,!0);return t.__className=this.constructor.className,delete t.delta,t}static get className(){return"engine.model.operation.Operation"}static fromJSON(t){return new this(t.baseVersion)}}},function(t,e,n){"use strict";var i=n(28),r=n(48);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class s{constructor(t,e=null){this.start=i.a.createFromPosition(t),this.end=e?i.a.createFromPosition(e):i.a.createFromPosition(t)}*[Symbol.iterator](){yield*new r.a({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(o,{direction:"backward"}),e=this.end.getLastMatchingPosition(o);return t.parent.is("text")&&t.isAtStart&&(t=i.a.createBefore(t.parent)),e.parent.is("text")&&e.isAtEnd&&(e=i.a.createAfter(e.parent)),new s(t,e)}getTrimmed(){let t=this.start.getLastMatchingPosition(o),e=this.end.getLastMatchingPosition(o,{direction:"backward"}),n=t.nodeAfter,r=e.nodeBefore;return n&&n.is("text")&&(t=new i.a(n,0)),r&&r.is("text")&&(e=new i.a(r,r.data.length)),new s(t,e)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t){return this.containsPosition(t.start)&&this.containsPosition(t.end)}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new s(this.start,t.start)),this.containsPosition(t.end)&&e.push(new s(t.end,this.end))):e.push(s.createFromRange(this)),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,n=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(n=t.end),new s(e,n)}return null}getWalker(t={}){return t.boundaries=this,new r.a(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new r.a(t);for(let t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new r.a(t);yield e.position;for(let t of e)yield t.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}static createFromParentsAndOffsets(t,e,n,r){return new this(new i.a(t,e),new i.a(n,r))}static createFromRange(t){return new this(t.start,t.end)}static createFromPositionAndShift(t,e){const n=t,i=t.getShiftedBy(e);return e>0?new this(n,i):new this(i,n)}static createIn(t){return this.createFromParentsAndOffsets(t,0,t,t.childCount)}static createOn(t){return this.createFromPositionAndShift(i.a.createBefore(t),1)}}function o(t){return!(!t.item.is("attributeElement")&&!t.item.is("uiElement"))}e.a=s},function(t,e,n){"use strict";e.a=function(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=t[i+e];return s}},function(t,e,n){"use strict";var i=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.a=function(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){"use strict";
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */const i={error(t,e){console.error(t,e)},warn(t,e){console.warn(t,e)}};e.a=i},function(t,e,n){"use strict";var i=n(68),r=n(6),s=n(24),o=n(41);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class a{constructor(t){this.markers=new Map,this._children=new i.a,t&&this.insertChildren(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(t){return"documentFragment"==t}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}offsetToIndex(t){return this._children.offsetToIndex(t)}appendChildren(t){this.insertChildren(this.childCount,t)}insertChildren(t,e){e=function(t){if("string"==typeof t)return[new s.a(t)];n.i(o.a)(t)||(t=[t]);return Array.from(t).map(t=>"string"==typeof t?new s.a(t):t)}(e);for(let t of e)t.parent=this;this._children.insertNodes(t,e)}removeChildren(t,e=1){const n=this._children.removeNodes(t,e);for(let t of n)t.parent=null;return n}toJSON(){let t=[];for(let e of this._children)t.push(e.toJSON());return t}static fromJSON(t){let e=[];for(let n of t)n.name?e.push(r.a.fromJSON(n)):e.push(s.a.fromJSON(n));return new a(e)}}e.a=a},function(t,e,n){"use strict";var i=n(32),r=n(1),s=n(68),o=n(39),a=n(13),c=n(24),l=n(6);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class u extends i.a{constructor(t,e,i){super(i),this.position=r.a.createFromPosition(t),this.nodes=new s.a(n.i(a.b)(e))}get type(){return"insert"}clone(){const t=new s.a([...this.nodes].map(t=>t.clone(!0)));return new u(this.position,t,this.baseVersion)}getReversed(){return new o.a(this.position,this.nodes.maxOffset,this.baseVersion+1)}_execute(){const t=this.nodes;return this.nodes=new s.a([...t].map(t=>t.clone(!0))),{range:a.a.insert(this.position,t)}}static get className(){return"engine.model.operation.InsertOperation"}static fromJSON(t,e){let n=[];for(let e of t.nodes)e.name?n.push(l.a.fromJSON(e)):n.push(c.a.fromJSON(e));return new u(r.a.fromJSON(t.position,e),n,t.baseVersion)}}e.a=u},function(t,e,n){"use strict";var i=n(27),r=n(1),s=n(6),o=n(107);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class a extends i.a{constructor(t,e,n){const i=t.root.document.graveyard;super(t,e,new r.a(i,[i.maxOffset,0]),n),this._needsHolderElement=!0}get type(){return"remove"}get _holderElementOffset(){return this.targetPosition.path[0]}set _holderElementOffset(t){this.targetPosition.path[0]=t}getReversed(){return new o.a(this.targetPosition,this.howMany,this.sourcePosition,this.baseVersion+1)}clone(){let t=new a(this.sourcePosition,this.howMany,this.baseVersion);return t.targetPosition=r.a.createFromPosition(this.targetPosition),t}_execute(){if(this._needsHolderElement){const t=this.targetPosition.root,e=new s.a("$graveyardHolder");t.insertChildren(this._holderElementOffset,e),this.sourcePosition.root==t&&this.sourcePosition.path[0]>=this._holderElementOffset&&this.sourcePosition.path[0]++}return super._execute()}static get className(){return"engine.model.operation.RemoveOperation"}static fromJSON(t,e){let n=r.a.fromJSON(t.sourcePosition,e);const i=new a(n,t.howMany,t.baseVersion);return i.targetPosition=r.a.fromJSON(t.targetPosition,e),i._needsHolderElement=t._needsHolderElement,i}}e.a=a},function(t,e,n){"use strict";var i=n(24),r=n(71),s=n(6),o=n(1),a=n(0);function c(t,e,n,i,r){return{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:i,length:r}}}e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class{constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new a.a("model-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.");const e=t.direction||"forward";if("forward"!=e&&"backward"!=e)throw new a.a("model-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this.position=o.a.createFromPosition(t.startPosition):this.position=o.a.createFromPosition(this.boundaries["backward"==this.direction?"end":"start"]),this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}skip(t){let e,n,i,r;do{i=this.position,r=this._visitedParent,({done:e,value:n}=this.next())}while(!e&&t(n));e||(this.position=i,this._visitedParent=r)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){const t=this.position,e=o.a.createFromPosition(this.position),n=this._visitedParent;if(null===n.parent&&e.offset===n.maxOffset)return{done:!0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0};const a=e.textNode?e.textNode:e.nodeAfter;if(a instanceof s.a)return this.shallow?e.offset++:(e.path.push(0),this._visitedParent=a),this.position=e,c("elementStart",a,t,e,1);if(a instanceof i.a){let i,s;if(this.singleCharacters)i=1;else{let t=a.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<t&&(t=this.boundaries.end.offset),i=t-e.offset}s=e.offset-a.startOffset;const o=new r.a(a,s,i);return e.offset+=i,this.position=e,c("text",o,t,e,i)}return e.path.pop(),e.offset++,this.position=e,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():c("elementEnd",n,t,e)}_previous(){const t=this.position,e=o.a.createFromPosition(this.position),n=this._visitedParent;if(null===n.parent&&0===e.offset)return{done:!0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0};const a=e.textNode?e.textNode:e.nodeBefore;if(a instanceof s.a)return e.offset--,this.shallow?(this.position=e,c("elementStart",a,t,e,1)):(e.path.push(a.maxOffset),this.position=e,this._visitedParent=a,this.ignoreElementEnd?this._previous():c("elementEnd",a,t,e));if(a instanceof i.a){let i,s;if(this.singleCharacters)i=1;else{let t=a.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>t&&(t=this.boundaries.start.offset),i=e.offset-t}s=e.offset-a.startOffset;const o=new r.a(a,s-i,i);return e.offset-=i,this.position=e,c("text",o,t,e,i)}return e.path.pop(),this.position=e,this._visitedParent=n.parent,c("elementStart",n,t,e,1)}}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){return!(!t||!t[Symbol.iterator])}},function(t,e,n){"use strict";var i=n(79),r=n(121),s=n(122),o=n(132),a=n(427),c=n(91),l=200;e.a=function(t,e,u){var h=-1,d=r.a,f=t.length,p=!0,g=[],m=g;if(u)p=!1,d=s.a;else if(f>=l){var b=e?null:n.i(a.a)(t);if(b)return n.i(c.a)(b);p=!1,d=o.a,m=new i.a}else m=e?[]:g;t:for(;++h<f;){var w=t[h],v=e?e(w):w;if(w=u||0!==w?w:0,p&&v==v){for(var y=m.length;y--;)if(m[y]===v)continue t;e&&m.push(v),g.push(w)}else d(m,v,u)||(m!==g&&m.push(v),g.push(w))}return g}},function(t,e,n){"use strict";e.a=function(t){return!!t&&"object"==typeof t}},function(t,e,n){"use strict";var i=n(43),r="[object Symbol]",s=Object.prototype.toString;e.a=function(t){return"symbol"==typeof t||n.i(i.a)(t)&&s.call(t)==r}},function(t,e,n){"use strict";e.a=function(){return new l};var i=n(97),r=n(154),s=n(110),o=n(46),a=n(167),c=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class l{constructor(){this._dispatchers=[],this._from=null}for(...t){return this._dispatchers=t,this}fromElement(t){return this._from={type:"element",name:t,priority:null},this}fromAttribute(t){return this._from={type:"attribute",key:t,priority:null},this}fromMarker(t){return this._from={type:"marker",name:t,priority:null},this}withPriority(t){return this._from.priority=t,this}toElement(t){const e=null===this._from.priority?"normal":this._from.priority;for(let a of this._dispatchers)"element"==this._from.type?(t="string"==typeof t?new o.a(t):t,a.on("insert:"+this._from.name,n.i(i.a)(t),{priority:e})):"attribute"==this._from.type?(t="string"==typeof t?new s.a(t):t,a.on("addAttribute:"+this._from.key,n.i(i.b)(t),{priority:e}),a.on("changeAttribute:"+this._from.key,n.i(i.b)(t),{priority:e}),a.on("removeAttribute:"+this._from.key,n.i(i.c)(t),{priority:e}),a.on("selectionAttribute:"+this._from.key,n.i(r.a)(t),{priority:e})):(t="string"==typeof t?new s.a(t):t,a.on("addMarker:"+this._from.name,n.i(i.d)(t),{priority:e}),a.on("removeMarker:"+this._from.name,n.i(i.e)(t),{priority:e}),a.on("selectionMarker:"+this._from.name,n.i(r.b)(t),{priority:e}))}toStamp(t){for(let e of this._dispatchers){if("marker"!=this._from.type)throw new c.a("build-model-converter-non-marker-to-stamp: To-stamp conversion is supported only from model markers.");const r=null===this._from.priority?"normal":this._from.priority;t="string"==typeof t?new a.a(t):t,e.on("addMarker:"+this._from.name,n.i(i.f)(t),{priority:r}),e.on("removeMarker:"+this._from.name,n.i(i.g)(t),{priority:r})}}toAttribute(t,e){if("attribute"!=this._from.type)throw new c.a("build-model-converter-non-attribute-to-attribute: To-attribute conversion is supported only from model attributes.");let r;r=t?"string"==typeof t?e?function(){return{key:t,value:e}}:function(e){return{key:t,value:e}}:t:void 0;for(let t of this._dispatchers){const e={priority:this._from.priority||"normal"};t.on("addAttribute:"+this._from.key,n.i(i.h)(r),e),t.on("changeAttribute:"+this._from.key,n.i(i.h)(r),e),t.on("removeAttribute:"+this._from.key,n.i(i.i)(r),e)}}}},function(t,e,n){"use strict";var i=n(25);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */function r(){return 0===this.childCount?0:null}e.a=class extends i.a{constructor(t,e,n){super(t,e,n),this.getFillerOffset=r}is(t,e=null){return e?"containerElement"==t&&e==this.name||super.is(t,e):"containerElement"==t||super.is(t)}}},function(t,e,n){"use strict";var i=n(76),r=n(4);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class s{constructor(t){this.document=t,this.isEnabled=!1}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}destroy(){this.disable(),this.stopListening()}}e.a=s,n.i(r.a)(s,i.a)},function(t,e,n){"use strict";var i=n(25),r=n(29),s=n(318),o=n(28),a=n(0);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class{constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new a.a("view-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.");if(t.direction&&"forward"!=t.direction&&"backward"!=t.direction)throw new a.a("view-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this.position=o.a.createFromPosition(t.startPosition):this.position=o.a.createFromPosition(t.boundaries["backward"==t.direction?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}skip(t){let e,n,i;do{i=this.position,({done:e,value:n}=this.next())}while(!e&&t(n));e||(this.position=i)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let t=o.a.createFromPosition(this.position);const e=this.position,n=t.parent;if(null===n.parent&&t.offset===n.childCount)return{done:!0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};let a;if(n instanceof r.a){if(t.isAtEnd)return this.position=o.a.createAfter(n),this._next();a=n.data[t.offset]}else a=n.getChild(t.offset);if(a instanceof i.a)return this.shallow?t.offset++:t=new o.a(a,0),this.position=t,this._formatReturnValue("elementStart",a,e,t,1);if(a instanceof r.a){if(this.singleCharacters)return t=new o.a(a,0),this.position=t,this._next();{let n=a.data.length,i=a;return a==this._boundaryEndParent?(n=this.boundaries.end.offset,i=new s.a(a,0,n),t=o.a.createAfter(i)):t.offset++,this.position=t,this._formatReturnValue("text",i,e,t,n)}}if("string"==typeof a){let i;i=this.singleCharacters?1:(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-t.offset;const r=new s.a(n,t.offset,i);return t.offset+=i,this.position=t,this._formatReturnValue("text",r,e,t,i)}return t=o.a.createAfter(n),this.position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,e,t)}_previous(){let t=o.a.createFromPosition(this.position);const e=this.position,n=t.parent;if(null===n.parent&&0===t.offset)return{done:!0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};let a;if(n instanceof r.a){if(t.isAtStart)return this.position=o.a.createBefore(n),this._previous();a=n.data[t.offset-1]}else a=n.getChild(t.offset-1);if(a instanceof i.a)return this.shallow?(t.offset--,this.position=t,this._formatReturnValue("elementStart",a,e,t,1)):(t=new o.a(a,a.childCount),this.position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",a,e,t));if(a instanceof r.a){if(this.singleCharacters)return t=new o.a(a,a.data.length),this.position=t,this._previous();{let n=a.data.length,i=a;if(a==this._boundaryStartParent){const e=this.boundaries.start.offset;n=(i=new s.a(a,e,a.data.length-e)).data.length,t=o.a.createBefore(i)}else t.offset--;return this.position=t,this._formatReturnValue("text",i,e,t,n)}}if("string"==typeof a){let i;if(this.singleCharacters)i=1;else{const e=n===this._boundaryStartParent?this.boundaries.start.offset:0;i=t.offset-e}t.offset-=i;const r=new s.a(n,t.offset,i);return this.position=t,this._formatReturnValue("text",r,e,t,i)}return t=o.a.createBefore(n),this.position=t,this._formatReturnValue("elementStart",n,e,t,1)}_formatReturnValue(t,e,n,i,r){return e instanceof s.a&&(e.offsetInText+e.data.length==e.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?n=o.a.createAfter(e.textNode):(i=o.a.createAfter(e.textNode),this.position=i)),0===e.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?n=o.a.createBefore(e.textNode):(i=o.a.createBefore(e.textNode),this.position=i))),{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:i,length:r}}}}},function(t,e,n){"use strict";var i=n(225);e.a=function(t,e){var r=t[e];return n.i(i.a)(r)?r:void 0}},function(t,e,n){"use strict";var i=n(12),r=n(44),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.a=function(t,e){if(n.i(i.a)(t))return!1;var a=typeof t;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=t&&!n.i(r.a)(t))||o.test(t)||!s.test(t)||null!=e&&t in Object(e)}},function(t,e,n){"use strict";var i=n(44),r=1/0;e.a=function(t){if("string"==typeof t||n.i(i.a)(t))return t;var e=t+"";return"0"==e&&1/t==-r?"-0":e}},function(t,e,n){"use strict";e.a=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){"use strict";var i=n(468);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";e.a=function(){return new l};var i=n(164),r=n(6),s=n(1),o=n(13),a=n(0),c=n(41);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class l{constructor(){this._dispatchers=[],this._from=[]}for(...t){return this._dispatchers=t,this}fromElement(t){return this.from({name:t})}fromAttribute(t,e=/.*/){let n={};"style"===t||"class"===t?n[t]=e:(n.attribute={},n.attribute[t]=e);const r=new i.a(n);return this._from.push({matcher:r,consume:!1,priority:null,attributeKey:t}),this}from(t){return t instanceof i.a||(t=new i.a(t)),this._from.push({matcher:t,consume:!1,priority:null}),this}consuming(t){return this._from[this._from.length-1].consume=t,this}withPriority(t){return this._from[this._from.length-1].priority=t,this}toElement(t){this._setCallback(function(e){return(n,i,a,c)=>{let l=e.matcher.matchAll(i.input);if(l)for(let n of l){const l=t instanceof Function?t(i.input):new r.a(t);if(!l)continue;const u=Array.from(l.getAttributeKeys());if(!c.schema.check({name:l.name,attributes:u,inside:i.context}))continue;if(!a.consume(i.input,e.consume||n.match))continue;i.context.push(l);const h=c.convertChildren(i.input,a,i),d=s.a.createAt(l,"end");o.a.insert(d,h),i.context.pop(),i.output=l;break}}},"normal")}toAttribute(t,e){this._setCallback(function(n){return(i,r,s,o)=>{let a=n.matcher.matchAll(r.input);if(a)for(let i of a){if(!s.consume(r.input,n.consume||i.match))continue;let a;if(r.output||(r.output=o.convertChildren(r.input,s,r)),t instanceof Function){if(!(a=t(r.input)))return}else a={key:t,value:e||r.input.getAttribute(n.attributeKey)};u(r.output,a,r,o);break}}},"low")}toMarker(t){this._setCallback(function(e){return(n,i,s)=>{const o=e.matcher.matchAll(i.input);if(!o)return;let c;if("$marker"!=(c=t instanceof Function?t(i.input):new r.a("$marker",{"data-name":i.input.getAttribute("data-name")})).name||"string"!=typeof c.getAttribute("data-name"))throw new a.a("build-view-converter-invalid-marker: Invalid model element to mark marker range.");for(const t of o)if(s.consume(i.input,e.consume||t.match)){i.output=c;break}}},"normal")}_setCallback(t,e){for(let n of this._from){const i=n.matcher.getElementName(),r=i?"element:"+i:"element",s=t(n),o=null===n.priority?e:n.priority;for(let t of this._dispatchers)t.on(r,s,{priority:o})}}}function u(t,e,i,r){if(n.i(c.a)(t)){for(let n of t)u(n,e,i,r);return}const s=Array.from(t.getAttributeKeys());s.push(e.key);const o={name:t.name||"$text",attributes:s,inside:i.context};r.schema.check(o)&&t.setAttribute(e.key,e.value)}},function(t,e,n){"use strict";var i=n(148),r=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class s{constructor(t){this.parent=null,this._attrs=n.i(i.a)(t)}get index(){let t;if(!this.parent)return null;if(null===(t=this.parent.getChildIndex(this)))throw new r.a("model-node-not-found-in-parent: The node's parent does not contain this node.");return t}get startOffset(){let t;if(!this.parent)return null;if(null===(t=this.parent.getChildStartOffset(this)))throw new r.a("model-node-not-found-in-parent: The node's parent does not contain this node.");return t}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}get document(){return this.root==this?null:this.root.document||null}clone(){return new s(this._attrs)}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.startOffset),e=e.parent;return t}getAncestors(t={includeNode:!1,parentFirst:!1}){const e=[];let n=t.includeNode?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}remove(){this.parent.removeChildren(this.index)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}setAttribute(t,e){this._attrs.set(t,e)}setAttributesTo(t){this._attrs=n.i(i.a)(t)}removeAttribute(t){return this._attrs.delete(t)}clearAttributes(){this._attrs.clear()}toJSON(){let t={};return this._attrs.size&&(t.attributes=[...this._attrs]),t}}e.a=s},function(t,e,n){"use strict";var i=n(1),r=n(6),s=n(2),o=n(7),a=n(0),c=n(4),l=n(148),u=n(487);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class h{constructor(t,e){this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map,t&&this.setRanges(t,e)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(let e of this._ranges){let n=!1;for(let i of t._ranges)if(e.isEqual(i)){n=!0;break}if(!n)return!1}return!0}*getRanges(){for(let t of this._ranges)yield s.a.createFromRange(t)}getFirstRange(){let t=null;for(let e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?s.a.createFromRange(t):null}getLastRange(){let t=null;for(let e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?s.a.createFromRange(t):null}getFirstPosition(){const t=this.getFirstRange();return t?i.a.createFromPosition(t.start):null}getLastPosition(){const t=this.getLastRange();return t?i.a.createFromPosition(t.end):null}addRange(t,e=!1){this._pushRange(t),this._lastRangeBackward=!!e,this.fire("change:range",{directChange:!0})}removeAllRanges(){this._ranges.length>0&&(this._removeAllRanges(),this.fire("change:range",{directChange:!0}))}setRanges(t,e=!1){const n=(t=Array.from(t)).some(t=>{if(!(t instanceof s.a))throw new a.a("model-selection-added-not-range: Trying to add an object that is not an instance of Range.");return this._ranges.every(e=>!e.isEqual(t))});if(t.length!==this._ranges.length||n){this._removeAllRanges();for(let e of t)this._pushRange(e);this._lastRangeBackward=!!e,this.fire("change:range",{directChange:!0})}}setTo(t){this.setRanges(t.getRanges(),t.isBackward)}collapse(t,e){const n=i.a.createAt(t,e),r=new s.a(n,n);this.setRanges([r])}collapseToStart(){const t=this.getFirstPosition();null!==t&&this.setRanges([new s.a(t,t)])}collapseToEnd(){const t=this.getLastPosition();null!==t&&this.setRanges([new s.a(t,t)])}setFocus(t,e){if(null===this.anchor)throw new a.a("model-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.");const n=i.a.createAt(t,e);if("same"==n.compareWith(this.focus))return;const r=this.anchor;this._ranges.length&&this._popRange(),"before"==n.compareWith(r)?this.addRange(new s.a(n,r),!0):this.addRange(new s.a(r,n))}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}clearAttributes(){if(this._attrs.size>0){const t=Array.from(this._attrs.keys());this._attrs.clear(),this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,e){this.getAttribute(t)!==e&&(this._attrs.set(t,e),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttributesTo(t){if(t=n.i(l.a)(t),!n.i(u.a)(t,this._attrs)){const e=new Set(Array.from(t.keys()).concat(Array.from(this._attrs.keys())));for(let[n,i]of t)this._attrs.get(n)===i&&e.delete(n);this._attrs=t,this.fire("change:attribute",{attributeKeys:Array.from(e),directChange:!0})}}getSelectedElement(){if(1!==this.rangeCount)return null;const t=this.getFirstRange(),e=t.start.nodeAfter,n=t.end.nodeBefore;return e instanceof r.a&&e==n?e:null}*getSelectedBlocks(){const t=new WeakSet;for(const e of this.getRanges()){const n=f(e.start,t);n&&(yield n);for(const n of e.getWalker())"elementEnd"==n.type&&d(n.item,t)&&(yield n.item);const i=f(e.end,t);i&&(yield i)}}static createFromSelection(t){const e=new this;return e.setTo(t),e}_pushRange(t){if(!(t instanceof s.a))throw new a.a("model-selection-added-not-range: Trying to add an object that is not an instance of Range.");this._checkRange(t),this._ranges.push(s.a.createFromRange(t))}_checkRange(t){for(let e=0;e<this._ranges.length;e++)if(t.isIntersecting(this._ranges[e]))throw new a.a("model-selection-range-intersects: Trying to add a range that intersects with another range from selection.",{addedRange:t,intersectingRange:this._ranges[e]})}_popRange(){this._ranges.pop()}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}}function d(t,e){return!e.has(t)&&(e.add(t),t.document.schema.itemExtends(t.name,"$block")&&t.parent)}function f(t,e){const n=t.parent.getAncestors({parentFirst:!0,includeNode:!0}),i=n.find(t=>d(t,e));return n.forEach(t=>e.add(t)),i}e.a=h,n.i(c.a)(h,o.a)},function(t,e,n){"use strict";n.d(e,"i",function(){return s}),e.c=o,e.f=function(t){return t.data.length==r&&o(t)},e.g=function(t){return o(t)?t.data.slice(r):t.data},e.e=function(t,e){let n=a.get(e);n||(n=e(window.document),a.set(e,n));return t.isEqualNode(n)},e.h=function(t){t.on("keydown",c)};var i=n(22);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.b=(t=>{const e=t.createElement("br");return e.dataset.ckeFiller=!0,e});e.a=(t=>t.createTextNode("Â "));const r=7;e.d=r;let s="";for(let t=0;t<r;t++)s+="â€‹";function o(t){return t instanceof Text&&t.data.substr(0,r)===s}const a=new WeakMap;function c(t,e){if(e.keyCode==i.a.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(1==t.rangeCount&&t.getRangeAt(0).collapsed){const e=t.getRangeAt(0).startContainer,n=t.getRangeAt(0).startOffset;o(e)&&n<=r&&t.collapse(e,0)}}}},function(t,e,n){"use strict";var i=n(47),r=n(113);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this.useCapture=!1}observe(t){("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach(e=>{this.listenTo(t,e,(t,e)=>{this.isEnabled&&this.onDomEvent(e)},{useCapture:this.useCapture})})}fire(t,e,n){this.isEnabled&&this.document.fire(t,new r.a(this.document,e,n))}}},function(t,e,n){"use strict";var i=n(0),r=n(33),s=n(28),o=n(4),a=n(7),c=n(25);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class l{constructor(t,e){this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t&&this.setRanges(t,e)}setFake(t=!0,e={}){this._isFake=t,this._fakeSelectionLabel=t&&e.label||"",this.fire("change")}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1],e=this._lastRangeBackward?t.end:t.start;return s.a.createFromPosition(e)}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1],e=this._lastRangeBackward?t.start:t.end;return s.a.createFromPosition(e)}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}addRange(t,e){if(!(t instanceof r.a))throw new i.a("view-selection-invalid-range: Invalid Range.");this._pushRange(t),this._lastRangeBackward=!!e,this.fire("change")}*getRanges(){for(let t of this._ranges)yield r.a.createFromRange(t)}getFirstRange(){let t=null;for(let e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?r.a.createFromRange(t):null}getLastRange(){let t=null;for(let e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?r.a.createFromRange(t):null}getFirstPosition(){const t=this.getFirstRange();return t?s.a.createFromPosition(t.start):null}getLastPosition(){const t=this.getLastRange();return t?s.a.createFromPosition(t.end):null}isEqual(t){if(this.isFake!=t.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel)return!1;if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(let e of this._ranges){let n=!1;for(let i of t._ranges)if(e.isEqual(i)){n=!0;break}if(!n)return!1}return!0}removeAllRanges(){this._ranges.length&&(this._ranges=[],this.fire("change"))}setRanges(t,e){this._ranges=[];for(let e of t){if(!(e instanceof r.a))throw new i.a("view-selection-invalid-range: Invalid Range.");this._pushRange(e)}this._lastRangeBackward=!!e,this.fire("change")}setTo(t){this._isFake=t._isFake,this._fakeSelectionLabel=t._fakeSelectionLabel,this.setRanges(t.getRanges(),t.isBackward)}collapse(t,e){const n=s.a.createAt(t,e),i=new r.a(n,n);this.setRanges([i])}collapseToStart(){const t=this.getFirstPosition();null!==t&&this.setRanges([new r.a(t,t)])}collapseToEnd(){const t=this.getLastPosition();null!==t&&this.setRanges([new r.a(t,t)])}setFocus(t,e){if(null===this.anchor)throw new i.a("view-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.");const n=s.a.createAt(t,e);if("same"==n.compareWith(this.focus))return;const o=this.anchor;this._ranges.pop(),"before"==n.compareWith(o)?this.addRange(new r.a(n,o),!0):this.addRange(new r.a(o,n))}getSelectedElement(){if(1!==this.rangeCount)return null;const t=this.getFirstRange(),e=t.start.nodeAfter,n=t.end.nodeBefore;return e instanceof c.a&&e==n?e:null}static createFromSelection(t){const e=new l;return e.setTo(t),e}_pushRange(t){for(let e of this._ranges)if(t.isIntersecting(e))throw new i.a("view-selection-range-intersects: Trying to add a range that intersects with another range from selection.",{addedRange:t,intersectingRange:e});this._ranges.push(r.a.createFromRange(t))}}e.a=l,n.i(o.a)(l,a.a)},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++)if(t[i]!=e[i])return i;return t.length==e.length?"same":t.length<e.length?"prefix":"extension"}},function(t,e,n){"use strict";
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a={window:window,document:document}},function(t,e,n){"use strict";var i=n(76),r=n(31),s=n(0),o=n(4);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class a{constructor(){this.set("isFocused",!1),this.focusedElement=null,this._elements=new Set,this._nextEventLoopTimeout=null}add(t){if(this._elements.has(t))throw new s.a("focusTracker-add-element-already-exist");this.listenTo(t,"focus",()=>this._focus(t),{useCapture:!0}),this.listenTo(t,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(t)}remove(t){t===this.focusedElement&&this._blur(t),this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t))}_focus(t){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=t,this.isFocused=!0}_blur(){this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}e.a=a,n.i(o.a)(a,i.a),n.i(o.a)(a,r.a)},function(t,e,n){"use strict";var i=n(76),r=n(22);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class{constructor(){this._listener=Object.create(i.a),this._keystrokes=new Map}listenTo(t){this._listener.listenTo(t,"keydown",(t,e)=>{this.press(e)})}set(t,e){const i=n.i(r.c)(t),s=this._keystrokes.get(i);s?s.push(e):this._keystrokes.set(i,[e])}press(t){const e=n.i(r.d)(t),i=this._keystrokes.get(e);if(!i)return!1;for(let e of i)e(t,()=>{t.preventDefault(),t.stopPropagation()});return!0}destroy(){this._keystrokes=new Map,this._listener.stopListening()}}},function(t,e,n){"use strict";var i=n(52),r=Object.prototype.hasOwnProperty;e.a=function(t,e,s){var o=t[e];r.call(t,e)&&n.i(i.a)(o,s)&&(void 0!==s||e in t)||(t[e]=s)}},function(t,e,n){"use strict";var i=n(79),r=n(121),s=n(122),o=n(26),a=n(130),c=n(132),l=200;e.a=function(t,e,u,h){var d=-1,f=r.a,p=!0,g=t.length,m=[],b=e.length;if(!g)return m;u&&(e=n.i(o.a)(e,n.i(a.a)(u))),h?(f=s.a,p=!1):e.length>=l&&(f=c.a,p=!1,e=new i.a(e));t:for(;++d<g;){var w=t[d],v=u?u(w):w;if(w=h||0!==w?w:0,p&&v==v){for(var y=b;y--;)if(e[y]===v)continue t;m.push(w)}else f(e,v,h)||m.push(w)}return m}},function(t,e,n){"use strict";var i=n(189),r=n(407),s=n(197),o=n(93),a=n(35),c=n(89);e.a=function(t){var e=n.i(c.a)(t);if(!e&&!n.i(o.a)(t))return n.i(r.a)(t);var l=n.i(s.a)(t),u=!!l,h=l||[],d=h.length;for(var f in t)!n.i(i.a)(t,f)||u&&("length"==f||n.i(a.a)(f,d))||e&&"constructor"==f||h.push(f);return h}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(){let t="e";for(let e=0;e<8;e++)t+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return t}},function(t,e,n){"use strict";var i=n(55),r=n(0);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class{constructor(t){this._nodes=[],t&&this.insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((t,e)=>t+e.offsetSize,0)}getNode(t){return this._nodes[t]||null}getNodeIndex(t){const e=this._nodes.indexOf(t);return-1==e?null:e}getNodeStartOffset(t){const e=this.getNodeIndex(t);return null===e?null:this._nodes.slice(0,e).reduce((t,e)=>t+e.offsetSize,0)}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new r.a("model-nodelist-index-out-of-bounds: Given index cannot be found in the node list.");return this.getNodeStartOffset(e)}offsetToIndex(t){let e=0;for(let n of this._nodes){if(t>=e&&t<e+n.offsetSize)return this.getNodeIndex(n);e+=n.offsetSize}if(e!=t)throw new r.a("model-nodelist-offset-out-of-bounds: Given offset cannot be found in the node list.");return this.length}insertNodes(t,e){for(let t of e)if(!(t instanceof i.a))throw new r.a("model-nodelist-insertNodes-not-node: Trying to insert an object which is not a Node instance.");this._nodes.splice(t,0,...e)}removeNodes(t,e=1){return this._nodes.splice(t,e)}toJSON(){return this._nodes.map(t=>t.toJSON())}}},function(t,e,n){"use strict";var i=n(32),r=n(2),s=n(0),o=n(13),a=n(474);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class c extends i.a{constructor(t,e,n,i,s){super(s),this.range=r.a.createFromRange(t),this.key=e,this.oldValue=void 0===n?null:n,this.newValue=void 0===i?null:i}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}clone(){return new c(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new c(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_execute(){for(let t of this.range.getItems()){if(null!==this.oldValue&&!n.i(a.a)(t.getAttribute(this.key),this.oldValue))throw new s.a("attribute-operation-wrong-old-value: Changed node has different attribute value than operation's old attribute value.",{item:t,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&t.hasAttribute(this.key))throw new s.a("attribute-operation-attribute-exists: The attribute with given key already exists.",{node:t,key:this.key});if(n.i(a.a)(this.oldValue,this.newValue))return}return o.a.setAttribute(this.range,this.key,this.newValue),{range:this.range,key:this.key,oldValue:this.oldValue,newValue:this.newValue}}static get className(){return"engine.model.operation.AttributeOperation"}static fromJSON(t,e){return new c(r.a.fromJSON(t.range,e),t.key,t.oldValue,t.newValue,t.baseVersion)}}e.a=c},function(t,e,n){"use strict";var i=n(32);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */class r extends i.a{clone(){return new r(this.baseVersion)}getReversed(){return new r(this.baseVersion+1)}_execute(){}static get className(){return"engine.model.operation.NoOperation"}}e.a=r},function(t,e,n){"use strict";var i=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class{constructor(t,e,n){if(this.textNode=t,e<0||e>t.offsetSize)throw new i.a("model-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.");if(n<0||e+n>t.offsetSize)throw new i.a("model-textproxy-wrong-length: Given length value is incorrect.");this.data=t.data.substring(e,e+n),this.offsetInText=e}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(t){return"textProxy"==t}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={includeNode:!1,parentFirst:!1}){const e=[];let n=t.includeNode?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}},function(t,e,n){"use strict";var i=n(0),r=n(7),s=n(4);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class o{constructor(){this.parent=null}get index(){let t;if(!this.parent)return null;if(-1==(t=this.parent.getChildIndex(this)))throw new i.a("view-node-not-found-in-parent: The node's parent does not contain this node.");return t}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}get document(){return this.parent instanceof o?this.parent.document:null}getAncestors(t={includeNode:!1,parentFirst:!1}){const e=[];let n=t.includeNode?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}remove(){this.parent.removeChildren(this.index)}_fireChange(t,e){this.fire("change:"+t,e),this.parent&&this.parent._fireChange(t,e)}}e.a=o,n.i(s.a)(o,r.a)},function(t,e,n){"use strict";e.c=function(t,e){return t.setCustomProperty(s,!0),n.i(i.a)(t,{label:function(){const n=t.getChild(0).getAttribute("alt");return n?`${n} ${e}`:e}})},e.a=function(t){return!!t.getCustomProperty(s)&&n.i(i.b)(t)},e.b=function(t){return t instanceof r.a&&"image"==t.name};var i=n(266),r=n(6);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const s=Symbol("isImage")},function(t,e,n){"use strict";var i=n(344),r=n(3),s=n(6),o=n(1),a=n(2),c=n(25),l=n(33),u=n(13),h=n(45),d=n(54),f=n(12);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class p extends r.a{static get pluginName(){return"paragraph/paragraph"}init(){const t=this.editor,e=t.document,r=t.data,o=t.editing;e.schema.registerItem("paragraph","$block"),n.i(h.a)().for(r.modelToView,o.modelToView).fromElement("paragraph").toElement("p"),n.i(d.a)().for(r.viewToModel).fromElement("p").toElement("paragraph"),r.viewToModel.on("text",(t,n,i,r)=>{!function(t,e,n,i,r){if(!i.test(n.input))return;if(!t.schema.check({name:"paragraph",inside:n.context}))return;const o=new s.a("paragraph");g.add(o),n.context.push(o);const a=r.convertItem(n.input,i,n);a&&(n.output=o,o.appendChildren(a));n.context.pop()}(e,0,n,i,r)},{priority:"lowest"}),r.viewToModel.on("element",m,{priority:"lowest"}),r.viewToModel.on("documentFragment",m,{priority:"lowest"}),r.viewToModel.on("element",(t,n,i,r)=>{!function(t,e,n,i,r){if(!p.paragraphLikeElements.has(n.input.name))return;if(!i.test(n.input,{name:!0}))return;if(function(t){const e=l.a.createIn(t);for(const t of e)if(t.item instanceof c.a&&p.paragraphLikeElements.has(t.item.name))return!0;return!1}(n.input))return;if(!t.schema.check({name:"paragraph",inside:n.context}))return;i.consume(n.input,{name:!0});const o=new s.a("paragraph");n.context.push(o);const a=r.convertChildren(n.input,i,n);o.appendChildren(u.a.normalizeNodes(a)),n.context.pop(),n.output=o}(e,0,n,i,r)},{priority:"low"}),t.commands.set("paragraph",new i.a(t))}}e.a=p,p.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td"]);const g=new WeakSet;function m(t,e){if(!e.output)return;let i;for(i=n.i(f.a)(e.output)?e.output[0]:e.output.getChild(0);i&&i.nextSibling;){const t=i.nextSibling;g.has(i)&&g.has(t)?(u.a.insert(o.a.createAt(i,"end"),Array.from(t.getChildren())),u.a.remove(a.a.createOn(t))):i=i.nextSibling}}},function(t,e,n){"use strict";var i=n(7),r=n(0),s=n(67),o=n(4);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class a{constructor(t){this._items=[],this._itemMap=new Map,this._idProperty=t&&t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap}get length(){return this._items.length}add(t,e){let i;const o=this._idProperty;if(o in t){if("string"!=typeof(i=t[o]))throw new r.a("collection-add-invalid-id");if(this.get(i))throw new r.a("collection-add-item-already-exists")}else t[o]=i=n.i(s.a)();if(void 0===e)e=this._items.length;else if(e>this._items.length||e<0)throw new r.a("collection-add-item-invalid-index");return this._items.splice(e,0,t),this._itemMap.set(i,t),this.fire("add",t,e),this}get(t){let e;if("string"==typeof t)e=this._itemMap.get(t);else{if("number"!=typeof t)throw new r.a("collection-get-invalid-arg: Index or id must be given.");e=this._items[t]}return e||null}getIndex(t){let e;return e="string"==typeof t?this._itemMap.get(t):t,this._items.indexOf(e)}remove(t){let e,n,i,s=!1;const o=this._idProperty;if("string"==typeof t?(n=t,s=!(i=this._itemMap.get(n)),i&&(e=this._items.indexOf(i))):"number"==typeof t?(e=t,s=!(i=this._items[e]),i&&(n=i[o])):(n=(i=t)[o],s=-1==(e=this._items.indexOf(i))||!this._itemMap.get(n)),s)throw new r.a("collection-remove-404: Item not found.");this._items.splice(e,1),this._itemMap.delete(n);const a=this._bindToInternalToExternalMap.get(i);return this._bindToInternalToExternalMap.delete(i),this._bindToExternalToInternalMap.delete(a),this.fire("remove",i),i}map(t,e){return this._items.map(t,e)}find(t,e){return this._items.find(t,e)}filter(t,e){return this._items.filter(t,e)}clear(){for(this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);this.length;)this.remove(0)}bindTo(t){if(this._bindToCollection)throw new r.a("collection-bind-to-rebind: The collection cannot be bound more than once.");return this._bindToCollection=t,{as:t=>{this._setUpBindToBinding(e=>new t(e))},using:t=>{"function"==typeof t?this._setUpBindToBinding(e=>t(e)):this._setUpBindToBinding(e=>e[t])}}}_setUpBindToBinding(t){const e=this._bindToCollection,n=(n,i,r)=>{const s=e._bindToCollection==this,o=e._bindToInternalToExternalMap.get(i);if(s&&o)this._bindToExternalToInternalMap.set(i,o),this._bindToInternalToExternalMap.set(o,i);else{const e=t(i);this._bindToExternalToInternalMap.set(i,e),this._bindToInternalToExternalMap.set(e,i),this.add(e,r)}};for(let t of e)n(0,t);this.listenTo(e,"add",n),this.listenTo(e,"remove",(t,e)=>{const n=this._bindToExternalToInternalMap.get(e);n&&this.remove(n)})}[Symbol.iterator](){return this._items[Symbol.iterator]()}}e.a=a,n.i(o.a)(a,i.a)},function(t,e,n){"use strict";var i=n(7),r=n(67),s=n(53),o=n(225);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const a=n.i(s.a)({},i.a,{listenTo(...t){const e=t[0];u(e)&&(t[0]=this._getProxyEmitter(e)||new c(e)),i.a.listenTo.apply(this,t)},stopListening(...t){const e=t[0];if(u(e)){let n=this._getProxyEmitter(e);if(!n)return;t[0]=n}i.a.stopListening.apply(this,t)},_getProxyEmitter(t){return n.i(i.b)(this,l(t))}});e.a=a;class c{constructor(t){n.i(i.c)(this,l(t)),this._domNode=t}}function l(t){return t["data-ck-expando"]||(t["data-ck-expando"]=n.i(r.a)())}function u(t){return t&&n.i(o.a)(t.addEventListener)}n.i(s.a)(c.prototype,i.a,{on(t,e,n={}){if(i.a.on.apply(this,arguments),this._domListeners&&this._domListeners[t])return;const r=this._createDomListener(t,!!n.useCapture);this._domNode.addEventListener(t,r,!!n.useCapture),this._domListeners||(this._domListeners={}),this._domListeners[t]=r},off(t){let e;i.a.off.apply(this,arguments),!this._domListeners[t]||(e=this._events[t])&&e.callbacks.length||this._domListeners[t].removeListener()},_createDomListener(t,e){const n=e=>{this.fire(t,e)};return n.removeListener=(()=>{this._domNode.removeEventListener(t,n,e),delete this._domListeners[t]}),n}})},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){const e=t.next();if(e.done)return null;return e.value}},function(t,e,n){"use strict";var i=n(446),r=n(447),s=n(448),o=n(449),a=n(450);function c(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}c.prototype.clear=i.a,c.prototype.delete=r.a,c.prototype.get=s.a,c.prototype.has=o.a,c.prototype.set=a.a,e.a=c},function(t,e,n){"use strict";var i=n(118),r=n(457),s=n(458);function o(t){var e=-1,n=t?t.length:0;for(this.__data__=new i.a;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=r.a,o.prototype.has=s.a,e.a=o},function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,i=t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}},function(t,e,n){"use strict";var i=n(52);e.a=function(t,e){for(var r=t.length;r--;)if(n.i(i.a)(t[r][0],e))return r;return-1}},function(t,e,n){"use strict";var i=n(129),r=n(219),s=n(44),o=2147483647;e.a=function(t,e,a){var c=0,l=t?t.length:c;if("number"==typeof e&&e==e&&l<=o){for(;c<l;){var u=c+l>>>1,h=t[u];null!==h&&!n.i(s.a)(h)&&(a?h<=e:h<e)?c=u+1:l=u}return l}return n.i(i.a)(t,e,r.a,a)}},function(t,e,n){"use strict";var i=n(34);e.a=function(t,e,r,s){for(var o=t.length,a=s?o:-1;(s?a--:++a<o)&&e(t[a],a,t););return r?n.i(i.a)(t,s?0:a,s?a+1:o):n.i(i.a)(t,s?a+1:0,s?o:a)}},function(t,e,n){"use strict";var i=n(12),r=n(465);e.a=function(t){return n.i(i.a)(t)?t:n.i(r.a)(t)}},function(t,e,n){"use strict";var i=n(444);e.a=function(t,e){var r=t.__data__;return n.i(i.a)(e)?r["string"==typeof e?"string":"hash"]:r.map}},function(t,e,n){"use strict";e.a=function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}},function(t,e,n){"use strict";var i=n(52),r=n(93),s=n(35),o=n(15);e.a=function(t,e,a){if(!n.i(o.a)(a))return!1;var c=typeof e;return!!("number"==c?n.i(r.a)(a)&&n.i(s.a)(e,a.length):"string"==c&&e in a)&&n.i(i.a)(a[e],t)}},function(t,e,n){"use strict";var i=Object.prototype;e.a=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||i)}},function(t,e,n){"use strict";var i=n(49),r=n.i(i.a)(Object,"create");e.a=r},function(t,e,n){"use strict";e.a=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){"use strict";var i=n(187);e.a=function(t){return n.i(i.a)(t,!1,!0)}},function(t,e,n){"use strict";var i=n(432),r=n(144),s=n(94);e.a=function(t){return null!=t&&n.i(s.a)(n.i(i.a)(t))&&!n.i(r.a)(t)}},function(t,e,n){"use strict";var i=9007199254740991;e.a=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}},function(t,e,n){"use strict";var i=n(136),r=n(87),s=n(43),o="[object Object]",a=Object.prototype,c=Function.prototype.toString,l=a.hasOwnProperty,u=c.call(Object),h=a.toString;e.a=function(t){if(!n.i(s.a)(t)||h.call(t)!=o||n.i(r.a)(t))return!1;var e=n.i(i.a)(t);if(null===e)return!0;var a=l.call(e,"constructor")&&e.constructor;return"function"==typeof a&&a instanceof a&&c.call(a)==u}},function(t,e,n){"use strict";var i=n(80),r=n(26),s=n(127),o=n(192),a=n(14),c=Math.max;e.a=function(t){if(!t||!t.length)return[];var e=0;return t=n.i(i.a)(t,function(t){if(n.i(a.a)(t))return e=c(t.length,e),!0}),n.i(o.a)(e,function(e){return n.i(r.a)(t,n.i(s.a)(e))})}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){return(e,n,r,s)=>{const o=t instanceof i.a?t.clone(!0):t(n,r,s);if(!o)return;if(!r.consume(n.item,"insert"))return;const c=s.mapper.toViewPosition(n.range.start);s.mapper.bindElements(n.item,o),a.a.insert(c,o)}},e.j=function(){return(t,e,n,i)=>{if(!n.consume(e.item,"insert"))return;const s=i.mapper.toViewPosition(e.range.start),o=new r.a(e.item.data);a.a.insert(s,o)}},e.f=function(t){return(e,n,r,s)=>{let o,c;if(t instanceof i.a?(o=t.clone(!0),c=t.clone(!0)):(n.isOpening=!0,o=t(n,r,s),n.isOpening=!1,c=t(n,r,s)),!o||!c)return;if(!r.consume(n.range,"addMarker"))return;const l=s.mapper;a.a.insert(l.toViewPosition(n.range.start),o),n.range.isCollapsed||a.a.insert(l.toViewPosition(n.range.end),c)}},e.h=function(t){return t=t||((t,e)=>({value:t,key:e})),(e,n,i,r)=>{if(!i.consume(n.item,c(e.name)))return;const{key:s,value:o}=t(n.attributeNewValue,n.attributeKey,n,i,r);r.mapper.toViewElement(n.item).setAttribute(s,o)}},e.i=function(t){return t=t||((t,e)=>({key:e})),(e,n,i,r)=>{if(!i.consume(n.item,c(e.name)))return;const{key:s}=t(n.attributeOldValue,n.attributeKey,n,i,r);r.mapper.toViewElement(n.item).removeAttribute(s)}},e.b=function(t){return(e,n,r,s)=>{const o=t instanceof i.a?t.clone(!0):t(n.attributeNewValue,n,r,s);if(!o)return;if(!r.consume(n.item,c(e.name)))return;let l=s.mapper.toViewRange(n.range);if(null!==n.attributeOldValue&&!(t instanceof i.a)){const e=t(n.attributeOldValue,n,r,s);l=a.a.unwrap(l,e)}a.a.wrap(l,o)}},e.c=function(t){return(e,n,r,s)=>{const o=t instanceof i.a?t.clone(!0):t(n.attributeOldValue,n,r,s);if(!o)return;if(!r.consume(n.item,c(e.name)))return;const l=s.mapper.toViewRange(n.range);a.a.unwrap(l,o)}},e.d=function(t){return(e,n,r,s)=>{const o=t instanceof i.a?t.clone(!0):t(n,r,s);if(!o)return;if(!r.consume(n.range,"addMarker"))return;const c=s.mapper.toViewRange(n.range),l=a.a.breakViewRangePerContainer(c);for(let t of l)a.a.wrap(t,o)}},e.e=function(t){return(e,n,r,s)=>{const o=t instanceof i.a?t.clone(!0):t(n,r,s);if(!o)return;if(!r.consume(n.range,"removeMarker"))return;const c=s.mapper.toViewRange(n.range),l=a.a.breakViewRangePerContainer(c);for(let t of l)a.a.unwrap(t,o)}},e.k=function(){return(t,e,n,i)=>{if(!n.consume(e.item,"remove"))return;const r=i.mapper.toViewPosition(e.sourcePosition);let c;if(e.item.is("element"))c=s.a.createOn(r.nodeAfter);else{const t=function(t,e){const n=new o.a({startPosition:t,singleCharacters:!0});let i=0;for(let t of n)if("text"==t.type&&++i==e)return n.position}(r,e.item.offsetSize);c=new s.a(r,t)}a.a.remove(c.getTrimmed()),"$graveyard"==e.item.root.rootName&&i.mapper.unbindModelElement(e.item)}},e.g=function(t){return(e,n,r,s)=>{let o,c;if(t instanceof i.a?(o=t.clone(!0),c=t.clone(!0)):(n.isOpening=!0,o=t(n,r,s),n.isOpening=!1,c=t(n,r,s)),!o||!c)return;if(!r.consume(n.range,"removeMarker"))return;const l=s.mapper.toViewRange(n.range);a.a.clear(l.getEnlarged(),c),o.isSimilar(c)||a.a.clear(l.getEnlarged(),o)}};var i=n(25),r=n(29),s=n(33),o=n(48),a=n(114);function c(t){const e=t.split(":");return e[0]+":"+e[1]}},function(t,e,n){"use strict";var i=n(21),r=n(101),s=n(18),o=n(38),a=n(17),c=n(13),l=n(37),u=n(2),h=n(1);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class d extends i.a{get type(){return"insert"}get position(){return this._insertOperation?this._insertOperation.position:null}get nodes(){return this._insertOperation?this._insertOperation.nodes:null}get _insertOperation(){return this.operations[0]||null}get _reverseDeltaClass(){return r.a}static get className(){return"engine.model.delta.InsertDelta"}static get _priority(){return 20}}e.a=d,n.i(a.b)("insert",function(t,e){const i=n.i(c.b)(e);if(0===i.length)return this;const r=new d,s=new o.a(t,i,this.document.version);if(this.addDelta(r),r.addOperation(s),this.document.applyOperation(s),e instanceof l.a)for(const[n,i]of e.markers){const e=h.a.createAt(i.root),r=new u.a(i.start._getCombined(e,t),i.end._getCombined(e,t));this.setMarker(n,r)}return this}),s.a.register(d)},function(t,e,n){"use strict";var i=n(21),r=n(18),s=n(102),o=n(17),a=n(1),c=n(6),l=n(39),u=n(27),h=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class d extends i.a{get type(){return"merge"}get position(){return this._removeOperation?this._removeOperation.sourcePosition:null}getReversed(){let t=super.getReversed();return t.operations.length>0&&(t.operations[1].isSticky=!1),t}get _removeOperation(){return this.operations[1]||null}get _reverseDeltaClass(){return s.a}static get className(){return"engine.model.delta.MergeDelta"}}e.a=d,n.i(o.b)("merge",function(t){const e=new d;this.addDelta(e);const n=t.nodeBefore,i=t.nodeAfter;if(!(n instanceof c.a))throw new h.a("batch-merge-no-element-before: Node before merge position must be an element.");if(!(i instanceof c.a))throw new h.a("batch-merge-no-element-after: Node after merge position must be an element.");const r=a.a.createFromParentAndOffset(i,0),s=a.a.createFromParentAndOffset(n,n.maxOffset),o=new u.a(r,i.maxOffset,s,this.document.version);o.isSticky=!0,e.addOperation(o),this.document.applyOperation(o);const f=new l.a(t,1,this.document.version);return e.addOperation(f),this.document.applyOperation(f),this}),r.a.register(d)},function(t,e,n){"use strict";var i=n(21),r=n(18),s=n(17),o=n(27),a=n(1),c=n(2),l=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class u extends i.a{get type(){return"move"}get howMany(){return this._moveOperation?this._moveOperation.howMany:null}get sourcePosition(){return this._moveOperation?this._moveOperation.sourcePosition:null}get targetPosition(){return this._moveOperation?this._moveOperation.targetPosition:null}get _moveOperation(){return this.operations[0]||null}get _reverseDeltaClass(){return u}static get className(){return"engine.model.delta.MoveDelta"}static get _priority(){return 20}}function h(t,e,n,i,r){const s=new o.a(n,i,r,t.document.version);e.addOperation(s),t.document.applyOperation(s)}e.a=u,n.i(s.b)("move",function(t,e){const n=new u;if(this.addDelta(n),t instanceof c.a){if(!t.isFlat)throw new l.a("batch-move-range-not-flat: Range to move is not flat.");h(this,n,t.start,t.end.offset-t.start.offset,e)}else h(this,n,a.a.createBefore(t),1,e);return this}),r.a.register(u)},function(t,e,n){"use strict";var i=n(100),r=n(17),s=n(18),o=n(39),a=n(1),c=n(2);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class l extends i.a{static get className(){return"engine.model.delta.RemoveDelta"}}function u(t,e,n,i){const r=new o.a(n,i,t.document.version);e.addOperation(r),t.document.applyOperation(r)}e.a=l,n.i(r.b)("remove",function(t){const e=new l;if(this.addDelta(e),t instanceof c.a){let n=t.getMinimalFlatRanges().reverse();for(let t of n)u(this,e,t.start,t.end.offset-t.start.offset)}else u(this,e,a.a.createBefore(t),1);return this}),s.a.register(l)},function(t,e,n){"use strict";var i=n(21),r=n(18),s=n(17),o=n(1),a=n(6),c=n(38),l=n(27),u=n(0),h=n(99);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class d extends i.a{get type(){return"split"}get position(){return this._moveOperation?this._moveOperation.sourcePosition:null}getReversed(){let t=super.getReversed();return t.operations.length>0&&(t.operations[0].isSticky=!0),t}get _cloneOperation(){return this.operations[0]||null}get _moveOperation(){return this.operations[1]||null}get _reverseDeltaClass(){return h.a}static get className(){return"engine.model.delta.SplitDelta"}static get _priority(){return 5}}e.a=d,n.i(s.b)("split",function(t){const e=new d;this.addDelta(e);const n=t.parent;if(!n.parent)throw new u.a("batch-split-root: Root element can not be split.");const i=new a.a(n.name,n.getAttributes()),r=new c.a(o.a.createAfter(n),i,this.document.version);e.addOperation(r),this.document.applyOperation(r);const s=new l.a(t,n.maxOffset-t.offset,o.a.createFromParentAndOffset(i,0),this.document.version);return s.isSticky=!0,e.addOperation(s),this.document.applyOperation(s),this}),r.a.register(d)},function(t,e,n){"use strict";e.c=l,e.b=function(t,e,n){let i=a.get(t);i||(i=new Map,a.set(t,i));i.set(e,n)},e.a=function(t,e,n){let i=Array.from(t),r=Array.from(e);for(let t=0;t<i.length;t++){let e=[i[t]];for(let t=0;t<r.length;t++){let i=[r[t]];for(let t=0;t<e.length;t++)for(let r=0;r<i.length;r++){let s=c(e[t],i[r],n),o=c(i[r],e[t],!n);e.splice(t,1,...s),t+=s.length-1,i.splice(r,1,...o),r+=o.length-1}r.splice(t,1,...i),t+=i.length-1}i.splice(t,1,...e),t+=e.length-1}const s=u(i)-u(t),o=u(r)-u(e);o<s?h(r,s-o):s<o&&h(i,o-s);return{deltasA:i,deltasB:r}};var i=n(21),r=n(307),s=n(70),o=n(467);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const a=new Map;function c(t,e,n){const i=(function(t,e){let n=a.get(t.constructor);if(!n||!n.get(e.constructor)){const i=a.keys();for(let r of i)if(t instanceof r&&a.get(r).get(e.constructor)){n=a.get(r);break}}if(n)return n.get(e.constructor);return}(t,e)||l)(t,e,n);return function(t,e){for(let n of e)for(let e of n.operations)e.baseVersion=++t;return e}(o.a.last(e.operations).baseVersion,i)}function l(t,e,i){i=function(t,e,n){return t._priority>e._priority||!(t._priority<e._priority)&&n}(t.constructor,e.constructor,i);const s=new t.constructor;let o=e.operations,a=[];for(let e of t.operations){const t=[e];for(let e of o)for(let s=0;s<t.length;s++){const o=t[s];Array.prototype.push.apply(a,n.i(r.a)(e,o,!i));const c=n.i(r.a)(o,e,i);Array.prototype.splice.apply(t,[s,1].concat(c)),s+=c.length-1}o=a,a=[];for(let e of t)s.addOperation(e)}return[s]}function u(t){return t.reduce((t,e)=>t+e.operations.length,0)}function h(t,e){const n=t[t.length-1];let r=n.operations.length+n.baseVersion,o=new i.a;for(let t=0;t<e;t++)o.addOperation(new s.a(r++));t.push(o)}},function(t,e,n){"use strict";var i=n(21),r=n(18),s=n(105),o=n(17),a=n(1),c=n(39),l=n(27),u=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class h extends i.a{get type(){return"unwrap"}get position(){return this._moveOperation?this._moveOperation.targetPosition:null}get _moveOperation(){return this.operations[0]||null}get _reverseDeltaClass(){return s.a}static get className(){return"engine.model.delta.UnwrapDelta"}static get _priority(){return 10}}e.a=h,n.i(o.b)("unwrap",function(t){if(null===t.parent)throw new u.a("batch-unwrap-element-no-parent: Trying to unwrap an element which has no parent.");const e=new h;this.addDelta(e);let n=a.a.createFromParentAndOffset(t,0);const i=new l.a(n,t.maxOffset,a.a.createBefore(t),this.document.version);i.isSticky=!0,e.addOperation(i),this.document.applyOperation(i);const r=new c.a(a.a.createBefore(t),1,this.document.version);return e.addOperation(r),this.document.applyOperation(r),this}),r.a.register(h)},function(t,e,n){"use strict";var i=n(21),r=n(18),s=n(104),o=n(17),a=n(1),c=n(2),l=n(6),u=n(38),h=n(27),d=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class f extends i.a{get type(){return"wrap"}get range(){let t=this._moveOperation;return t?c.a.createFromPositionAndShift(t.sourcePosition,t.howMany):null}get howMany(){let t=this.range;return t?t.end.offset-t.start.offset:0}get _insertOperation(){return this.operations[0]||null}get _moveOperation(){return this.operations[1]||null}get _reverseDeltaClass(){return s.a}static get className(){return"engine.model.delta.WrapDelta"}static get _priority(){return 10}}e.a=f,n.i(o.b)("wrap",function(t,e){if(!t.isFlat)throw new d.a("batch-wrap-range-not-flat: Range to wrap is not flat.");let n=e instanceof l.a?e:new l.a(e);if(n.childCount>0)throw new d.a("batch-wrap-element-not-empty: Element to wrap with is not empty.");if(null!==n.parent)throw new d.a("batch-wrap-element-attached: Element to wrap with is already attached to tree model.");const i=new f;this.addDelta(i);let r=new u.a(t.end,n,this.document.version);i.addOperation(r),this.document.applyOperation(r);let s=a.a.createFromParentAndOffset(n,0),o=new h.a(t.start,t.end.offset-t.start.offset,s,this.document.version);return i.addOperation(o),this.document.applyOperation(o),this}),r.a.register(f)},function(t,e,n){"use strict";var i=n(32),r=n(2);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class s extends i.a{constructor(t,e,n,i,s){super(s),this.name=t,this.oldRange=e?r.a.createFromRange(e):null,this.newRange=n?r.a.createFromRange(n):null,this._markers=i}get type(){return"marker"}clone(){return new s(this.name,this.oldRange,this.newRange,this._markers,this.baseVersion)}getReversed(){return new s(this.name,this.newRange,this.oldRange,this._markers,this.baseVersion+1)}_execute(){const t=this.newRange?"set":"remove";return this._markers[t](this.name,this.newRange),{name:this.name,type:t}}toJSON(){const t=super.toJSON();return delete t._markers,t}static get className(){return"engine.model.operation.MarkerOperation"}static fromJSON(t,e){return new s(t.name,t.oldRange?r.a.fromJSON(t.oldRange,e):null,t.newRange?r.a.fromJSON(t.newRange,e):null,e.markers,t.baseVersion)}}e.a=s},function(t,e,n){"use strict";var i=n(27),r=n(39);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{get position(){return this.targetPosition}set position(t){this.targetPosition=t}get type(){return"reinsert"}getReversed(){const t=new r.a(this.targetPosition,this.howMany,this.baseVersion+1);return t.targetPosition=this.sourcePosition,t._needsHolderElement=!1,t}static get className(){return"engine.model.operation.ReinsertOperation"}}},function(t,e,n){"use strict";var i=n(32),r=n(6),s=n(0),o=n(1);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class a extends i.a{constructor(t,e,n,i){super(i),this.position=t,this.oldName=e,this.newName=n}get type(){return"rename"}clone(){return new a(o.a.createFromPosition(this.position),this.oldName,this.newName,this.baseVersion)}getReversed(){return new a(o.a.createFromPosition(this.position),this.newName,this.oldName,this.baseVersion+1)}_execute(){const t=this.position.nodeAfter;if(!(t instanceof r.a))throw new s.a("rename-operation-wrong-position: Given position is invalid or node after it is not an instance of Element.");if(t.name!==this.oldName)throw new s.a("rename-operation-wrong-name: Element to change has different name than operation's old name.");if(this.oldName!=this.newName)return t.name=this.newName,{element:t,oldName:this.oldName}}static get className(){return"engine.model.operation.RenameOperation"}static fromJSON(t,e){return new a(o.a.fromJSON(t.position,e),t.oldName,t.newName,t.baseVersion)}}e.a=a},function(t,e,n){"use strict";var i=n(32),r=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class s extends i.a{constructor(t,e,n,i,r){super(r),this.root=t,this.key=e,this.oldValue=n,this.newValue=i}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}clone(){return new s(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new s(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_execute(){if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new r.a("rootattribute-operation-wrong-old-value: Changed node has different attribute value than operation's old attribute value.",{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new r.a("rootattribute-operation-attribute-exists: The attribute with given key already exists.",{root:this.root,key:this.key});return null!==this.newValue?this.root.setAttribute(this.key,this.newValue):this.root.removeAttribute(this.key),{root:this.root,key:this.key,oldValue:this.oldValue,newValue:this.newValue}}static get className(){return"engine.model.operation.RootAttributeOperation"}static fromJSON(t,e){if(!e.hasRoot(t.root))throw new r.a("rootattribute-operation-fromjson-no-root: Cannot create RootAttributeOperation. Root with specified name does not exist.",{rootName:t});return new s(e.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}e.a=s},function(t,e,n){"use strict";var i=n(25);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */const r=10;class s extends i.a{constructor(t,e,n){super(t,e,n),this.priority=r,this.getFillerOffset=o}is(t,e=null){return e?"attributeElement"==t&&e==this.name||super.is(t,e):"attributeElement"==t||super.is(t)}clone(t){const e=super.clone(t);return e.priority=this.priority,e}isSimilar(t){return super.isSimilar(t)&&this.priority==t.priority}}function o(){if(this.childCount)return null;let t=this.parent;for(;t&&t.is("attributeElement");){if(t.childCount>1)return null;t=t.parent}return!t||t.childCount>1?null:0}e.a=s,s.DEFAULT_PRIORITY=r},function(t,e,n){"use strict";var i=n(29),r=n(4),s=n(41),o=n(7);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class a{constructor(t){this._children=[],t&&this.insertChildren(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(t){return"documentFragment"==t}appendChildren(t){return this.insertChildren(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}insertChildren(t,e){this._fireChange("children",this);let r=0;e=function(t){if("string"==typeof t)return[new i.a(t)];n.i(s.a)(t)||(t=[t]);return Array.from(t).map(t=>"string"==typeof t?new i.a(t):t)}(e);for(let n of e)n.parent=this,this._children.splice(t,0,n),t++,r++;return r}removeChildren(t,e=1){this._fireChange("children",this);for(let n=t;n<t+e;n++)this._children[n].parent=null;return this._children.splice(t,e)}_fireChange(t,e){this.fire("change:"+t,e)}}e.a=a,n.i(r.a)(a,o.a)},function(t,e,n){"use strict";var i=n(46),r=n(0),s=n(4),o=n(31);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const a=Symbol("document");class c extends i.a{constructor(t,e,n){super(t,e,n),this.set("isReadOnly",!1),this.set("isFocused",!1)}get document(){return this.getCustomProperty(a)}set document(t){if(this.getCustomProperty(a))throw new r.a("view-editableelement-document-already-set: View document is already set.");this.setCustomProperty(a,t),this.bind("isFocused").to(t,"isFocused",e=>e&&t.selection.editableElement==this),this.listenTo(t,"render",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this},{priority:"high"})}}e.a=c,n.i(s.a)(c,o.a)},function(t,e,n){"use strict";var i=n(53);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class{constructor(t,e,r){this.document=t,this.domEvent=e,this.domTarget=e.target,n.i(i.a)(this,r)}get target(){return this.document.domConverter.getCorrespondingViewElement(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}},function(t,e,n){"use strict";var i=n(28),r=n(46),s=n(110),o=n(163),a=n(167),c=n(29),l=n(33),u=n(48),h=n(0),d=n(111),f=n(41);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const p={breakAttributes:function(t){return t instanceof i.a?k(t):_(t)},breakContainer:function(t){const e=t.parent;if(!e.is("containerElement"))throw new h.a("view-writer-break-non-container-element: Trying to break an element which is not a container element.");if(!e.parent)throw new h.a("view-writer-break-root: Trying to break root element.");if(t.isAtStart)return i.a.createBefore(e);if(!t.isAtEnd){const n=e.clone(!1);m(i.a.createAfter(e),n);const r=new l.a(t,i.a.createAt(e,"end")),s=new i.a(n,0);w(r,s)}return i.a.createAfter(e)},mergeAttributes:g,mergeContainers:function(t){const e=t.nodeBefore,n=t.nodeAfter;if(!(e&&n&&e.is("containerElement")&&n.is("containerElement")))throw new h.a("view-writer-merge-containers-invalid-position: Element before and after given position cannot be merged.");const r=e.getChild(e.childCount-1),s=r instanceof c.a?i.a.createAt(r,"end"):i.a.createAt(e,"end");return w(l.a.createIn(n),i.a.createAt(e,"end")),b(l.a.createOn(n)),s},insert:m,remove:b,clear:function(t,e){O(t);const n=t.getWalker({direction:"backward",ignoreElementEnd:!0});for(const i of n){const n=i.item;let r;if(n.is("element")&&e.isSimilar(n))r=l.a.createOn(n);else if(!i.nextPosition.isAfter(t.start)&&(n.is("text")||n.is("textProxy"))){const t=n.getAncestors().find(t=>t.is("element")&&e.isSimilar(t));t&&(r=l.a.createIn(t))}r&&(r.end.isAfter(t.end)&&(r.end=t.end),r.start.isBefore(t.start)&&(r.start=t.start),b(r))}},move:w,wrap:v,wrapPosition:function(t,e){if(!(e instanceof s.a))throw new h.a("view-writer-wrap-invalid-attribute");if(e.isSimilar(t.parent))return C(i.a.createFromPosition(t));t.parent.is("text")&&(t=A(t));const n=new s.a;n.priority=Number.POSITIVE_INFINITY,n.isSimilar=(()=>!1),t.parent.insertChildren(t.offset,n),v(new l.a(t,t.getShiftedBy(1)),e);const r=new i.a(n.parent,n.index);n.remove();const o=r.nodeBefore,a=r.nodeAfter;if(o instanceof c.a&&a instanceof c.a)return T(o,a);return C(r)},unwrap:function(t,e){if(!(e instanceof s.a))throw new h.a("view-writer-unwrap-invalid-attribute");if(O(t),t.isCollapsed)return t;if(t.end.isEqual(t.start.getShiftedBy(1))){const n=t.start.nodeAfter;if(!e.isSimilar(n)&&n instanceof s.a&&function(t,e){if(t.name!==e.name||t.priority!==e.priority)return!1;for(let n of t.getAttributeKeys())if("class"!==n&&"style"!==n&&(!e.hasAttribute(n)||e.getAttribute(n)!==t.getAttribute(n)))return!1;if(!e.hasClass(...t.getClassNames()))return!1;for(let n of t.getStyleNames())if(!e.hasStyle(n)||e.getStyle(n)!==t.getStyle(n))return!1;for(let n of t.getAttributeKeys())"class"!==n&&"style"!==n&&e.removeAttribute(n);return e.removeClass(...t.getClassNames()),e.removeStyle(...t.getStyleNames()),!0}(e,n))return t}const{start:n,end:i}=_(t,!0),r=x(n.parent,n.offset,i.offset,e),o=g(r.start);o.isEqual(r.start)||r.end.offset--;const a=g(r.end);return new l.a(o,a)},rename:function(t,e){const n=new r.a(e,t.getAttributes());return m(i.a.createAfter(t),n),w(l.a.createIn(t),i.a.createAt(n)),b(l.a.createOn(t)),n},breakViewRangePerContainer:function(t){const e=[],n=new u.a({boundaries:t});let i=t.start;for(let t of n)t.item.is("containerElement")&&(i.isEqual(t.previousPosition)||e.push(new l.a(i,t.previousPosition)),i=t.nextPosition);return e.push(new l.a(i,t.end)),e}};function g(t){const e=t.offset,n=t.parent;if(n.is("text"))return t;if(n.is("attributeElement")&&0===n.childCount){const t=n.parent,e=n.index;return n.remove(),g(new i.a(t,e))}const r=n.getChild(e-1),s=n.getChild(e);if(!r||!s)return t;if(r.is("text")&&s.is("text"))return T(r,s);if(r.is("attributeElement")&&s.is("attributeElement")&&r.isSimilar(s)){const t=r.childCount;return r.appendChildren(s.getChildren()),s.remove(),g(new i.a(r,t))}return t}function m(t,e){(function t(e){for(let n of e){if(!P.some(t=>n instanceof t))throw new h.a("view-writer-insert-invalid-node");n.is("text")||t(n.getChildren())}})(e=n.i(f.a)(e)?[...e]:[e]);const i=y(t);if(!i)throw new h.a("view-writer-invalid-position-container");const r=k(t,!0),s=i.insertChildren(r.offset,e),o=r.getShiftedBy(s),a=g(r);if(0===s)return new l.a(a,a);{a.isEqual(r)||o.offset--;const t=g(o);return new l.a(a,t)}}function b(t){if(O(t),t.isCollapsed)return new d.a;const{start:e,end:n}=_(t,!0),r=e.parent,s=n.offset-e.offset,o=r.removeChildren(e.offset,s),a=g(e);return t.start=a,t.end=i.a.createFromPosition(a),new d.a(o)}function w(t,e){let n;if(e.isAfter(t.end)){const i=(e=k(e,!0)).parent,r=i.childCount;n=b(t=_(t,!0)),e.offset+=i.childCount-r}else n=b(t);return m(e,n)}function v(t,e){if(!(e instanceof s.a))throw new h.a("view-writer-wrap-invalid-attribute");if(O(t),t.isCollapsed)return t;if(t.end.isEqual(t.start.getShiftedBy(1))){const n=t.start.nodeAfter;if(n instanceof s.a&&S(e,n))return t}if(function(t){return t.start.parent==t.end.parent&&t.start.parent.is("attributeElement")&&0===t.start.offset&&t.end.offset===t.start.parent.childCount}(t)&&S(e,t.start.parent)){const e=t.start.parent.parent,n=t.start.parent.index;return l.a.createFromParentsAndOffsets(e,n,e,n+1)}const{start:n,end:r}=_(t,!0),o=n.parent,a=x(o,n.offset,r.offset,e),c=function t(e,n,r,s){let o=n;const a=[];for(;o<r;){const n=e.getChild(o),r=n.is("text"),c=n.is("attributeElement"),l=n.is("emptyElement"),u=n.is("uiElement");if(r||l||u||c&&s.priority<=n.priority){const t=s.clone();n.remove(),t.appendChildren(n),e.insertChildren(o,t),a.push(new i.a(e,o))}else c&&t(n,0,n.childCount,s);o++}let c=0;for(let t of a){if(t.offset-=c,t.offset==n)continue;const e=g(t);e.isEqual(t)||(c++,r--)}return l.a.createFromParentsAndOffsets(e,n,e,r)}(o,a.start.offset,a.end.offset,e),u=g(c.start);u.isEqual(c.start)||c.end.offset--;const d=g(c.end);return new l.a(u,d)}function y(t){let e=t.parent;for(;!E(e);){if(!e)return;e=e.parent}return e}function _(t,e=!1){const n=t.start,i=t.end;if(O(t),t.isCollapsed){const n=k(t.start,e);return new l.a(n,n)}const r=k(i,e),s=r.parent.childCount,o=k(n,e);return r.offset+=r.parent.childCount-s,new l.a(o,r)}function k(t,e=!1){const n=t.offset,r=t.parent;if(t.parent.is("emptyElement"))throw new h.a("view-writer-cannot-break-empty-element");if(t.parent.is("uiElement"))throw new h.a("view-writer-cannot-break-ui-element");if(!e&&r.is("text")&&E(r.parent))return i.a.createFromPosition(t);if(E(r))return i.a.createFromPosition(t);if(r.is("text"))return k(A(t),e);if(n==r.childCount){return k(new i.a(r.parent,r.index+1),e)}if(0===n){return k(new i.a(r.parent,r.index),e)}{const t=r.index+1,s=r.clone();r.parent.insertChildren(t,s);const o=r.childCount-n,a=r.removeChildren(n,o);return s.appendChildren(a),k(new i.a(r.parent,t),e)}}function x(t,e,n,r){let s=e;const o=[];for(;s<n;){const e=t.getChild(s);if(e.isSimilar(r)){const r=e.getChildren(),a=e.childCount;e.remove(),t.insertChildren(s,r),o.push(new i.a(t,s),new i.a(t,s+a)),s+=a,n+=a-1}else e.is("attributeElement")&&x(e,0,e.childCount,r),s++}let a=0;for(let t of o){if(t.offset-=a,t.offset==e||t.offset==n)continue;g(t).isEqual(t)||(a++,n--)}return l.a.createFromParentsAndOffsets(t,e,t,n)}function C(t){const e=t.nodeBefore;if(e&&e.is("text"))return new i.a(e,e.data.length);const n=t.nodeAfter;return n&&n.is("text")?new i.a(n,0):t}function A(t){if(t.offset==t.parent.data.length)return new i.a(t.parent.parent,t.parent.index+1);if(0===t.offset)return new i.a(t.parent.parent,t.parent.index);const e=t.parent.data.slice(t.offset);return t.parent.data=t.parent.data.slice(0,t.offset),t.parent.parent.insertChildren(t.parent.index+1,new c.a(e)),new i.a(t.parent.parent,t.parent.index+1)}function T(t,e){const n=t.data.length;return t.data+=e.data,e.remove(),new i.a(t,n)}function S(t,e){if(t.name!==e.name||t.priority!==e.priority)return!1;for(let n of t.getAttributeKeys())if("class"!==n&&"style"!==n&&e.hasAttribute(n)&&e.getAttribute(n)!==t.getAttribute(n))return!1;for(let n of t.getStyleNames())if(e.hasStyle(n)&&e.getStyle(n)!==t.getStyle(n))return!1;for(let n of t.getAttributeKeys())"class"!==n&&"style"!==n&&(e.hasAttribute(n)||e.setAttribute(n,t.getAttribute(n)));for(let n of t.getStyleNames())e.hasStyle(n)||e.setStyle(n,t.getStyle(n));for(let n of t.getClassNames())e.hasClass(n)||e.addClass(n);return!0}e.a=p;const P=[c.a,s.a,r.a,o.a,a.a];function E(t){return t&&(t.is("containerElement")||t.is("documentFragment"))}function O(t){const e=y(t.start),n=y(t.end);if(!e||!n||e!==n)throw new h.a("view-writer-invalid-range-container")}},function(t,e,n){"use strict";
/**
 * @license Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */function i(t){return t.focus}e.a=class{constructor(t){if(Object.assign(this,t),t.actions&&t.keystrokeHandler)for(let e in t.actions){let n=t.actions[e];"string"==typeof n&&(n=[n]);for(let i of n)t.keystrokeHandler.set(i,(t,n)=>{this[e](),n()})}}get first(){return this.focusables.find(i)||null}get last(){return this.focusables.filter(i).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let t=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find((e,n)=>{const i=e.element===this.focusTracker.focusedElement;return i&&(t=n),i}),t)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(t){t&&t.focus()}_getFocusableItem(t){const e=this.current,n=this.focusables.length;if(!n||null===e)return null;let r=(e+n+t)%n;do{let e=this.focusables.get(r);if(i(e))return e;r=(r+n+t)%n}while(r!==e);return null}}},function(t,e,n){"use strict";var i=n(0),r=n(31),s=n(75),o=n(4);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends s.a{constructor(t){super({idProperty:"viewUid"}),this.on("add",(t,e,n)=>{e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[n])}),this.on("remove",(t,e)=>{e.element&&this._parentElement&&e.element.remove()}),this.locale=t,this.set("ready",!1),this._parentElement=null}init(){if(this.ready)throw new i.a("ui-viewcollection-init-reinit: This ViewCollection has already been initialized.");return Promise.all(this.map(t=>t.init())).then(()=>{this.ready=!0})}destroy(){let t=[];for(let e of this)t.push(e.destroy());return Promise.all(t)}add(t,e){super.add(t,e);let n=Promise.resolve();return this.ready&&!t.ready&&(n=n.then(()=>t.init())),n}setParent(t){this._parentElement=t}delegate(...t){if(!t.length||!t.every(t=>"string"==typeof t))throw new i.a("ui-viewcollection-delegate-wrong-events: All event names must be strings.");return{to:e=>{for(let n of this)for(let i of t)n.delegate(i).to(e);this.on("add",(n,i)=>{for(let n of t)i.delegate(n).to(e)}),this.on("remove",(n,i)=>{for(let n of t)i.stopDelegating(n,e)})}}}},n.i(o.a)(s.a,r.a)},function(t,e,n){"use strict";e.b=s;var i=n(11);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */function r(t,e){let n=s([t],e);n.sort((t,e)=>t.start.isBefore(e.start)?-1:1);for(let t=1;t<n.length;t++){let e=n[t-1],i=n[t];e.end.isTouching(i.start)&&(e.end=i.end,n.splice(t,1),t--)}return n}function s(t,e){for(let n of e)for(let e of n.operations)for(let n=0;n<t.length;n++){let i;switch(e.type){case"insert":i=t[n]._getTransformedByInsertion(e.position,e.nodes.maxOffset,!0);break;case"move":case"remove":case"reinsert":i=t[n]._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!0)}i&&(t.splice(n,1,...i),n=n+i.length-1)}return t}e.a=class extends i.a{constructor(t){super(t),this._stack=[],this._createdBatches=new WeakSet,this.refreshState()}addBatch(t){const e={ranges:Array.from(this.editor.document.selection.getRanges()),isBackward:this.editor.document.selection.isBackward};this._stack.push({batch:t,selection:e}),this.refreshState()}clearStack(){this._stack=[],this.refreshState()}_checkEnabled(){return this._stack.length>0}_restoreSelection(t,e,n){const i=this.editor.document,s=[];for(let e of t){const t=r(e,n).find(t=>t.start.root!=i.graveyard);t&&s.push(t)}s.length&&i.selection.setRanges(s,e)}}},function(t,e,n){"use strict";var i=n(451),r=n(452),s=n(453),o=n(454),a=n(455);function c(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}c.prototype.clear=i.a,c.prototype.delete=r.a,c.prototype.get=s.a,c.prototype.has=o.a,c.prototype.set=a.a,e.a=c},function(t,e,n){"use strict";var i=n(78),r=n(460),s=n(461),o=n(462),a=n(463),c=n(464);function l(t){this.__data__=new i.a(t)}l.prototype.clear=r.a,l.prototype.delete=s.a,l.prototype.get=o.a,l.prototype.has=a.a,l.prototype.set=c.a,e.a=l},function(t,e,n){"use strict";var i=n(30).a.Symbol;e.a=i},function(t,e,n){"use strict";var i=n(124);e.a=function(t,e){return!!t.length&&n.i(i.a)(t,e,0)>-1}},function(t,e,n){"use strict";e.a=function(t,e,n){for(var i=-1,r=t.length;++i<r;)if(n(e,t[i]))return!0;return!1}},function(t,e,n){"use strict";var i=n(85),r=n(50),s=n(51);e.a=function(t,e){for(var o=0,a=(e=n.i(r.a)(e,t)?[e]:n.i(i.a)(e)).length;null!=t&&o<a;)t=t[n.i(s.a)(e[o++])];return o&&o==a?t:void 0}},function(t,e,n){"use strict";var i=n(198);e.a=function(t,e,r){if(e!=e)return n.i(i.a)(t,r);for(var s=r-1,o=t.length;++s<o;)if(t[s]===e)return s;return-1}},function(t,e,n){"use strict";var i=n(79),r=n(121),s=n(122),o=n(26),a=n(130),c=n(132),l=Math.min;e.a=function(t,e,u){for(var h=u?s.a:r.a,d=t[0].length,f=t.length,p=f,g=Array(f),m=1/0,b=[];p--;){var w=t[p];p&&e&&(w=n.i(o.a)(w,n.i(a.a)(e))),m=l(w.length,m),g[p]=!u&&(e||d>=120&&w.length>=120)?new i.a(p&&w):void 0}w=t[0];var v=-1,y=g[0];t:for(;++v<d&&b.length<m;){var _=w[v],k=e?e(_):_;if(_=u||0!==_?_:0,!(y?n.i(c.a)(y,k):h(b,k,u))){for(p=f;--p;){var x=g[p];if(!(x?n.i(c.a)(x,k):h(t[p],k,u)))continue t}y&&y.push(k),b.push(_)}}return b}},function(t,e,n){"use strict";var i=n(405),r=n(15),s=n(43);e.a=function t(e,o,a,c,l){return e===o||(null==e||null==o||!n.i(r.a)(e)&&!n.i(s.a)(o)?e!=e&&o!=o:n.i(i.a)(e,o,t,a,c,l))}},function(t,e,n){"use strict";e.a=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){"use strict";var i=n(26),r=n(124),s=n(404),o=n(130),a=Array.prototype.splice;e.a=function(t,e,c,l){var u=l?s.a:r.a,h=-1,d=e.length,f=t;for(c&&(f=n.i(i.a)(t,n.i(o.a)(c)));++h<d;)for(var p=0,g=e[h],m=c?c(g):g;(p=u(f,m,p,l))>-1;)f!==t&&a.call(f,p,1),a.call(t,p,1);return t}},function(t,e,n){"use strict";var i=n(44),r=4294967294,s=Math.floor,o=Math.min;e.a=function(t,e,a,c){e=a(e);for(var l=0,u=t?t.length:0,h=e!=e,d=null===e,f=n.i(i.a)(e),p=void 0===e;l<u;){var g=s((l+u)/2),m=a(t[g]),b=void 0!==m,w=null===m,v=m==m,y=n.i(i.a)(m);if(h)var _=c||v;else _=p?v&&(c||b):d?v&&b&&(c||!w):f?v&&b&&!w&&(c||!y):!w&&!y&&(c?m<=e:m<e);_?l=g+1:u=g}return o(u,r)}},function(t,e,n){"use strict";e.a=function(t){return function(e){return t(e)}}},function(t,e,n){"use strict";var i=n(81),r=n(65),s=n(42);e.a=function(t,e,o){for(var a=-1,c=t.length;++a<c;)var l=l?n.i(i.a)(n.i(r.a)(l,t[a],e,o),n.i(r.a)(t[a],l,e,o)):t[a];return l&&l.length?n.i(s.a)(l,e,o):[]}},function(t,e,n){"use strict";e.a=function(t,e){return t.has(e)}},function(t,e,n){"use strict";var i=n(14);e.a=function(t){return n.i(i.a)(t)?t:[]}},function(t,e,n){"use strict";var i=n(184);e.a=function(t){var e=new t.constructor(t.byteLength);return new i.a(e).set(new i.a(t)),e}},function(t,e,n){"use strict";var i=n(64);e.a=function(t,e,r,s){r||(r={});for(var o=-1,a=e.length;++o<a;){var c=e[o],l=s?s(r[c],t[c],c,r,t):t[c];n.i(i.a)(r,c,l)}return r}},function(t,e,n){"use strict";var i=Object.getPrototypeOf;e.a=function(t){return i(Object(t))}},function(t,e,n){"use strict";var i=n(388),r=n(182),s=n(390),o=n(183),a=n(392),c=n(201),l=Object.prototype.toString,u=n.i(c.a)(i.a),h=n.i(c.a)(r.a),d=n.i(c.a)(s.a),f=n.i(c.a)(o.a),p=n.i(c.a)(a.a);function g(t){return l.call(t)}(i.a&&"[object DataView]"!=g(new i.a(new ArrayBuffer(1)))||r.a&&"[object Map]"!=g(new r.a)||s.a&&"[object Promise]"!=g(s.a.resolve())||o.a&&"[object Set]"!=g(new o.a)||a.a&&"[object WeakMap]"!=g(new a.a))&&(g=function(t){var e=l.call(t),i="[object Object]"==e?t.constructor:void 0,r=i?n.i(c.a)(i):void 0;if(r)switch(r){case u:return"[object DataView]";case h:return"[object Map]";case d:return"[object Promise]";case f:return"[object Set]";case p:return"[object WeakMap]"}return e}),e.a=g},function(t,e,n){"use strict";e.a=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}},function(t,e,n){"use strict";var i=n(15),r=n(479),s=n(249),o="Expected a function",a=Math.max,c=Math.min;e.a=function(t,e,l){var u,h,d,f,p,g=0,m=0,b=!1,w=!1,v=!0;if("function"!=typeof t)throw new TypeError(o);function y(e){var n=u,i=h;return u=h=void 0,m=e,f=t.apply(i,n)}function _(t){var n=t-g;return!g||n>=e||n<0||w&&t-m>=d}function k(){var t=n.i(r.a)();if(_(t))return x(t);p=setTimeout(k,function(t){var n=e-(t-g);return w?c(n,d-(t-m)):n}(t))}function x(t){return clearTimeout(p),p=void 0,v&&u?y(t):(u=h=void 0,f)}function C(){var t=n.i(r.a)(),i=_(t);if(u=arguments,h=this,g=t,i){if(void 0===p)return function(t){return m=t,p=setTimeout(k,e),b?y(t):f}(g);if(w)return clearTimeout(p),p=setTimeout(k,e),y(g)}return void 0===p&&(p=setTimeout(k,e)),f}return e=n.i(s.a)(e)||0,n.i(i.a)(l)&&(b=!!l.leading,d=(w="maxWait"in l)?a(n.i(s.a)(l.maxWait)||0,e):d,v="trailing"in l?!!l.trailing:v),C.cancel=function(){void 0!==p&&clearTimeout(p),g=m=0,u=h=p=void 0},C.flush=function(){return void 0===p?f:x(n.i(r.a)())},C}},function(t,e,n){"use strict";var i=n(34),r=n(16);e.a=function(t,e,s){var o=t?t.length:0;return o?(e=s||void 0===e?1:n.i(r.a)(e),n.i(i.a)(t,e<0?0:e,o)):[]}},function(t,e,n){"use strict";var i=n(34),r=n(16);e.a=function(t,e,s){var o=t?t.length:0;return o?(e=o-(e=s||void 0===e?1:n.i(r.a)(e)),n.i(i.a)(t,0,e<0?0:e)):[]}},function(t,e,n){"use strict";e.a=function(t){return t&&t.length?t[0]:void 0}},function(t,e,n){"use strict";var i=n(14),r="[object Arguments]",s=Object.prototype,o=s.hasOwnProperty,a=s.toString,c=s.propertyIsEnumerable;e.a=function(t){return n.i(i.a)(t)&&o.call(t,"callee")&&(!c.call(t,"callee")||a.call(t)==r)}},function(t,e,n){"use strict";var i=n(15),r="[object Function]",s="[object GeneratorFunction]",o=Object.prototype.toString;e.a=function(t){var e=n.i(i.a)(t)?o.call(t):"";return e==r||e==s}},function(t,e,n){"use strict";var i=n(12),r=n(43),s="[object String]",o=Object.prototype.toString;e.a=function(t){return"string"==typeof t||!n.i(i.a)(t)&&n.i(r.a)(t)&&o.call(t)==s}},function(t,e,n){"use strict";var i=n(128);e.a=function(t,e){return t&&t.length&&e&&e.length?n.i(i.a)(t,e):t}},function(t,e,n){"use strict";var i=n(185),r=n(26),s=n(96);e.a=function(t,e){if(!t||!t.length)return[];var o=n.i(s.a)(t);return null==e?o:n.i(r.a)(o,function(t){return n.i(i.a)(e,void 0,t)})}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){return n.i(i.a)(t)?n.i(r.a)(t):new Map(t)};var i=n(95),r=n(264)},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e,n){const o=[];for(let a of e){const e=new i.a({boundaries:a,mergeCharacters:!0});let c=e.next(),l=a.start,u=a.start,h=a.end;for(;!c.done;){const i=c.value.item.name||"$text",a=s.a.createBefore(c.value.item);n.check({name:i,inside:a,attributes:t})||(u.isEqual(l)||o.push(new r.a(u,l)),u=e.position),l=e.position,c=e.next()}u&&!u.isEqual(h)&&o.push(new r.a(u,h))}return o};var i=n(40),r=n(2),s=n(1)},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e,n){if(e.isCollapsed)return n.check({name:"$text",inside:e.getFirstPosition(),attributes:t});{const r=e.getRanges();for(let e of r){const r=new i.a({boundaries:e,mergeCharacters:!0});let s=r.position,o=r.next();for(;!o.done;){const e=o.value.item.name||"$text";if(n.check({name:e,inside:s,attributes:t}))return!0;s=r.position,o=r.next()}}}return!1};var i=n(40)},function(t,e,n){"use strict";var i=n(11),r=n(150),s=n(151);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t,e){super(t),this.attributeKey=e,this.set("value",!1),this.listenTo(this.editor.document.selection,"change:attribute",()=>{this.value=this.editor.document.selection.hasAttribute(this.attributeKey)})}_checkEnabled(){const t=this.editor.document;return n.i(s.a)(this.attributeKey,t.selection,t.schema)}_doExecute(t={}){const e=this.editor.document,i=e.selection,s=void 0===t.forceValue?!this.value:t.forceValue;e.enqueueChanges(()=>{if(i.isCollapsed)s?i.setAttribute(this.attributeKey,!0):i.removeAttribute(this.attributeKey);else{const o=n.i(r.a)(this.attributeKey,i.getRanges(),e.schema),a=t.batch||e.batch();for(let t of o)s?a.setAttribute(t,this.attributeKey,s):a.removeAttribute(t,this.attributeKey)}})}}},function(t,e,n){"use strict";var i=n(1),r=n(2),s=n(28),o=n(33),a=n(29),c=n(7),l=n(4);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class u{constructor(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this.on("modelToViewPosition",(t,e)=>{if(e.viewPosition)return;let n=this._modelToViewMapping.get(e.modelPosition.parent);e.viewPosition=this._findPositionIn(n,e.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(t,e)=>{if(e.modelPosition)return;let n=e.viewPosition.parent,r=this._viewToModelMapping.get(n);for(;!r;)n=n.parent,r=this._viewToModelMapping.get(n);let s=this._toModelOffset(e.viewPosition.parent,e.viewPosition.offset,n);e.modelPosition=i.a.createFromParentAndOffset(r,s)},{priority:"low"})}bindElements(t,e){this._modelToViewMapping.set(t,e),this._viewToModelMapping.set(e,t)}unbindViewElement(t){const e=this.toModelElement(t);this._unbindElements(e,t)}unbindModelElement(t){const e=this.toViewElement(t);this._unbindElements(t,e)}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap}toModelElement(t){return this._viewToModelMapping.get(t)}toViewElement(t){return this._modelToViewMapping.get(t)}toModelRange(t){return new r.a(this.toModelPosition(t.start),this.toModelPosition(t.end))}toViewRange(t){return new o.a(this.toViewPosition(t.start),this.toViewPosition(t.end))}toModelPosition(t){const e={viewPosition:t,mapper:this};return this.fire("viewToModelPosition",e),e.modelPosition}toViewPosition(t){const e={modelPosition:t,mapper:this};return this.fire("modelToViewPosition",e),e.viewPosition}registerViewToModelLength(t,e){this._viewToModelLengthCallbacks.set(t,e)}_toModelOffset(t,e,n){if(n!=t){return this._toModelOffset(t.parent,t.index,n)+this._toModelOffset(t,e,t)}if(t.is("text"))return e;let i=0;for(let n=0;n<e;n++)i+=this.getModelLength(t.getChild(n));return i}_unbindElements(t,e){this._viewToModelMapping.delete(e),this._modelToViewMapping.delete(t)}getModelLength(t){if(this._viewToModelLengthCallbacks.get(t.name)){return this._viewToModelLengthCallbacks.get(t.name)(t)}if(this._viewToModelMapping.has(t))return 1;if(t.is("text"))return t.data.length;if(t.is("uiElement"))return 0;{let e=0;for(let n of t.getChildren())e+=this.getModelLength(n);return e}}_findPositionIn(t,e){let n,i=0,r=0,o=0;if(t.is("text"))return new s.a(t,e);for(;r<e;)n=t.getChild(o),r+=i=this.getModelLength(n),o++;return r==e?this._moveViewPositionToTextNode(new s.a(t,o)):this._findPositionIn(n,e-(r-i))}_moveViewPositionToTextNode(t){const e=t.nodeBefore,n=t.nodeAfter;return e instanceof a.a?new s.a(e,e.data.length):n instanceof a.a?new s.a(n,0):t}}e.a=u,n.i(l.a)(u,c.a)},function(t,e,n){"use strict";e.e=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(){return(t,e,n,i)=>{const r=e.selection;if(!r.isCollapsed&&n.consume(r,"selection")){i.viewSelection.removeAllRanges();for(let t of r.getRanges()){const e=i.mapper.toViewRange(t);i.viewSelection.addRange(e,r.isBackward)}}}},e.f=function(){return(t,e,n,i)=>{const o=e.selection;if(!o.isCollapsed)return;if(!n.consume(o,"selection"))return;const a=o.getFirstPosition(),c=i.mapper.toViewPosition(a),l=s.a.breakAttributes(c);i.viewSelection.removeAllRanges(),i.viewSelection.addRange(new r.a(l,l))}},e.a=function(t){return(e,n,r,s)=>{const a=t instanceof i.a?t.clone(!0):t(n.value,n,n.selection,r,s);if(!a)return;const c="selectionAttribute:"+n.key;o(n.selection,s.viewSelection,a,r,c)}},e.b=function(t){return(e,n,r,s)=>{const a=t instanceof i.a?t.clone(!0):t(n,r,s);if(!a)return;const c="selectionMarker:"+n.name;o(n.selection,s.viewSelection,a,r,c)}},e.c=function(){return(t,e,n,i)=>{for(let t of i.viewSelection.getRanges())t.isCollapsed&&t.end.parent.document&&s.a.mergeAttributes(t.start);i.viewSelection.removeAllRanges()}},e.d=function(){return(t,e,n,i)=>i.viewSelection.setFake(!1)};var i=n(25),r=n(33),s=n(114);function o(t,e,n,i,o){if(!t.isCollapsed)return;if(!i.consume(t,o))return;let a=e.getFirstPosition();a=s.a.wrapPosition(a,n),e.removeAllRanges(),e.addRange(new r.a(a,a))}},function(t,e,n){"use strict";var i=n(293),r=n(2),s=n(1),o=n(37),a=n(7),c=n(4),l=n(53);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class u{constructor(t,e={}){this._modelDocument=t,this.conversionApi=n.i(l.a)({dispatcher:this},e)}convertChange(t,e){"remove"!==t&&e.range&&"$graveyard"==e.range.root.rootName||"remove"==t&&"$graveyard"==e.sourcePosition.root.rootName||"rename"==t&&"$graveyard"==e.element.root.rootName||("insert"==t||"reinsert"==t?this.convertInsertion(e.range):"move"==t?this.convertMove(e.sourcePosition,e.range):"remove"==t?this.convertRemove(e.sourcePosition,e.range):"addAttribute"==t||"removeAttribute"==t||"changeAttribute"==t?this.convertAttribute(t,e.range,e.key,e.oldValue,e.newValue):"rename"==t&&this.convertRename(e.element,e.oldName))}convertInsertion(t){const e=this._createInsertConsumable(t);for(let n of t){const t=n.item,i={item:t,range:r.a.createFromPositionAndShift(n.previousPosition,n.length)};this._testAndFire("insert",i,e);for(let n of t.getAttributeKeys())i.attributeKey=n,i.attributeOldValue=null,i.attributeNewValue=t.getAttribute(n),this._testAndFire(`addAttribute:${n}`,i,e)}for(let e of this._modelDocument.markers){const n=e.getRange();n.containsPosition(t.start)&&this.convertMarker("addMarker",e.name,n.getIntersection(t)),(t.containsRange(n)||t.isEqual(n))&&this.convertMarker("addMarker",e.name,n)}}convertMove(t,e){if(e.start.isBefore(t)){this.convertInsertion(e);const n=t._getTransformedByInsertion(e.start,e.end.offset-e.start.offset);this.convertRemove(n,e)}else this.convertRemove(t,e),this.convertInsertion(e)}convertRemove(t,e){const n=this._createConsumableForRange(e,"remove");for(let i of e.getItems({shallow:!0})){const e={sourcePosition:t,item:i};this._testAndFire("remove",e,n)}}convertAttribute(t,e,n,i,s){const o=this._createConsumableForRange(e,t+":"+n);for(let a of e){const e={item:a.item,range:r.a.createFromPositionAndShift(a.previousPosition,a.length),attributeKey:n,attributeOldValue:i,attributeNewValue:s};this._testAndFire(`${t}:${n}`,e,o)}}convertRename(t,e){const n=t.clone(!0);n.name=e,this.conversionApi.mapper.bindElements(n,this.conversionApi.mapper.toViewElement(t)),(new o.a).appendChildren(n),this.convertRemove(s.a.createBefore(t),r.a.createOn(n)),this.convertInsertion(r.a.createOn(t))}convertSelection(t){const e=Array.from(this._modelDocument.markers.getMarkersAtPosition(t.getFirstPosition())),n=this._createSelectionConsumable(t,e);this.fire("selection",{selection:t},n,this.conversionApi);for(let i of e){const e={selection:t,name:i.name};n.test(t,"selectionMarker:"+i.name)&&this.fire("selectionMarker:"+i.name,e,n,this.conversionApi)}for(let e of t.getAttributeKeys()){const i={selection:t,key:e,value:t.getAttribute(e)};n.test(t,"selectionAttribute:"+i.key)&&this.fire("selectionAttribute:"+i.key,i,n,this.conversionApi)}}convertMarker(t,e,n){if(!n.root.document||"$graveyard"==n.root.rootName)return;const i=this._createMarkerConsumable(t,n),r={name:e,range:n};this.fire(t+":"+e,r,i,this.conversionApi)}_createInsertConsumable(t){const e=new i.a;for(let n of t){const t=n.item;e.add(t,"insert");for(let n of t.getAttributeKeys())e.add(t,"addAttribute:"+n)}return e}_createConsumableForRange(t,e){const n=new i.a;for(let i of t.getItems())n.add(i,e);return n}_createSelectionConsumable(t,e){const n=new i.a;n.add(t,"selection");for(let i of e)n.add(t,"selectionMarker:"+i.name);for(let e of t.getAttributeKeys())n.add(t,"selectionAttribute:"+e);return n}_createMarkerConsumable(t,e){const n=new i.a;return n.add(e,t),n}_testAndFire(t,e,n){if(!n.test(e.item,t))return;const i=e.item.name||"$text";this.fire(t+":"+i,e,n,this.conversionApi)}}e.a=u,n.i(c.a)(u,a.a)},function(t,e,n){"use strict";var i=n(298),r=n(162),s=n(57);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class{constructor(){this._domParser=new DOMParser,this._domConverter=new r.a({blockFiller:s.a}),this._htmlWriter=new i.a}toData(t){const e=this._domConverter.viewToDom(t,document);return this._htmlWriter.getHtml(e)}toView(t){const e=this._toDom(t);return this._domConverter.domToView(e)}_toDom(t){const e=this._domParser.parseFromString(t,"text/html"),n=e.createDocumentFragment(),i=e.body.childNodes;for(;i.length>0;)n.appendChild(i[0]);return n}}},function(t,e,n){"use strict";var i=n(21),r=n(18),s=n(17),o=n(69),a=n(109),c=n(1),l=n(2);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class u extends i.a{get type(){return"attribute"}get key(){return this.operations[0]?this.operations[0].key:null}get value(){return this.operations[0]?this.operations[0].newValue:null}get range(){if(this._range)return this._range;let t=null,e=null;for(let n of this.operations)(null===t||t.isAfter(n.range.start))&&(t=n.range.start),(null===e||e.isBefore(n.range.end))&&(e=n.range.end);return t&&e?(this._range=new l.a(t,e),this._range):null}get _reverseDeltaClass(){return u}static get className(){return"engine.model.delta.AttributeDelta"}static get _priority(){return 20}}e.a=u;class h extends i.a{static get className(){return"engine.model.delta.RootAttributeDelta"}}function d(t,e,n,i){i instanceof l.a?function(t,e,n,i,r){const s=new u;let a,h,d,f=r.start;for(let t of r)d=t.item.getAttribute(n),a&&h!=d&&(h!=i&&p(),f=a),a=t.nextPosition,h=d;a instanceof c.a&&a!=f&&h!=i&&p();function p(){0===s.operations.length&&t.addDelta(s);let r=new l.a(f,a);const c=new o.a(r,n,h,i,e.version);s.addOperation(c),e.applyOperation(c)}}(t,t.document,e,n,i):function(t,e,n,i,r){const s=r.getAttribute(n);let d,f;const p=r.is("rootElement")?new h:new u;s!=i&&(t.addDelta(p),r.is("rootElement")?f=new a.a(r,n,s,i,e.version):(d=r.is("element")?new l.a(c.a.createBefore(r),c.a.createFromParentAndOffset(r,0)):new l.a(c.a.createBefore(r),c.a.createAfter(r)),f=new o.a(d,n,s,i,e.version)),p.addOperation(f),e.applyOperation(f))}(t,t.document,e,n,i)}n.i(s.b)("setAttribute",function(t,e,n){return d(this,e,n,t),this}),n.i(s.b)("removeAttribute",function(t,e){return d(this,e,null,t),this}),r.a.register(u),r.a.register(h)},function(t,e,n){"use strict";var i=n(21),r=n(18),s=n(17),o=n(108),a=n(6),c=n(1),l=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class u extends i.a{get type(){return"rename"}get _reverseDeltaClass(){return u}static get className(){return"engine.model.delta.RenameDelta"}}e.a=u,n.i(s.b)("rename",function(t,e){if(!(t instanceof a.a))throw new l.a("batch-rename-not-element-instance: Trying to rename an object which is not an instance of Element.");const n=new u;return this.addDelta(n),function(t,e,n){e.addOperation(n),t.document.applyOperation(n)}(this,n,new o.a(c.a.createBefore(t),t.name,e,this.document.version)),this}),r.a.register(u)},function(t,e,n){"use strict";var i=n(98),r=n(17),s=n(18),o=n(38),a=n(13);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class c extends i.a{static get className(){return"engine.model.delta.WeakInsertDelta"}}e.a=c,n.i(r.b)("weakInsert",function(t,e){const i=new c;this.addDelta(i),e=n.i(a.b)(e);for(let t of e)t.setAttributesTo(this.document.selection.getAttributes());const r=new o.a(t,e,this.document.version);return i.addOperation(r),this.document.applyOperation(r),this}),s.a.register(c)},function(t,e,n){"use strict";var i=n(1),r=n(2),s=n(7),o=n(4),a=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class c extends i.a{constructor(t,e,n){if(super(t,e),!this.root.is("rootElement"))throw new a.a("model-liveposition-root-not-rootelement: LivePosition root has to be an instance of RootElement.");this.stickiness=n||"sticksToNext",function(){const t=new Set(["insert","move","remove","reinsert"]);this.listenTo(this.root.document,"change",(e,n,s)=>{t.has(n)&&function(t,e,n){let s,o=e.end.offset-e.start.offset;switch(t){case"insert":let i="sticksToNext"==this.stickiness;s=this._getTransformedByInsertion(e.start,o,i);break;case"move":case"remove":case"reinsert":let a=r.a.createFromPositionAndShift(n,o),c=a.containsPosition(this)||a.start.isEqual(this)&&"sticksToNext"==this.stickiness||a.end.isEqual(this)&&"sticksToPrevious"==this.stickiness;if(c)s=this._getCombined(n,e.start);else{let t="sticksToNext"==this.stickiness;s=this._getTransformedByMove(n,e.start,o,t)}}if(!this.isEqual(s)){const t=i.a.createFromPosition(this);this.path=s.path,this.root=s.root,this.fire("change",t)}}.call(this,n,s.range,s.sourcePosition)},{priority:"high"})}.call(this)}detach(){this.stopListening()}}e.a=c,n.i(o.a)(c,s.a)},function(t,e,n){"use strict";var i=n(2),r=n(7),s=n(4);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class o extends i.a{constructor(t,e){super(t,e),function(){const t=new Set(["insert","move","remove","reinsert"]);this.listenTo(this.root.document,"change",(e,n,r,s,o)=>{t.has(n)&&function(t,e,n,r){const s=n.end.offset-n.start.offset;let o=n.start;"move"==t&&(o=o._getTransformedByInsertion(r,s));const a=this._getTransformedByDocumentChange(t,e,o,s,r);"move"==t&&3==a.length&&(a[2]=n);const c=i.a.createFromRanges(a);if(!c.isEqual(this)){const t=i.a.createFromRange(this);this.start=c.start,this.end=c.end,this.fire("change",t)}}.call(this,n,o,r.range,r.sourcePosition)},{priority:"high"})}.call(this)}detach(){this.stopListening()}}e.a=o,n.i(s.a)(o,r.a)},function(t,e,n){"use strict";var i=n(29),r=n(25),s=n(28),o=n(33),a=n(59),c=n(111),l=n(48),u=n(57),h=n(378),d=n(180),f=n(375);function p(t,e,i){let r=n.i(d.a)(t);return i&&(r=r.slice(r.indexOf(i)+1)),r.some(t=>t.tagName&&e.includes(t.tagName.toLowerCase()))}e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class{constructor(t={}){this.blockFiller=t.blockFiller||u.b,this.preElements=["pre"],this.blockElements=["p","div","h1","h2","h3","h4","h5","h6"],this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap}bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,a.a.createFromSelection(e))}fakeSelectionToView(t){return this._fakeSelectionMapping.get(t)}bindElements(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}unbindDomElement(t){const e=this._domToViewMapping.get(t);if(e){this._domToViewMapping.delete(t),this._viewToDomMapping.delete(e);for(let e of Array.from(t.childNodes))this.unbindDomElement(e)}}bindDocumentFragments(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}viewToDom(t,e,n={}){if(t.is("text")){const n=this._processDataFromViewText(t);return e.createTextNode(n)}{if(this.getCorrespondingDom(t))return this.getCorrespondingDom(t);let i;if(t.is("documentFragment"))i=e.createDocumentFragment(),n.bind&&this.bindDocumentFragments(i,t);else{i=e.createElement(t.name),n.bind&&this.bindElements(i,t);for(let e of t.getAttributeKeys())i.setAttribute(e,t.getAttribute(e))}if(n.withChildren||void 0===n.withChildren)for(let r of this.viewChildrenToDom(t,e,n))i.appendChild(r);return i}}*viewChildrenToDom(t,e,n={}){let i=t.getFillerOffset&&t.getFillerOffset(),r=0;for(let s of t.getChildren())i===r&&(yield this.blockFiller(e)),yield this.viewToDom(s,e,n),r++;i===r&&(yield this.blockFiller(e))}viewRangeToDom(t){const e=this.viewPositionToDom(t.start),n=this.viewPositionToDom(t.end),i=document.createRange();return i.setStart(e.parent,e.offset),i.setEnd(n.parent,n.offset),i}viewPositionToDom(t){const e=t.parent;if(e.is("text")){const i=this.getCorrespondingDomText(e);if(!i)return null;let r=t.offset;return n.i(u.c)(i)&&(r+=u.d),{parent:i,offset:r}}{let e,i,r;if(0===t.offset){if(!(e=this.getCorrespondingDom(t.parent)))return null;r=e.childNodes[0]}else{if(!(i=this.getCorrespondingDom(t.nodeBefore)))return null;e=i.parentNode,r=i.nextSibling}return this.isText(r)&&n.i(u.c)(r)?{parent:r,offset:u.d}:{parent:e,offset:i?n.i(h.a)(i)+1:0}}}domToView(t,e={}){if(n.i(u.e)(t,this.blockFiller))return null;if(this.isText(t)){if(n.i(u.f)(t))return null;{const e=this._processDataFromDomText(t);return""===e?null:new i.a(e)}}if(this.isComment(t))return null;{if(this.getCorrespondingView(t))return this.getCorrespondingView(t);let n;if(this.isDocumentFragment(t))n=new c.a,e.bind&&this.bindDocumentFragments(t,n);else{const i=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();n=new r.a(i),e.bind&&this.bindElements(t,n);const s=t.attributes;for(let t=s.length-1;t>=0;t--)n.setAttribute(s[t].name,s[t].value)}if(e.withChildren||void 0===e.withChildren)for(let i of this.domChildrenToView(t,e))n.appendChildren(i);return n}}*domChildrenToView(t,e={}){for(let n=0;n<t.childNodes.length;n++){const i=t.childNodes[n],r=this.domToView(i,e);null!==r&&(yield r)}}domSelectionToView(t){if(1===t.rangeCount){let e=t.getRangeAt(0).startContainer;this.isText(e)&&(e=e.parentNode);const n=this.fakeSelectionToView(e);if(n)return n}const e=new a.a,n=this.isDomSelectionBackward(t);for(let i=0;i<t.rangeCount;i++){const r=t.getRangeAt(i),s=this.domRangeToView(r);s&&e.addRange(s,n)}return e}domRangeToView(t){const e=this.domPositionToView(t.startContainer,t.startOffset),n=this.domPositionToView(t.endContainer,t.endOffset);return e&&n?new o.a(e,n):null}domPositionToView(t,e){if(n.i(u.e)(t,this.blockFiller))return this.domPositionToView(t.parentNode,n.i(h.a)(t));if(this.isText(t)){if(n.i(u.f)(t))return this.domPositionToView(t.parentNode,n.i(h.a)(t));const i=this.getCorrespondingViewText(t);let r=e;return i?(n.i(u.c)(t)&&(r=(r-=u.d)<0?0:r),new s.a(i,r)):null}if(0===e){const e=this.getCorrespondingView(t);if(e)return new s.a(e,0)}else{const n=this.getCorrespondingView(t.childNodes[e-1]);if(n&&n.parent)return new s.a(n.parent,n.index+1)}return null}getCorrespondingView(t){return this.isElement(t)?this.getCorrespondingViewElement(t):this.isDocumentFragment(t)?this.getCorrespondingViewDocumentFragment(t):this.isText(t)?this.getCorrespondingViewText(t):null}getCorrespondingViewElement(t){return this._domToViewMapping.get(t)}getCorrespondingViewDocumentFragment(t){return this._domToViewMapping.get(t)}getCorrespondingViewText(t){if(n.i(u.f)(t))return null;const e=t.previousSibling;if(e){if(!this.isElement(e))return null;const t=this.getCorrespondingViewElement(e);if(t)return t.nextSibling instanceof i.a?t.nextSibling:null}else{const e=this.getCorrespondingViewElement(t.parentNode);if(e){const t=e.getChild(0);return t instanceof i.a?t:null}}return null}getCorrespondingDom(t){return t instanceof r.a?this.getCorrespondingDomElement(t):t instanceof c.a?this.getCorrespondingDomDocumentFragment(t):t instanceof i.a?this.getCorrespondingDomText(t):null}getCorrespondingDomElement(t){return this._viewToDomMapping.get(t)}getCorrespondingDomDocumentFragment(t){return this._viewToDomMapping.get(t)}getCorrespondingDomText(t){const e=t.previousSibling;return e&&this.getCorrespondingDom(e)?this.getCorrespondingDom(e).nextSibling:!e&&t.parent&&this.getCorrespondingDom(t.parent)?this.getCorrespondingDom(t.parent).childNodes[0]:null}focus(t){const e=this.getCorrespondingDomElement(t);e&&e.ownerDocument.activeElement!==e&&e.focus()}isText(t){return t&&t.nodeType==Node.TEXT_NODE}isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE}isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isComment(t){return t&&t.nodeType==Node.COMMENT_NODE}isDomSelectionBackward(t){if(t.isCollapsed)return!1;const e=document.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset);const n=e.collapsed;return e.detach(),n}_processDataFromViewText(t){let e=t.data;if(t.getAncestors().some(t=>this.preElements.includes(t.name)))return e;const n=this._getTouchingViewTextNode(t,!1),i=this._getTouchingViewTextNode(t,!0);let r=e.match(/ *$/)[0],s=e.substr(0,e.length-r.length);if(n&&" "!=n.data.charAt(n.data.length-1)||(s=s.replace(/^ /,"Â ")),s=s.replace(/  /g," Â "),r.length>0){let t=!1;i?" "!=i.data.charAt(0)&&"Â "!=i.data.charAt(0)||r.length%2==0&&(t=!0):r.length%2&&(t=!0),t&&(r="Â "+r.substr(0,r.length-1)),r=r.replace(/  /g," Â ")}return s+r}_getTouchingViewTextNode(t,e){if(!t.parent)return null;const n=new l.a({startPosition:e?s.a.createAfter(t):s.a.createBefore(t),direction:e?"forward":"backward"});for(let t of n){if(t.item.is("containerElement"))return null;if(t.item.is("text"))return t.item}return null}_processDataFromDomText(t){let e=n.i(u.g)(t);if(p(t,this.preElements))return e;e=e.replace(/[^\S\u00A0]{2,}/g," ");const i=this._getTouchingDomTextNode(t,!1),r=this._getTouchingDomTextNode(t,!0);return i&&!/[^\S\u00A0]/.test(i.data.charAt(i.data.length-1))||(e=e.replace(/^ /,"")),r||(e=e.replace(/ $/,"")),e=e.replace(/ \u00A0/g,"  "),i&&!/[^\S\u00A0]/.test(i.data.charAt(i.data.length-1))||(e=e.replace(/^\u00A0/," ")),r&&"Â "!=r.data.charAt(0)||(e=e.replace(/\u00A0( *)$/," $1")),e}_getTouchingDomTextNode(t,e){if(!t.parentNode)return null;const i=e?"nextNode":"previousNode",r=t.ownerDocument,s=r.createTreeWalker(r.childNodes[0],NodeFilter.SHOW_TEXT);s.currentNode=t;const o=s[i]();if(null!==o){const e=n.i(f.a)(t,o);if(e&&!p(t,this.blockElements,e)&&!p(o,this.blockElements,e))return o}return null}}},function(t,e,n){"use strict";var i=n(25),r=n(0),s=n(72);function o(){return null}e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t,e,n){super(t,e,n),this.getFillerOffset=o}is(t,e=null){return e?"emptyElement"==t&&e==this.name||super.is(t,e):"emptyElement"==t||super.is(t)}insertChildren(t,e){if(e&&(e instanceof s.a||Array.from(e).length>0))throw new r.a("view-emptyelement-cannot-add: Cannot add child nodes to EmptyElement instance.")}}},function(t,e,n){"use strict";
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */function i(t,e){if("function"==typeof e)return e(t);const n={};return e.name&&(n.name=function(t,e){if(t instanceof RegExp)return t.test(e);return t===e}(e.name,t.name),!n.name)?null:e.attribute&&(n.attribute=function(t,e){const n=[];for(let i in t){const r=t[i];if(!e.hasAttribute(i))return null;{const t=e.getAttribute(i);if(r instanceof RegExp){if(!r.test(t))return null;n.push(i)}else{if(t!==r)return null;n.push(i)}}}return n}(e.attribute,t),!n.attribute)?null:!(e.class&&(n.class=function(t,e){const n=[];for(let i of t)if(i instanceof RegExp){const t=e.getClassNames();for(let e of t)i.test(e)&&n.push(e);if(0===n.length)return null}else{if(!e.hasClass(i))return null;n.push(i)}return n}(e.class,t),!n.class))&&(!(e.style&&(n.style=function(t,e){const n=[];for(let i in t){const r=t[i];if(!e.hasStyle(i))return null;{const t=e.getStyle(i);if(r instanceof RegExp){if(!r.test(t))return null;n.push(i)}else{if(t!==r)return null;n.push(i)}}}return n}(e.style,t),!n.style))&&n)}e.a=class{constructor(...t){this._patterns=[],this.add(...t)}add(...t){for(let e of t)("string"==typeof e||e instanceof RegExp)&&(e={name:e}),e.class&&("string"==typeof e.class||e.class instanceof RegExp)&&(e.class=[e.class]),this._patterns.push(e)}match(...t){for(let e of t)for(let t of this._patterns){const n=i(e,t);if(n)return{element:e,pattern:t,match:n}}return null}matchAll(...t){const e=[];for(let n of t)for(let t of this._patterns){const r=i(n,t);r&&e.push({element:n,pattern:t,match:r})}return e.length>0?e:null}getElementName(){if(1!==this._patterns.length)return null;const t=this._patterns[0],e=t.name;return"function"==typeof t||!e||e instanceof RegExp?null:e}}},function(t,e,n){"use strict";var i=n(47),r=n(59),s=n(57);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},this.domConverter=t.domConverter,this.renderer=t.renderer,this._domElements=[],this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(t){this._domElements.push(t),this.isEnabled&&this._mutationObserver.observe(t,this._config)}enable(){super.enable();for(let t of this._domElements)this._mutationObserver.observe(t,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(t){if(0===t.length)return;const e=this.domConverter,i=new Map,o=new Set;for(let n of t)if("childList"===n.type){const t=e.getCorrespondingViewElement(n.target);t&&!this._isBogusBrMutation(n)&&o.add(t)}for(let r of t)if("characterData"===r.type){const t=e.getCorrespondingViewText(r.target);t&&!o.has(t.parent)?i.set(t,{type:"text",oldText:t.data,newText:n.i(s.g)(r.target),node:t}):!t&&n.i(s.c)(r.target)&&o.add(e.getCorrespondingViewElement(r.target.parentNode))}const a=[];for(let t of i.values())this.renderer.markToSync("text",t.node),a.push(t);for(let t of o){const n=e.getCorrespondingDomElement(t),i=t.getChildren(),r=e.domChildrenToView(n);this.renderer.markToSync("children",t),a.push({type:"children",oldChildren:Array.from(i),newChildren:Array.from(r),node:t})}const c=t[0].target.ownerDocument.getSelection();let l=null;if(c&&c.anchorNode){const t=e.domPositionToView(c.anchorNode,c.anchorOffset),n=e.domPositionToView(c.focusNode,c.focusOffset);t&&n&&((l=new r.a).collapse(t),l.setFocus(n))}this.document.fire("mutations",a,l),this.document.render()}_isBogusBrMutation(t){let e=null;return null===t.nextSibling&&0===t.removedNodes.length&&1==t.addedNodes.length&&(e=this.domConverter.domToView(t.addedNodes[0],{withChildren:!1})),e&&e.is("element","br")}}},function(t,e,n){"use strict";var i=n(112);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */const r=Symbol("rootName");e.a=class extends i.a{constructor(t){super(t),this.rootName="main"}is(t,e=null){return e?"rootElement"==t&&e==this.name||super.is(t,e):"rootElement"==t||super.is(t)}get rootName(){return this.getCustomProperty(r)}set rootName(t){this.setCustomProperty(r,t)}}},function(t,e,n){"use strict";var i=n(25),r=n(0),s=n(72);function o(){return null}e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t,e,n){super(t,e,n),this.getFillerOffset=o}is(t,e=null){return e?"uiElement"==t&&e==this.name||super.is(t,e):"uiElement"==t||super.is(t)}insertChildren(t,e){if(e&&(e instanceof s.a||Array.from(e).length>0))throw new r.a("view-uielement-cannot-add: Cannot add child nodes to UIElement instance.")}}},function(t,e,n){"use strict";var i=n(481),r=n(61),s=n(176),o=n(73);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const a=s.a.arrowVerticalOffset,c={south:(t,e)=>({top:t.bottom+a,left:t.left+t.width/2-e.width/2,name:"s"}),north:(t,e)=>({top:t.top-e.height-a,left:t.left+t.width/2-e.width/2,name:"n"})};e.a=class extends s.a{constructor(t){super(t.locale),this.editor=t;const e=t.editing.view;this.listenTo(t.ui.focusTracker,"change:isFocused",(t,e,n,i)=>{i&&!n&&this.detach()}),t.listenTo(e,"render",()=>{const t=e.selection.getSelectedElement();t&&n.i(o.a)(t)||this.detach()},{priority:"low"}),this._throttledAttach=n.i(i.a)(()=>{this._attach()},100)}init(){return this.editor.ui.focusTracker.add(this.element),super.init()}attach(){this._attach(),this.editor.ui.view.listenTo(r.a.window,"scroll",this._throttledAttach),this.editor.ui.view.listenTo(r.a.window,"resize",this._throttledAttach)}detach(){this.hide(),this.editor.ui.view.stopListening(r.a.window,"scroll",this._throttledAttach),this.editor.ui.view.stopListening(r.a.window,"resize",this._throttledAttach)}_attach(){const t=this.editor.editing.view;this.attachTo({target:t.domConverter.viewRangeToDom(t.selection.getFirstRange()),positions:[c.north,c.south]})}}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e){return new i.a(s(t,e,!0),s(t,e,!1))};var i=n(2),r=n(1);function s(t,e,n){let i=t.textNode||(n?t.nodeBefore:t.nodeAfter),s=null;for(;i&&i.getAttribute("linkHref")==e;)s=i,i=n?i.previousSibling:i.nextSibling;return s?r.a.createAt(s,n?"before":"after"):t}},function(t,e,n){"use strict";var i=n(110);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class extends i.a{}},function(t,e,n){"use strict";var i=n(178);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class{constructor(t,e=20){this.document=t,this.size=0,this.limit=e,this.isLocked=!1,this._changeCallback=((t,e,n,i)=>{this._onBatch(i)}),this._selectionChangeCallback=(()=>{this._reset()}),t.on("change",this._changeCallback),t.selection.on("change:range",this._selectionChangeCallback),t.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.document.batch()),this._batch}input(t){this.size+=t,this.size>=this.limit&&this._reset(!0)}lock(){this.isLocked=!0}unlock(){this.isLocked=!1}destroy(){this.document.off("change",this._changeCallback),this.document.selection.off("change:range",this._selectionChangeCallback),this.document.selection.off("change:attribute",this._selectionChangeCallback)}_onBatch(t){"transparent"!=t.type&&t!==this._batch&&n.i(i.a)(t.getOperations())<=1&&this._reset(!0)}_reset(t){this.isLocked&&!t||(this._batch=null,this.size=0)}}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function({emitter:t,activator:e,callback:n,contextElement:i}){t.listenTo(document,"mouseup",(t,{target:r})=>{e()&&!i.contains(r)&&n()})}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function({view:t}){t.listenTo(t.element,"submit",(e,n)=>{n.preventDefault(),t.fire("submit")},{useCapture:!0})}},function(t,e,n){"use strict";var i=n(9),r=n(5);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this.set("value"),this.set("id");const e=this.bindTemplate;this.template=new r.a({tag:"input",attributes:{type:"text",class:["ck-input","ck-input-text"],id:e.to("id")}}),this.on("change:value",(t,e,n)=>this.element.value=n||"")}select(){this.element.select()}focus(){this.element.focus()}}},function(t,e,n){"use strict";var i=n(9),r=n(5),s=n(67),o=n(362);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t,e){super(t);const i=`ck-input-${n.i(s.a)()}`;this.set("label"),this.set("value"),this.labelView=this._createLabelView(i),this.inputView=this._createInputView(e,i),this.template=new r.a({tag:"div",children:[this.labelView,this.inputView]})}_createLabelView(t){const e=new o.a(this.locale);return e.for=t,e.bind("text").to(this,"label"),e}_createInputView(t,e){const n=new t(this.locale);return n.id=e,n.bind("value").to(this),n}select(){this.inputView.select()}focus(){this.inputView.focus()}}},function(t,e,n){"use strict";var i=n(9),r=n(5),s=n(381),o=n(181);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const a=n.i(o.a)("px");class c extends i.a{constructor(t){super(t);const e=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","se"),this.set("isVisible",!1),this.content=this.createCollection(),this.template=new r.a({tag:"div",attributes:{class:["ck-balloon-panel",e.to("position",t=>`ck-balloon-panel_arrow_${t}`),e.if("isVisible","ck-balloon-panel_visible")],style:{top:e.to("top",a),left:e.to("left",a),maxWidth:e.to("maxWidth",a)},tabindex:-1},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){this.show();const e=c.defaultPositions,i=Object.assign({},{element:this.element,positions:[e.se,e.sw,e.ne,e.nw],limiter:document.body,fitInViewport:!0},t),{top:r,left:o,name:a}=n.i(s.a)(i);Object.assign(this,{top:r,left:o,position:a})}}e.a=c,c.arrowHorizontalOffset=30,c.arrowVerticalOffset=15,c.defaultPositions={se:t=>({top:t.bottom+c.arrowVerticalOffset,left:t.left+t.width/2-c.arrowHorizontalOffset,name:"se"}),sw:(t,e)=>({top:t.bottom+c.arrowVerticalOffset,left:t.left+t.width/2-e.width+c.arrowHorizontalOffset,name:"sw"}),ne:(t,e)=>({top:t.top-e.height-c.arrowVerticalOffset,left:t.left+t.width/2-c.arrowHorizontalOffset,name:"ne"}),nw:(t,e)=>({top:t.top-e.height-c.arrowVerticalOffset,left:t.left+t.width/2-e.width+c.arrowHorizontalOffset,name:"nw"})}},function(t,e,n){"use strict";var i=n(9),r=n(5),s=n(62),o=n(115),a=n(63),c=n(368);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this.items=this.createCollection(),this.focusTracker=new s.a,this.keystrokes=new a.a,this._focusCycler=new o.a({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:["arrowleft","arrowup"],focusNext:["arrowright","arrowdown"]}}),this.template=new r.a({tag:"div",attributes:{class:["ck-toolbar"]},children:this.items}),this.items.on("add",(t,e)=>{this.focusTracker.add(e.element)}),this.items.on("remove",(t,e)=>{this.focusTracker.remove(e.element)})}init(){return this.keystrokes.listenTo(this.element),super.init()}focus(){this._focusCycler.focusFirst()}fillFromConfig(t,e){return t?Promise.all(t.map(t=>{const n="|"==t?new c.a:e.create(t);return this.items.add(n)})):Promise.resolve()}}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){let e=0;for(let n of t)e++;return e}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e,n){let i,r;if(n=n||function(t,e){return t===e},e.length<t.length){let n=t;t=e,e=n,i="delete",r="insert"}else i="insert",r="delete";const s=t.length,o=e.length,a=o-s,c={},l={};function u(a){const u=(void 0!==l[a-1]?l[a-1]:-1)+1,h=void 0!==l[a+1]?l[a+1]:-1,d=u>h?-1:1;c[a+d]&&(c[a]=c[a+d].slice(0)),c[a]||(c[a]=[]),c[a].push(u>h?i:r);let f=Math.max(u,h),p=f-a;for(;p<s&&f<o&&n(t[p],e[f]);)p++,f++,c[a].push("equal");return f}let h,d=0;do{for(h=-d;h<a;h++)l[h]=u(h);for(h=a+d;h>a;h--)l[h]=u(h);l[a]=u(a),d++}while(l[a]!==o);return c[a].slice(1)}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){const e=[];for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){return e=>e+t}},function(t,e,n){"use strict";var i=n(49),r=n(30),s=n.i(i.a)(r.a,"Map");e.a=s},function(t,e,n){"use strict";var i=n(49),r=n(30),s=n.i(i.a)(r.a,"Set");e.a=s},function(t,e,n){"use strict";var i=n(30).a.Uint8Array;e.a=i},function(t,e,n){"use strict";e.a=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){"use strict";e.a=function(t,e,n,i){var r=-1,s=t.length;for(i&&s&&(n=t[++r]);++r<s;)n=e(n,t[r],r,t);return n}},function(t,e,n){"use strict";var i=n(119),r=n(395),s=n(64),o=n(397),a=n(417),c=n(194),l=n(425),u=n(431),h=n(137),d=n(440),f=n(441),p=n(442),g=n(12),m=n(472),b=n(87),w=n(15),v=n(66),y="[object Arguments]",_="[object Function]",k="[object GeneratorFunction]",x="[object Object]",C={};C[y]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[x]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[_]=C["[object WeakMap]"]=!1,e.a=function t(e,A,T,S,P,E,O){var R;if(S&&(R=E?S(e,P,E,O):S(e)),void 0!==R)return R;if(!n.i(w.a)(e))return e;var N=n.i(g.a)(e);if(N){if(R=n.i(d.a)(e),!A)return n.i(c.a)(e,R)}else{var M=n.i(h.a)(e),F=M==_||M==k;if(n.i(m.a)(e))return n.i(a.a)(e,A);if(M==x||M==y||F&&!E){if(n.i(b.a)(e))return E?e:{};if(R=n.i(p.a)(F?{}:e),!A)return n.i(l.a)(e,n.i(o.a)(R,e))}else{if(!C[M])return E?e:{};R=n.i(f.a)(e,M,t,A)}}O||(O=new i.a);var L=O.get(e);if(L)return L;if(O.set(e,R),!N)var V=T?n.i(u.a)(e):n.i(v.a)(e);return n.i(r.a)(V||e,function(i,r){V&&(i=e[r=i]),n.i(s.a)(R,r,t(i,A,T,S,r,e,O))}),R}},function(t,e,n){"use strict";e.a=function(t,e,n){for(var i=t.length,r=n?i:-1;n?r--:++r<i;)if(e(t[r],r,t))return r;return-1}},function(t,e,n){"use strict";var i=n(136),r=Object.prototype.hasOwnProperty;e.a=function(t,e){return r.call(t,e)||"object"==typeof t&&e in t&&null===n.i(i.a)(t)}},function(t,e,n){"use strict";var i=n(85),r=n(35),s=n(50),o=n(20),a=n(456),c=n(51),l=Array.prototype.splice;e.a=function(t,e){for(var u=t?e.length:0,h=u-1;u--;){var d=e[u];if(u==h||d!==f){var f=d;if(n.i(r.a)(d))l.call(t,d,1);else if(n.i(s.a)(d,t))delete t[n.i(c.a)(d)];else{var p=n.i(i.a)(d),g=n.i(a.a)(t,p);null!=g&&delete g[n.i(c.a)(n.i(o.a)(p))]}}}return t}},function(t,e,n){"use strict";var i=n(52);e.a=function(t,e){for(var r=-1,s=t.length,o=0,a=[];++r<s;){var c=t[r],l=e?e(c):c;if(!r||!n.i(i.a)(l,u)){var u=l;a[o++]=0===c?0:c}}return a}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},function(t,e,n){"use strict";e.a=function(t,e,n){for(var i=-1,r=t.length,s=e.length,o={};++i<r;){var a=i<s?e[i]:void 0;n(o,t[i],a)}return o}},function(t,e,n){"use strict";e.a=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}},function(t,e,n){"use strict";var i=n(79),r=n(396),s=1,o=2;e.a=function(t,e,a,c,l,u){var h=l&o,d=t.length,f=e.length;if(d!=f&&!(h&&f>d))return!1;var p=u.get(t);if(p)return p==e;var g=-1,m=!0,b=l&s?new i.a:void 0;for(u.set(t,e);++g<d;){var w=t[g],v=e[g];if(c)var y=h?c(v,w,g,e,t,u):c(w,v,g,t,e,u);if(void 0!==y){if(y)continue;m=!1;break}if(b){if(!n.i(r.a)(e,function(t,e){if(!b.has(e)&&(w===t||a(w,t,c,l,u)))return b.add(e)})){m=!1;break}}else if(w!==v&&!a(w,v,c,l,u)){m=!1;break}}return u.delete(t),m}},function(t,e,n){"use strict";var i=Object.getOwnPropertySymbols;function r(t){return i(Object(t))}i||(r=function(){return[]}),e.a=r},function(t,e,n){"use strict";var i=n(192),r=n(143),s=n(12),o=n(94),a=n(145);e.a=function(t){var e=t?t.length:void 0;return n.i(o.a)(e)&&(n.i(s.a)(t)||n.i(a.a)(t)||n.i(r.a)(t))?n.i(i.a)(e,String):null}},function(t,e,n){"use strict";e.a=function(t,e,n){for(var i=t.length,r=e+(n?0:-1);n?r--:++r<i;){var s=t[r];if(s!=s)return r}return-1}},function(t,e,n){"use strict";var i=n(15);e.a=function(t){return t==t&&!n.i(i.a)(t)}},function(t,e,n){"use strict";e.a=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},function(t,e,n){"use strict";var i=Function.prototype.toString;e.a=function(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){"use strict";var i=n(34),r=n(88),s=n(16),o=Math.ceil,a=Math.max;e.a=function(t,e,c){e=(c?n.i(r.a)(t,e,c):void 0===e)?1:a(n.i(s.a)(e),0);var l=t?t.length:0;if(!l||e<1)return[];for(var u=0,h=0,d=Array(o(l/e));u<l;)d[h++]=n.i(i.a)(t,u,u+=e);return d}},function(t,e,n){"use strict";e.a=function(t){for(var e=-1,n=t?t.length:0,i=0,r=[];++e<n;){var s=t[e];s&&(r[i++]=s)}return r}},function(t,e,n){"use strict";var i=n(81),r=n(23),s=n(194),o=n(12);e.a=function(){for(var t=arguments.length,e=Array(t?t-1:0),a=arguments[0],c=t;c--;)e[c-1]=arguments[c];return t?n.i(i.a)(n.i(o.a)(a)?n.i(s.a)(a):[a],n.i(r.a)(e,1)):[]}},function(t,e,n){"use strict";var i=n(65),r=n(23),s=n(14),o=n(8),a=n.i(o.a)(function(t,e){return n.i(s.a)(t)?n.i(i.a)(t,n.i(r.a)(e,1,s.a,!0)):[]});e.a=a},function(t,e,n){"use strict";var i=n(65),r=n(23),s=n(10),o=n(14),a=n(20),c=n(8),l=n.i(c.a)(function(t,e){var c=n.i(a.a)(e);return n.i(o.a)(c)&&(c=void 0),n.i(o.a)(t)?n.i(i.a)(t,n.i(r.a)(e,1,o.a,!0),n.i(s.a)(c)):[]});e.a=l},function(t,e,n){"use strict";var i=n(65),r=n(23),s=n(14),o=n(20),a=n(8),c=n.i(a.a)(function(t,e){var a=n.i(o.a)(e);return n.i(s.a)(a)&&(a=void 0),n.i(s.a)(t)?n.i(i.a)(t,n.i(r.a)(e,1,s.a,!0),void 0,a):[]});e.a=c},function(t,e,n){"use strict";var i=n(10),r=n(84);e.a=function(t,e){return t&&t.length?n.i(r.a)(t,n.i(i.a)(e,3),!0,!0):[]}},function(t,e,n){"use strict";var i=n(10),r=n(84);e.a=function(t,e){return t&&t.length?n.i(r.a)(t,n.i(i.a)(e,3),!0):[]}},function(t,e,n){"use strict";var i=n(401),r=n(88);e.a=function(t,e,s,o){var a=t?t.length:0;return a?(s&&"number"!=typeof s&&n.i(r.a)(t,e,s)&&(s=0,o=a),n.i(i.a)(t,e,s,o)):[]}},function(t,e,n){"use strict";var i=n(188),r=n(10);e.a=function(t,e){return t&&t.length?n.i(i.a)(t,n.i(r.a)(e,3)):-1}},function(t,e,n){"use strict";var i=n(188),r=n(10);e.a=function(t,e){return t&&t.length?n.i(i.a)(t,n.i(r.a)(e,3),!0):-1}},function(t,e,n){"use strict";var i=n(142);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";var i=n(23);e.a=function(t){return t&&t.length?n.i(i.a)(t,1):[]}},function(t,e,n){"use strict";var i=n(23),r=1/0;e.a=function(t){return t&&t.length?n.i(i.a)(t,r):[]}},function(t,e,n){"use strict";var i=n(23),r=n(16);e.a=function(t,e){return t&&t.length?(e=void 0===e?1:n.i(r.a)(e),n.i(i.a)(t,e)):[]}},function(t,e,n){"use strict";e.a=function(t){for(var e=-1,n=t?t.length:0,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i}},function(t,e,n){"use strict";var i=n(123);e.a=function(t,e,r){var s=null==t?void 0:n.i(i.a)(t,e);return void 0===s?r:s}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";var i=n(124),r=n(16),s=Math.max;e.a=function(t,e,o){var a=t?t.length:0;return a?((o=n.i(r.a)(o))<0&&(o=s(a+o,0)),n.i(i.a)(t,e,o)):-1}},function(t,e,n){"use strict";var i=n(141);e.a=function(t){return n.i(i.a)(t,1)}},function(t,e,n){"use strict";var i=n(26),r=n(125),s=n(133),o=n(8),a=n.i(o.a)(function(t){var e=n.i(i.a)(t,s.a);return e.length&&e[0]===t[0]?n.i(r.a)(e):[]});e.a=a},function(t,e,n){"use strict";var i=n(26),r=n(125),s=n(10),o=n(133),a=n(20),c=n(8),l=n.i(c.a)(function(t){var e=n.i(a.a)(t),c=n.i(i.a)(t,o.a);return e===n.i(a.a)(c)?e=void 0:c.pop(),c.length&&c[0]===t[0]?n.i(r.a)(c,n.i(s.a)(e)):[]});e.a=l},function(t,e,n){"use strict";var i=n(26),r=n(125),s=n(133),o=n(20),a=n(8),c=n.i(a.a)(function(t){var e=n.i(o.a)(t),a=n.i(i.a)(t,s.a);return e===n.i(o.a)(a)?e=void 0:a.pop(),a.length&&a[0]===t[0]?n.i(r.a)(a,void 0,e):[]});e.a=c},function(t,e,n){"use strict";var i=n(144),r=n(87),s=n(15),o=n(201),a=/^\[object .+?Constructor\]$/,c=Object.prototype,l=Function.prototype.toString,u=c.hasOwnProperty,h=RegExp("^"+l.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.a=function(t){return!!n.i(s.a)(t)&&(n.i(i.a)(t)||n.i(r.a)(t)?h:a).test(n.i(o.a)(t))}},function(t,e,n){"use strict";var i=Array.prototype.join;e.a=function(t,e){return t?i.call(t,e):""}},function(t,e,n){"use strict";var i=n(198),r=n(16),s=Math.max,o=Math.min;e.a=function(t,e,a){var c=t?t.length:0;if(!c)return-1;var l=c;if(void 0!==a&&(l=((l=n.i(r.a)(a))<0?s(c+l,0):o(l,c-1))+1),e!=e)return n.i(i.a)(t,l,!0);for(;l--;)if(t[l]===e)return l;return-1}},function(t,e,n){"use strict";var i=n(411),r=n(16);e.a=function(t,e){return t&&t.length?n.i(i.a)(t,n.i(r.a)(e)):void 0}},function(t,e,n){"use strict";var i=n(146),r=n(8),s=n.i(r.a)(i.a);e.a=s},function(t,e,n){"use strict";var i=n(10),r=n(128);e.a=function(t,e,s){return t&&t.length&&e&&e.length?n.i(r.a)(t,e,n.i(i.a)(s)):t}},function(t,e,n){"use strict";var i=n(128);e.a=function(t,e,r){return t&&t.length&&e&&e.length?n.i(i.a)(t,e,void 0,r):t}},function(t,e,n){"use strict";var i=n(26),r=n(398),s=n(23),o=n(190),a=n(424),c=n(35),l=n(8),u=n.i(l.a)(function(t,e){e=n.i(s.a)(e,1);var l=t?t.length:0,u=n.i(r.a)(t,e);return n.i(o.a)(t,n.i(i.a)(e,function(t){return n.i(c.a)(t,l)?+t:t}).sort(a.a)),u});e.a=u},function(t,e,n){"use strict";var i=n(10),r=n(190);e.a=function(t,e){var s=[];if(!t||!t.length)return s;var o=-1,a=[],c=t.length;for(e=n.i(i.a)(e,3);++o<c;){var l=t[o];e(l,o,t)&&(s.push(l),a.push(o))}return n.i(r.a)(t,a),s}},function(t,e,n){"use strict";var i=Array.prototype.reverse;e.a=function(t){return t?i.call(t):t}},function(t,e,n){"use strict";var i=n(34),r=n(88),s=n(16);e.a=function(t,e,o){var a=t?t.length:0;return a?(o&&"number"!=typeof o&&n.i(r.a)(t,e,o)?(e=0,o=a):(e=null==e?0:n.i(s.a)(e),o=void 0===o?a:n.i(s.a)(o)),n.i(i.a)(t,e,o)):[]}},function(t,e,n){"use strict";var i=n(83);e.a=function(t,e){return n.i(i.a)(t,e)}},function(t,e,n){"use strict";var i=n(10),r=n(129);e.a=function(t,e,s){return n.i(r.a)(t,e,n.i(i.a)(s))}},function(t,e,n){"use strict";var i=n(83),r=n(52);e.a=function(t,e){var s=t?t.length:0;if(s){var o=n.i(i.a)(t,e);if(o<s&&n.i(r.a)(t[o],e))return o}return-1}},function(t,e,n){"use strict";var i=n(83);e.a=function(t,e){return n.i(i.a)(t,e,!0)}},function(t,e,n){"use strict";var i=n(10),r=n(129);e.a=function(t,e,s){return n.i(r.a)(t,e,n.i(i.a)(s),!0)}},function(t,e,n){"use strict";var i=n(83),r=n(52);e.a=function(t,e){if(t&&t.length){var s=n.i(i.a)(t,e,!0)-1;if(n.i(r.a)(t[s],e))return s}return-1}},function(t,e,n){"use strict";var i=n(191);e.a=function(t){return t&&t.length?n.i(i.a)(t):[]}},function(t,e,n){"use strict";var i=n(10),r=n(191);e.a=function(t,e){return t&&t.length?n.i(r.a)(t,n.i(i.a)(e)):[]}},function(t,e,n){"use strict";var i=n(140);e.a=function(t){return n.i(i.a)(t,1)}},function(t,e,n){"use strict";var i=n(34),r=n(16);e.a=function(t,e,s){return t&&t.length?(e=s||void 0===e?1:n.i(r.a)(e),n.i(i.a)(t,0,e<0?0:e)):[]}},function(t,e,n){"use strict";var i=n(34),r=n(16);e.a=function(t,e,s){var o=t?t.length:0;return o?(e=o-(e=s||void 0===e?1:n.i(r.a)(e)),n.i(i.a)(t,e<0?0:e,o)):[]}},function(t,e,n){"use strict";var i=n(10),r=n(84);e.a=function(t,e){return t&&t.length?n.i(r.a)(t,n.i(i.a)(e,3),!1,!0):[]}},function(t,e,n){"use strict";var i=n(10),r=n(84);e.a=function(t,e){return t&&t.length?n.i(r.a)(t,n.i(i.a)(e,3)):[]}},function(t,e,n){"use strict";var i=n(144),r=n(15),s=n(44),o=NaN,a=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,h=parseInt;e.a=function(t){if("number"==typeof t)return t;if(n.i(s.a)(t))return o;if(n.i(r.a)(t)){var e=n.i(i.a)(t.valueOf)?t.valueOf():t;t=n.i(r.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var d=l.test(t);return d||u.test(t)?h(t.slice(2),d?2:8):c.test(t)?o:+t}},function(t,e,n){"use strict";var i=n(23),r=n(42),s=n(14),o=n(8),a=n.i(o.a)(function(t){return n.i(r.a)(n.i(i.a)(t,1,s.a,!0))});e.a=a},function(t,e,n){"use strict";var i=n(23),r=n(10),s=n(42),o=n(14),a=n(20),c=n(8),l=n.i(c.a)(function(t){var e=n.i(a.a)(t);return n.i(o.a)(e)&&(e=void 0),n.i(s.a)(n.i(i.a)(t,1,o.a,!0),n.i(r.a)(e))});e.a=l},function(t,e,n){"use strict";var i=n(23),r=n(42),s=n(14),o=n(20),a=n(8),c=n.i(a.a)(function(t){var e=n.i(o.a)(t);return n.i(s.a)(e)&&(e=void 0),n.i(r.a)(n.i(i.a)(t,1,s.a,!0),void 0,e)});e.a=c},function(t,e,n){"use strict";var i=n(42);e.a=function(t){return t&&t.length?n.i(i.a)(t):[]}},function(t,e,n){"use strict";var i=n(10),r=n(42);e.a=function(t,e){return t&&t.length?n.i(r.a)(t,n.i(i.a)(e)):[]}},function(t,e,n){"use strict";var i=n(42);e.a=function(t,e){return t&&t.length?n.i(i.a)(t,void 0,e):[]}},function(t,e,n){"use strict";var i=n(65),r=n(14),s=n(8),o=n.i(s.a)(function(t,e){return n.i(r.a)(t)?n.i(i.a)(t,e):[]});e.a=o},function(t,e,n){"use strict";var i=n(80),r=n(131),s=n(14),o=n(8),a=n.i(o.a)(function(t){return n.i(r.a)(n.i(i.a)(t,s.a))});e.a=a},function(t,e,n){"use strict";var i=n(80),r=n(10),s=n(131),o=n(14),a=n(20),c=n(8),l=n.i(c.a)(function(t){var e=n.i(a.a)(t);return n.i(o.a)(e)&&(e=void 0),n.i(s.a)(n.i(i.a)(t,o.a),n.i(r.a)(e))});e.a=l},function(t,e,n){"use strict";var i=n(80),r=n(131),s=n(14),o=n(20),a=n(8),c=n.i(a.a)(function(t){var e=n.i(o.a)(t);return n.i(s.a)(e)&&(e=void 0),n.i(r.a)(n.i(i.a)(t,s.a),void 0,e)});e.a=c},function(t,e,n){"use strict";var i=n(8),r=n(96),s=n.i(i.a)(r.a);e.a=s},function(t,e,n){"use strict";var i=n(64),r=n(193);e.a=function(t,e){return n.i(r.a)(t||[],e||[],i.a)}},function(t,e,n){"use strict";var i=n(413),r=n(193);e.a=function(t,e){return n.i(r.a)(t||[],e||[],i.a)}},function(t,e,n){"use strict";var i=n(8),r=n(147),s=n.i(i.a)(function(t){var e=t.length,i=e>1?t[e-1]:void 0;return i="function"==typeof i?(t.pop(),i):void 0,n.i(r.a)(t,i)});e.a=s},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){const e=new Map;for(let n in t)e.set(n,t[n]);return e}},function(t,e,n){"use strict";e.a=function(t,e){return n=t.charAt(e-1),!!n&&1==n.length&&/[\ud800-\udbff]/.test(n)&&function(t){return!!t&&1==t.length&&/[\udc00-\udfff]/.test(t)}(t.charAt(e));var n},e.b=function(t,e){return n=t.charAt(e),!!n&&1==n.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
var n}},function(t,e,n){"use strict";e.b=function(t){return!!t.getCustomProperty(i)},e.a=function(t,e){e=e||{},t.setAttribute("contenteditable",!1),t.getFillerOffset=o,t.addClass(s),t.setCustomProperty(i,!0),e.label&&function(t,e){t.setCustomProperty(r,e)}(t,e.label);return t},e.d=function(t){const e=t.getCustomProperty(r);if(!e)return"";return"function"==typeof e?e():e};
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const i=Symbol("isWidget"),r=Symbol("label"),s="ck-widget";function o(){return null}e.c="ck-widget_selected"},function(t,e,n){(function(e){!function(e){"use strict";var n={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:g,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:g,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:g,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n?(?!hr|heading|lheading| {0,3}>|tag)[^\n]+)+)/,text:/^[^\n]+/};function i(t){this.tokens=[],this.tokens.links={},this.options=t||b.defaults,this.rules=n.normal,this.options.gfm&&(this.options.tables?this.rules=n.tables:this.rules=n.gfm)}n._label=/(?:\\[\[\]]|[^\[\]])+/,n._title=/(?:"(?:\\"|[^"]|"[^"\n]*")*"|'\n?(?:[^'\n]+\n?)*'|\([^()]*\))/,n.def=h(n.def).replace("label",n._label).replace("title",n._title).getRegex(),n.bullet=/(?:[*+-]|\d+\.)/,n.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,n.item=h(n.item,"gm").replace(/bull/g,n.bullet).getRegex(),n.list=h(n.list).replace(/bull/g,n.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+n.def.source+")").getRegex(),n._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b",n.html=h(n.html).replace("comment",/<!--[\s\S]*?-->/).replace("closed",/<(tag)[\s\S]+?<\/\1>/).replace("closing",/<tag(?:"[^"]*"|'[^']*'|\s[^'"\/>\s]*)*?\/?>/).replace(/tag/g,n._tag).getRegex(),n.paragraph=h(n.paragraph).replace("hr",n.hr).replace("heading",n.heading).replace("lheading",n.lheading).replace("tag","<"+n._tag).getRegex(),n.blockquote=h(n.blockquote).replace("paragraph",n.paragraph).getRegex(),n.normal=m({},n),n.gfm=m({},n.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),n.gfm.paragraph=h(n.paragraph).replace("(?!","(?!"+n.gfm.fences.source.replace("\\1","\\2")+"|"+n.list.source.replace("\\1","\\3")+"|").getRegex(),n.tables=m({},n.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),i.rules=n,i.lex=function(t,e){return new i(e).lex(t)},i.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},i.prototype.token=function(t,e){var i,r,s,o,a,c,l,u,h,d,f;for(t=t.replace(/^ +$/gm,"");t;)if((s=this.rules.newline.exec(t))&&(t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(t))t=t.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:s.replace(/\n+$/,"")});else if(s=this.rules.fences.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2],text:s[3]||""});else if(s=this.rules.heading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if(e&&(s=this.rules.nptable.exec(t))){for(t=t.substring(s[0].length),c={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/\n$/,"").split("\n")},u=0;u<c.align.length;u++)/^ *-+: *$/.test(c.align[u])?c.align[u]="right":/^ *:-+: *$/.test(c.align[u])?c.align[u]="center":/^ *:-+ *$/.test(c.align[u])?c.align[u]="left":c.align[u]=null;for(u=0;u<c.cells.length;u++)c.cells[u]=c.cells[u].split(/ *\| */);this.tokens.push(c)}else if(s=this.rules.hr.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,e),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(t)){for(t=t.substring(s[0].length),f=(o=s[2]).length>1,this.tokens.push({type:"list_start",ordered:f,start:f?+o:""}),i=!1,d=(s=s[0].match(this.rules.item)).length,u=0;u<d;u++)l=(c=s[u]).length,~(c=c.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(l-=c.length,c=this.options.pedantic?c.replace(/^ {1,4}/gm,""):c.replace(new RegExp("^ {1,"+l+"}","gm"),"")),this.options.smartLists&&u!==d-1&&(o===(a=n.bullet.exec(s[u+1])[0])||o.length>1&&a.length>1||(t=s.slice(u+1).join("\n")+t,u=d-1)),r=i||/\n\n(?!\s*$)/.test(c),u!==d-1&&(i="\n"===c.charAt(c.length-1),r||(r=i)),this.tokens.push({type:r?"loose_item_start":"list_item_start"}),this.token(c,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(t))t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:s[0]});else if(e&&(s=this.rules.def.exec(t)))t=t.substring(s[0].length),s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),h=s[1].toLowerCase(),this.tokens.links[h]||(this.tokens.links[h]={href:s[2],title:s[3]});else if(e&&(s=this.rules.table.exec(t))){for(t=t.substring(s[0].length),c={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/(?: *\| *)?\n$/,"").split("\n")},u=0;u<c.align.length;u++)/^ *-+: *$/.test(c.align[u])?c.align[u]="right":/^ *:-+: *$/.test(c.align[u])?c.align[u]="center":/^ *:-+ *$/.test(c.align[u])?c.align[u]="left":c.align[u]=null;for(u=0;u<c.cells.length;u++)c.cells[u]=c.cells[u].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(c)}else if(s=this.rules.lheading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2]?1:2,text:s[1]});else if(e&&(s=this.rules.paragraph.exec(t)))t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var r={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:g,tag:/^<!--[\s\S]*?-->|^<\/?[a-zA-Z0-9\-]+(?:"[^"]*"|'[^']*'|\s[^<'">\/\s]*)*?\/?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^_([^\s_](?:[^_]|__)+?[^\s_])_\b|^\*((?:\*\*|[^*])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:g,text:/^[\s\S]+?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function s(t,e){if(this.options=e||b.defaults,this.links=t,this.rules=r.normal,this.renderer=this.options.renderer||new o,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=r.breaks:this.rules=r.gfm:this.options.pedantic&&(this.rules=r.pedantic)}function o(t){this.options=t||{}}function a(){}function c(t){this.tokens=[],this.token=null,this.options=t||b.defaults,this.options.renderer=this.options.renderer||new o,this.renderer=this.options.renderer,this.renderer.options=this.options}function l(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function u(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}function h(t,e){return t=t.source,e=e||"",{replace:function(e,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),t=t.replace(e,n),this},getRegex:function(){return new RegExp(t,e)}}}function d(t,e){return f[" "+t]||(/^[^:]+:\/*[^/]*$/.test(t)?f[" "+t]=t+"/":f[" "+t]=t.replace(/[^/]*$/,"")),t=f[" "+t],"//"===e.slice(0,2)?t.replace(/:[\s\S]*/,":")+e:"/"===e.charAt(0)?t.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+e:t+e}r._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,r._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,r.autolink=h(r.autolink).replace("scheme",r._scheme).replace("email",r._email).getRegex(),r._inside=/(?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]]|\](?=[^\[]*\]))*/,r._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,r.link=h(r.link).replace("inside",r._inside).replace("href",r._href).getRegex(),r.reflink=h(r.reflink).replace("inside",r._inside).getRegex(),r.normal=m({},r),r.pedantic=m({},r.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),r.gfm=m({},r.normal,{escape:h(r.escape).replace("])","~|])").getRegex(),url:h(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("email",r._email).getRegex(),_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:h(r.text).replace("]|","~]|").replace("|","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|").getRegex()}),r.breaks=m({},r.gfm,{br:h(r.br).replace("{2,}","*").getRegex(),text:h(r.gfm.text).replace("{2,}","*").getRegex()}),s.rules=r,s.output=function(t,e,n){return new s(e,n).output(t)},s.prototype.output=function(t){for(var e,n,i,r,s="";t;)if(r=this.rules.escape.exec(t))t=t.substring(r[0].length),s+=r[1];else if(r=this.rules.autolink.exec(t))t=t.substring(r[0].length),i="@"===r[2]?"mailto:"+(n=l(this.mangle(r[1]))):n=l(r[1]),s+=this.renderer.link(i,null,n);else if(this.inLink||!(r=this.rules.url.exec(t))){if(r=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),t=t.substring(r[0].length),s+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):l(r[0]):r[0];else if(r=this.rules.link.exec(t))t=t.substring(r[0].length),this.inLink=!0,s+=this.outputLink(r,{href:r[2],title:r[3]}),this.inLink=!1;else if((r=this.rules.reflink.exec(t))||(r=this.rules.nolink.exec(t))){if(t=t.substring(r[0].length),e=(r[2]||r[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){s+=r[0].charAt(0),t=r[0].substring(1)+t;continue}this.inLink=!0,s+=this.outputLink(r,e),this.inLink=!1}else if(r=this.rules.strong.exec(t))t=t.substring(r[0].length),s+=this.renderer.strong(this.output(r[2]||r[1]));else if(r=this.rules.em.exec(t))t=t.substring(r[0].length),s+=this.renderer.em(this.output(r[2]||r[1]));else if(r=this.rules.code.exec(t))t=t.substring(r[0].length),s+=this.renderer.codespan(l(r[2].trim(),!0));else if(r=this.rules.br.exec(t))t=t.substring(r[0].length),s+=this.renderer.br();else if(r=this.rules.del.exec(t))t=t.substring(r[0].length),s+=this.renderer.del(this.output(r[1]));else if(r=this.rules.text.exec(t))t=t.substring(r[0].length),s+=this.renderer.text(l(this.smartypants(r[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else r[0]=this.rules._backpedal.exec(r[0])[0],t=t.substring(r[0].length),"@"===r[2]?i="mailto:"+(n=l(r[0])):(n=l(r[0]),i="www."===r[1]?"http://"+n:n),s+=this.renderer.link(i,null,n);return s},s.prototype.outputLink=function(t,e){var n=l(e.href),i=e.title?l(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,i,this.output(t[1])):this.renderer.image(n,i,l(t[1]))},s.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"â€”").replace(/--/g,"â€“").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1â€˜").replace(/'/g,"â€™").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1â€œ").replace(/"/g,"â€").replace(/\.{3}/g,"â€¦"):t},s.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,n="",i=t.length,r=0;r<i;r++)e=t.charCodeAt(r),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},o.prototype.code=function(t,e,n){if(this.options.highlight){var i=this.options.highlight(t,e);null!=i&&i!==t&&(n=!0,t=i)}return e?'<pre><code class="'+this.options.langPrefix+l(e,!0)+'">'+(n?t:l(t,!0))+"\n</code></pre>\n":"<pre><code>"+(n?t:l(t,!0))+"\n</code></pre>"},o.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},o.prototype.html=function(t){return t},o.prototype.heading=function(t,e,n){return"<h"+e+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},o.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},o.prototype.list=function(t,e,n){var i=e?"ol":"ul";return"<"+i+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+i+">\n"},o.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},o.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},o.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},o.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},o.prototype.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' style="text-align:'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},o.prototype.strong=function(t){return"<strong>"+t+"</strong>"},o.prototype.em=function(t){return"<em>"+t+"</em>"},o.prototype.codespan=function(t){return"<code>"+t+"</code>"},o.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},o.prototype.del=function(t){return"<del>"+t+"</del>"},o.prototype.link=function(t,e,n){if(this.options.sanitize){try{var i=decodeURIComponent(u(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return n}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return n}this.options.baseUrl&&!p.test(t)&&(t=d(this.options.baseUrl,t));var r='<a href="'+t+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>"},o.prototype.image=function(t,e,n){this.options.baseUrl&&!p.test(t)&&(t=d(this.options.baseUrl,t));var i='<img src="'+t+'" alt="'+n+'"';return e&&(i+=' title="'+e+'"'),i+=this.options.xhtml?"/>":">"},o.prototype.text=function(t){return t},a.prototype.strong=a.prototype.em=a.prototype.codespan=a.prototype.del=a.prototype.text=function(t){return t},a.prototype.link=a.prototype.image=function(t,e,n){return""+n},a.prototype.br=function(){return""},c.parse=function(t,e){return new c(e).parse(t)},c.prototype.parse=function(t){this.inline=new s(t.links,this.options),this.inlineText=new s(t.links,m({},this.options,{renderer:new a})),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},c.prototype.next=function(){return this.token=this.tokens.pop()},c.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},c.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},c.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,u(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,i,r="",s="";for(n="",t=0;t<this.token.header.length;t++)n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(r+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",i=0;i<e.length;i++)n+=this.renderer.tablecell(this.inline.output(e[i]),{header:!1,align:this.token.align[i]});s+=this.renderer.tablerow(n)}return this.renderer.table(r,s);case"blockquote_start":for(s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":s="";for(var o=this.token.ordered,a=this.token.start;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,o,a);case"list_item_start":for(s="";"list_item_end"!==this.next().type;)s+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(s);case"loose_item_start":for(s="";"list_item_end"!==this.next().type;)s+=this.tok();return this.renderer.listitem(s);case"html":var c=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(c);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};var f={},p=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function g(){}function m(t){for(var e,n,i=1;i<arguments.length;i++)for(n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function b(t,e,n){if(void 0===t||null===t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(n||"function"==typeof e){n||(n=e,e=null);var r,s,o=(e=m({},b.defaults,e||{})).highlight,a=0;try{r=i.lex(t,e)}catch(t){return n(t)}s=r.length;var u=function(t){if(t)return e.highlight=o,n(t);var i;try{i=c.parse(r,e)}catch(e){t=e}return e.highlight=o,t?n(t):n(null,i)};if(!o||o.length<3)return u();if(delete e.highlight,!s)return u();for(;a<r.length;a++)!function(t){"code"!==t.type?--s||u():o(t.text,t.lang,function(e,n){return e?u(e):null==n||n===t.text?--s||u():(t.text=n,t.escaped=!0,void(--s||u()))})}(r[a])}else try{return e&&(e=m({},b.defaults,e)),c.parse(i.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",(e||b.defaults).silent)return"<p>An error occurred:</p><pre>"+l(t.message+"",!0)+"</pre>";throw t}}g.exec=g,b.options=b.setOptions=function(t){return m(b.defaults,t),b},b.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new o,xhtml:!1,baseUrl:null},b.Parser=c,b.parser=c.parse,b.Renderer=o,b.TextRenderer=a,b.Lexer=i,b.lexer=i.lex,b.InlineLexer=s,b.inlineLexer=s.output,b.parse=b,t.exports=b}(this||"undefined"!=typeof window&&window)}).call(e,n(149))},function(t,e,n){"use strict";var i,r,s=n(530),o=n(528),a=n(529),c=n(498),l=["address","article","aside","audio","blockquote","body","canvas","center","dd","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","isindex","li","main","menu","nav","noframes","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"];function u(t){return-1!==l.indexOf(t.nodeName.toLowerCase())}var h=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function d(t){return-1!==h.indexOf(t.nodeName.toLowerCase())}function f(t){for(var e="",n=0;n<t.childNodes.length;n++)if(1===t.childNodes[n].nodeType)e+=t.childNodes[n]._replacement;else{if(3!==t.childNodes[n].nodeType)continue;e+=t.childNodes[n].data}return e}function p(t,e){if("string"==typeof e)return e===t.nodeName.toLowerCase();if(Array.isArray(e))return-1!==e.indexOf(t.nodeName.toLowerCase());if("function"==typeof e)return e.call(i,t);throw new TypeError("`filter` needs to be a string, array, or function")}function g(t,e){var n,i,r;return"left"===t?(n=e.previousSibling,i=/ $/):(n=e.nextSibling,i=/^ /),n&&(3===n.nodeType?r=i.test(n.nodeValue):1!==n.nodeType||u(n)||(r=i.test(n.textContent))),r}function m(t,e){var n="",i="";if(!u(t)){var r=/^[ \r\n\t]/.test(e),s=/[ \r\n\t]$/.test(e);r&&!g("left",t)&&(n=" "),s&&!g("right",t)&&(i=" ")}return{leading:n,trailing:i}}function b(t){var e,n=f(t);if(d(t)||/A|TH|TD/.test(t.nodeName)||!/^\s*$/i.test(n)){for(var s=0;s<r.length;s++){var o=r[s];if(p(t,o.filter)){if("function"!=typeof o.replacement)throw new TypeError("`replacement` needs to be a function that returns a string");var a=m(t,n);(a.leading||a.trailing)&&(n=n.trim()),e=a.leading+o.replacement.call(i,n,t)+a.trailing;break}}t._replacement=e}else t._replacement=""}(i=function(t,e){if(e=e||{},"string"!=typeof t)throw new TypeError(t+" is not a string");if(""===t)return"";t=t.replace(/(\d+)\. /g,"$1\\. ");var n,i,l=(n=t,i=(new a).parseFromString(n,"text/html"),c(i.documentElement,u),i).body,h=function(t){for(var e,n,i,r=[t],s=[];r.length>0;)for(e=r.shift(),s.push(e),n=e.childNodes,i=0;i<n.length;i++)1===n[i].nodeType&&r.push(n[i]);return s.shift(),s}(l);r=s.slice(0),e.gfm&&(r=o.concat(r)),e.converters&&(r=e.converters.concat(r));for(var d=h.length-1;d>=0;d--)b(h[d]);return f(l).replace(/^[\t\r\n]+|[\t\r\n\s]+$/g,"").replace(/\n\s+\n/g,"\n\n").replace(/\n{3,}/g,"\n\n")}).isBlock=u,i.isVoid=d,i.outer=function(t,e){return t.cloneNode(!1).outerHTML.replace("><",">"+e+"<")},t.exports=i},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(514),r=(n.n(i),n(492),n(527));n.n(r)},function(t,e,n){"use strict";var i=n(3),r=n(272),s=n(19),o=n(515),a=n.n(o);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{static get requires(){return[r.a]}static get pluginName(){return"basic-styles/bold"}init(){const t=this.editor,e=t.t,n=t.commands.get("bold");t.ui.componentFactory.add("bold",i=>{const r=new s.a(i);return r.set({label:e("Bold"),icon:a.a,keystroke:"CTRL+B",tooltip:!0}),r.bind("isOn","isEnabled").to(n,"value","isEnabled"),this.listenTo(r,"execute",()=>t.execute("bold")),r}),t.keystrokes.set("CTRL+B","bold")}}},function(t,e,n){"use strict";var i=n(3),r=n(45),s=n(54),o=n(152);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const a="bold";e.a=class extends i.a{init(){const t=this.editor,e=t.data,i=t.editing;t.document.schema.allow({name:"$inline",attributes:[a],inside:"$block"}),n.i(r.a)().for(e.modelToView,i.modelToView).fromAttribute(a).toElement("strong"),n.i(s.a)().for(e.viewToModel).fromElement("strong").fromElement("b").fromAttribute("style",{"font-weight":"bold"}).toAttribute(a,!0),t.commands.set(a,new o.a(t,a))}}},function(t,e,n){"use strict";var i=n(3),r=n(274),s=n(19),o=n(516),a=n.n(o);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{static get requires(){return[r.a]}static get pluginName(){return"basic-styles/italic"}init(){const t=this.editor,e=t.t,n=t.commands.get("italic");t.ui.componentFactory.add("italic",i=>{const r=new s.a(i);return r.set({label:e("Italic"),icon:a.a,keystroke:"CTRL+I",tooltip:!0}),r.bind("isOn","isEnabled").to(n,"value","isEnabled"),this.listenTo(r,"execute",()=>t.execute("italic")),r}),t.keystrokes.set("CTRL+I","italic")}}},function(t,e,n){"use strict";var i=n(3),r=n(45),s=n(54),o=n(152);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const a="italic";e.a=class extends i.a{init(){const t=this.editor,e=t.data,i=t.editing;t.document.schema.allow({name:"$inline",attributes:[a],inside:"$block"}),n.i(r.a)().for(e.modelToView,i.modelToView).fromAttribute(a).toElement("em"),n.i(s.a)().for(e.viewToModel).fromElement("em").fromElement("i").fromAttribute("style",{"font-style":"italic"}).toAttribute(a,!0),t.commands.set(a,new o.a(t,a))}}},function(t,e,n){"use strict";var i=n(3),r=n(276),s=n(279),o=n(278),a=n(156);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{static get pluginName(){return"clipboard/clipboard"}init(){const t=this.editor,e=t.document,i=t.editing.view;this._htmlDataProcessor=new a.a,i.addObserver(r.a),this.listenTo(i,"paste",(t,e)=>{const r=e.dataTransfer;let a="";r.getData("text/html")?a=n.i(o.a)(r.getData("text/html")):r.getData("text/plain")&&(a=n.i(s.a)(r.getData("text/plain"))),a=this._htmlDataProcessor.toView(a),e.preventDefault(),i.fire("clipboardInput",{dataTransfer:r,content:a})},{priority:"low"}),this.listenTo(i,"clipboardInput",(t,n)=>{if(!n.content.isEmpty){const t=this.editor.data,i=t.toModel(n.content,"$clipboardHolder");e.enqueueChanges(()=>{t.insertContent(i,e.selection)})}},{priority:"low"});const c=(n,r)=>{const s=r.dataTransfer,o=t.data.toView(t.data.getSelectedContent(e.selection));r.preventDefault(),i.fire("clipboardOutput",{dataTransfer:s,content:o,method:n.name})};this.listenTo(i,"copy",c,{priority:"low"}),this.listenTo(i,"cut",c,{priority:"low"}),this.listenTo(i,"clipboardOutput",(n,i)=>{i.content.isEmpty||i.dataTransfer.setData("text/html",this._htmlDataProcessor.toData(i.content)),"cut"==i.method&&e.enqueueChanges(()=>{t.data.deleteContent(e.selection,e.batch(),{merge:!0})})},{priority:"low"})}}},function(t,e,n){"use strict";var i=n(58),r=n(277);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this.domEventType=["paste","copy","cut"]}onDomEvent(t){this.fire(t.type,t,{dataTransfer:new r.a(t.clipboardData)})}}},function(t,e,n){"use strict";
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class{constructor(t){this._native=t}getData(t){return this._native.getData(t)}setData(t,e){this._native.setData(t,e)}}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){return t.replace(/<span class="Apple-converted-space">(\s+)<\/span>/g,(t,e)=>1==e.length?" ":e)}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n\n/g,"</p><p>").replace(/\n/g," ").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).indexOf("</p><p>")>-1&&(t=`<p>${t}</p>`);return t}},function(t,e,n){"use strict";var i=n(63);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class extends i.a{constructor(t){super(),this.editor=t}set(t,e){if("string"==typeof e){const t=e;e=(()=>{this.editor.execute(t)})}super.set(t,e)}listenTo(t){this._listener.listenTo(t,"keydown",(t,e)=>{this.press(e)&&e.preventDefault()})}}},function(t,e,n){"use strict";var i=n(7),r=n(373),s=n(283),o=n(486),a=n(287),c=n(302),l=n(0),u=n(4);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class h{constructor(t){const e=this.constructor.build&&this.constructor.build.plugins;this.config=new r.a(t,this.constructor.build&&this.constructor.build.config),this.config.define("plugins",e),this.plugins=new s.a(this,e),this.commands=new Map,this.locale=new o.a(this.config.get("lang")),this.t=this.locale.t,this.document=new c.a,this.data=new a.a(this.document)}initPlugins(){const t=this,e=this.config;return function(){const n=e.get("plugins")||[],i=e.get("removePlugins")||[];return t.plugins.load(n,i)}().then(t=>n(t,"init").then(()=>n(t,"afterInit"))).then(()=>this.fire("pluginsReady"));function n(t,e){return t.reduce((t,n)=>t.then(n[e].bind(n)),Promise.resolve())}}destroy(){return this.fire("destroy"),this.stopListening(),Promise.resolve().then(()=>{this.document.destroy(),this.data.destroy()})}execute(t,e){let n=this.commands.get(t);if(!n)throw new l.a("editor-command-not-found: Specified command has not been added to the editor.");n._execute(e)}static create(t){return new Promise(e=>{const n=new this(t);e(n.initPlugins().then(()=>{n.fire("dataReady"),n.fire("ready")}).then(()=>n))})}}e.a=h,n.i(u.a)(h,i.a)},function(t,e,n){"use strict";var i=n(281),r=n(280),s=n(289),o=n(376),a=n(384);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t,e){super(e),this.element=t,this.editing=new s.a(this.document),this.keystrokes=new r.a(this),this.keystrokes.listenTo(this.editing.view)}destroy(){return Promise.resolve().then(()=>this.keystrokes.destroy()).then(()=>this.editing.destroy()).then(super.destroy())}setData(t){this.data.set(t)}getData(){return this.data.get()}updateEditorElement(){n.i(a.a)(this.element,this.getData())}loadDataFromEditorElement(){this.setData(n.i(o.a)(this.element))}static create(t,e){return new Promise(n=>{const i=new this(t,e);n(i.initPlugins().then(()=>{i.fire("dataReady"),i.fire("ready")}).then(()=>i))})}}},function(t,e,n){"use strict";var i=n(3),r=n(0),s=n(36);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class{constructor(t,e=[]){this._editor=t,this._availablePlugins=new Map,this._plugins=new Map;for(const t of e)this._availablePlugins.set(t,t),t.pluginName&&this._availablePlugins.set(t.pluginName,t)}*[Symbol.iterator](){for(const t of this._plugins)"function"==typeof t[0]&&(yield t)}get(t){return this._plugins.get(t)}load(t,e=[]){const n=this,o=this._editor,a=new Set,c=[],l=p(t),u=p(e),h=function(t){const e=[];for(const n of t)f(n)||e.push(n);return e.length?e:null}(t);if(h){const t="plugincollection-plugin-not-found: Some plugins are not available and could not be loaded.";return s.a.error(t,{plugins:h}),Promise.reject(new r.a(t,{plugins:h}))}return Promise.all(l.map(d)).then(()=>c);function d(t){if(!u.includes(t)&&!n.get(t)&&!a.has(t))return function(t){return new Promise(s=>{a.add(t),function(t){if(!(t.prototype instanceof i.a))throw new r.a("plugincollection-instance: The loaded plugin module is not an instance of Plugin.",{plugin:t})}(t),t.requires&&t.requires.forEach(n=>{const i=f(n);if(e.includes(i))throw new r.a("plugincollection-required: Cannot load a plugin because one of its dependencies is listed inthe `removePlugins` option.",{plugin:i,requiredBy:t});d(i)});const l=new t(o);n._add(t,l),c.push(l),s()})}(t).catch(e=>{throw s.a.error("plugincollection-load: It was not possible to load the plugin.",{plugin:t}),e})}function f(t){return"function"==typeof t?t:n._availablePlugins.get(t)}function p(t){return t.map(t=>f(t)).filter(t=>!!t)}}_add(t,e){this._plugins.set(t,e),t.pluginName&&this._plugins.set(t.pluginName,e)}}},function(t,e,n){"use strict";var i=n(282),r=n(156),s=n(285),o=n(286),a=n(385),c=n(508);n.n(c);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t,e){super(t,e),this.document.createRoot(),this.data.processor=new r.a,this.ui=new s.a(this,new o.a(this.locale)),this._elementReplacer=new a.a}destroy(){return this.updateEditorElement(),this._elementReplacer.restore(),this.ui.destroy().then(()=>super.destroy())}static create(t,e){return new Promise(n=>{const i=new this(t,e);n(i.initPlugins().then(()=>i._elementReplacer.replace(t,i.ui.view.element)).then(()=>i.ui.init()).then(()=>i.fire("uiReady")).then(()=>i.editing.view.attachDomRoot(i.ui.view.editableElement)).then(()=>i.loadDataFromEditorElement()).then(()=>{i.fire("dataReady"),i.fire("ready")}).then(()=>i))})}}},function(t,e,n){"use strict";var i=n(352),r=n(62),s=n(366);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class{constructor(t,e){this.editor=t,this.view=e,this.componentFactory=new i.a(t),this.focusTracker=new r.a,e.set("width",t.config.get("ui.width")),e.set("height",t.config.get("ui.height")),e.toolbar.bind("isActive").to(this.focusTracker,"isFocused"),e.toolbar.limiterElement=e.element;const n=t.editing.createRoot("div");e.editable.bind("isReadOnly").to(n),e.editable.bind("isFocused").to(t.editing.view),e.editable.name=n.rootName,this.focusTracker.add(e.editableElement)}init(){const t=this.editor;return this.view.init().then(()=>this.view.toolbar.fillFromConfig(t.config.get("toolbar"),this.componentFactory)).then(()=>{n.i(s.a)({origin:t.editing.view,originFocusTracker:this.focusTracker,originKeystrokeHandler:t.keystrokes,toolbar:this.view.toolbar})})}destroy(){return this.view.destroy()}}},function(t,e,n){"use strict";var i=n(359),r=n(358),s=n(367),o=n(5);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this.toolbar=new s.a(t),o.a.extend(this.toolbar.template,{attributes:{class:"ck-editor-toolbar"}}),this.editable=new r.a(t),this.top.add(this.toolbar),this.main.add(this.editable)}get editableElement(){return this.editable.element}}},function(t,e,n){"use strict";var i=n(4),r=n(7),s=n(153),o=n(155),a=n(97),c=n(297),l=n(295),u=n(111),h=n(2),d=n(1),f=n(291),p=n(288),g=n(292),m=n(290);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class b{constructor(t,e){this.model=t,this.processor=e,this.mapper=new s.a,this.modelToView=new o.a(this.model,{mapper:this.mapper}),this.modelToView.on("insert:$text",n.i(a.j)(),{priority:"lowest"}),this.viewToModel=new c.a({schema:t.schema}),this.viewToModel.on("text",n.i(l.a)(),{priority:"lowest"}),this.viewToModel.on("element",n.i(l.b)(),{priority:"lowest"}),this.viewToModel.on("documentFragment",n.i(l.b)(),{priority:"lowest"}),this.on("insertContent",(t,e)=>n.i(f.a)(this,e.content,e.selection,e.batch)),this.on("deleteContent",(t,e)=>n.i(p.a)(e.selection,e.batch,e.options)),this.on("modifySelection",(t,e)=>n.i(g.a)(this,e.selection,e.options)),this.on("getSelectedContent",(t,e)=>{e.content=n.i(m.a)(e.selection)})}get(t="main"){return this.stringify(this.model.getRoot(t))}stringify(t){const e=this.toView(t);return this.processor.toData(e)}toView(t){const e=h.a.createIn(t),n=new u.a;return this.mapper.bindElements(t,n),this.modelToView.convertInsertion(e),this.mapper.clearBindings(),n}set(t,e="main"){const n=this.model.getRoot(e);this.model.enqueueChanges(()=>{this.model.selection.removeAllRanges(),this.model.selection.clearAttributes(),this.model.batch("transparent").remove(h.a.createIn(n)).insert(d.a.createAt(n,0),this.parse(t))})}parse(t,e="$root"){const n=this.processor.toView(t);return this.toModel(n,e)}toModel(t,e="$root"){return this.viewToModel.convert(t,{context:[e]})}destroy(){}insertContent(t,e,n){this.fire("insertContent",{content:t,selection:e,batch:n})}deleteContent(t,e,n){this.fire("deleteContent",{batch:e,selection:t,options:n})}modifySelection(t,e){this.fire("modifySelection",{selection:t,options:e})}getSelectedContent(t){const e={selection:t};return this.fire("getSelectedContent",e),e.content}}e.a=b,n.i(i.a)(b,r.a)},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e,n={}){if(t.isCollapsed)return;const a=t.getFirstRange(),c=a.start,l=i.a.createFromPosition(a.end);a.start.isTouching(a.end)||e.remove(a);n.merge&&function t(e,n,i){const o=n.parent;const a=i.parent;if(o==a)return;if(!o.parent||!a.parent)return;if(!function(t,e){const n=t.root.document.schema,i=new s.a(t,e);for(const t of i.getWalker())if(n.objects.has(t.item.name)||n.limits.has(t.item.name))return!1;return!0}(n,i))return;n=r.a.createAfter(o);i=r.a.createBefore(a);a.isEmpty?e.remove(a):(i.isEqual(n)||e.move(a,n),e.merge(n));for(;i.parent.isEmpty;){const t=i.parent;i=r.a.createBefore(t),e.remove(t)}t(e,n,i)}(e,c,l);if(t.collapse(c),function(t,e){const n=t.schema.check({name:"$text",inside:e}),i=t.schema.check({name:"paragraph",inside:e});return!n&&i}(e.document,c)){const n=new o.a("paragraph");e.insert(c,n),t.collapse(n)}l.detach()};var i=n(160),r=n(1),s=n(2),o=n(6)},function(t,e,n){"use strict";var i=n(310),r=n(153),s=n(155),o=n(97),a=n(294),c=n(154),l=n(7);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class{constructor(t){this.model=t,this.view=new i.a,this.mapper=new r.a,this.modelToView=new s.a(this.model,{mapper:this.mapper,viewSelection:this.view.selection}),this._listener=Object.create(l.a),this._listener.listenTo(this.model,"change",(t,e,n)=>{this.modelToView.convertChange(e,n)},{priority:"low"}),this._listener.listenTo(this.model,"changesDone",()=>{const t=this.model.selection;this.modelToView.convertSelection(t),this.view.render()},{priority:"low"}),this._listener.listenTo(this.model.markers,"add",(t,e)=>{this.modelToView.convertMarker("addMarker",e.name,e.getRange())}),this._listener.listenTo(this.model.markers,"remove",(t,e)=>{this.modelToView.convertMarker("removeMarker",e.name,e.getRange())}),this._listener.listenTo(this.view,"selectionChange",n.i(a.a)(this.model,this.mapper)),this.modelToView.on("insert:$text",n.i(o.j)(),{priority:"lowest"}),this.modelToView.on("remove",n.i(o.k)(),{priority:"low"}),this.modelToView.on("selection",n.i(c.c)(),{priority:"low"}),this.modelToView.on("selection",n.i(c.d)(),{priority:"low"}),this.modelToView.on("selection",n.i(c.e)(),{priority:"low"}),this.modelToView.on("selection",n.i(c.f)(),{priority:"low"})}createRoot(t,e="main"){const n=this.view.createRoot(t,e),i=this.model.getRoot(e);return this.mapper.bindElements(i,n),n}destroy(){this.view.destroy(),this._listener.stopListening()}}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){const e=new i.a,n=t.getFirstRange();if(!n||n.isCollapsed)return e;const a=n.start.root,l=n.start.getCommonPath(n.end),u=a.getNodeByPath(l);let h;h=n.start.parent==n.end.parent?n:r.a.createFromParentsAndOffsets(u,n.start.path[l.length],u,n.end.path[l.length]+1);const d=h.end.offset-h.start.offset;for(const t of h.getItems({shallow:!0}))t.is("textProxy")?e.appendChildren(new o.a(t.data,t.getAttributes())):e.appendChildren(t.clone(!0));if(h!=n){const t=n._getTransformedByMove(h.start,s.a.createAt(e,0),d)[0],i=new r.a(s.a.createAt(e),t.start),o=new r.a(t.end,s.a.createAt(e,"end"));c(o),c(i)}return e};var i=n(37),r=n(2),s=n(1),o=n(24),a=n(13);function c(t){const e=[];Array.from(t.getItems({direction:"backward"})).map(t=>r.a.createOn(t)).filter(e=>{return(e.start.isAfter(t.start)||e.start.isEqual(t.start))&&(e.end.isBefore(t.end)||e.end.isEqual(t.end))}).forEach(t=>{e.push(t.start.parent),n.i(a.c)(t)}),e.forEach(t=>{let e=t;for(;e.parent&&e.isEmpty;){const t=r.a.createOn(e);e=e.parent,n.i(a.c)(t)}})}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e,n,i){i||(i=t.model.batch());n.isCollapsed||t.deleteContent(n,i,{merge:!0});const r=new c(t,i,n.anchor);let s;s=e.is("documentFragment")?e.getChildren():[e];r.handleNodes(s,{isFirst:!0,isLast:!0});const o=r.getSelectionRange();o?n.setRanges([o]):a.a.warn("insertcontent-no-range: Cannot determine a proper selection range after insertion.")};var i=n(1),r=n(160),s=n(6),o=n(2),a=n(36);class c{constructor(t,e,n){this.dataController=t,this.batch=e,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=t.model.schema}handleNodes(t,e){t=Array.from(t);for(let n=0;n<t.length;n++){const i=t[n];this._handleNode(i,{isFirst:0===n&&e.isFirst,isLast:n===t.length-1&&e.isLast})}}getSelectionRange(){return this.nodeToSelect?o.a.createOn(this.nodeToSelect):this.dataController.model.getNearestSelectionRange(this.position)}_handleNode(t,e){if(this._checkIsObject(t))return void this._handleObject(t,e);this._checkAndSplitToAllowedPosition(t,e)?(this._insert(t),this._mergeSiblingsOf(t,e)):this._handleDisallowedNode(t,e)}_handleObject(t,e){this._checkAndSplitToAllowedPosition(t)?this._insert(t):this._tryAutoparagraphing(t,e)}_handleDisallowedNode(t,e){t.is("element")?this.handleNodes(t.getChildren(),e):this._tryAutoparagraphing(t,e)}_insert(t){if(!this._checkIsAllowed(t,[this.position.parent]))return void a.a.error("insertcontent-wrong-position: The node cannot be inserted on the given position.",{node:t,position:this.position});const e=r.a.createFromPosition(this.position);this.batch.insert(this.position,t),this.position=i.a.createFromPosition(e),e.detach(),this._checkIsObject(t)&&!this.schema.check({name:"$text",inside:[this.position.parent]})?this.nodeToSelect=t:this.nodeToSelect=null}_mergeSiblingsOf(t,e){if(!(t instanceof s.a))return;const n=e.isFirst&&t.previousSibling instanceof s.a&&this.canMergeWith.has(t.previousSibling),o=e.isLast&&t.nextSibling instanceof s.a&&this.canMergeWith.has(t.nextSibling),c=r.a.createBefore(t),l=r.a.createAfter(t);if(n){const t=r.a.createFromPosition(this.position);this.batch.merge(c),this.position=i.a.createFromPosition(t),t.detach()}if(o){let t;this.position.isEqual(l)||a.a.error("insertcontent-wrong-position-on-merge: The insertion position should equal the merge position"),this.position=i.a.createAt(l.nodeBefore,"end"),t=new r.a(this.position.root,this.position.path,"sticksToPrevious"),this.batch.merge(l),this.position=i.a.createFromPosition(t),t.detach()}c.detach(),l.detach()}_tryAutoparagraphing(t,e){const n=new s.a("paragraph");this._getAllowedIn(n,this.position.parent)&&this._checkIsAllowed(t,[n])&&(n.appendChildren(t),this._handleNode(n,e))}_checkAndSplitToAllowedPosition(t){const e=this._getAllowedIn(t,this.position.parent);if(!e)return!1;for(;e!=this.position.parent;){if(this.schema.limits.has(this.position.parent.name))return!1;if(this.position.isAtStart){const t=this.position.parent;this.position=i.a.createBefore(t),t.isEmpty&&this.batch.remove(t)}else if(this.position.isAtEnd)this.position=i.a.createAfter(this.position.parent);else{const t=i.a.createAfter(this.position.parent);this.batch.split(this.position),this.position=t,this.canMergeWith.add(this.position.nodeAfter)}}return!0}_getAllowedIn(t,e){return this._checkIsAllowed(t,[e])?e:e.parent?this._getAllowedIn(t,e.parent):null}_checkIsAllowed(t,e){return this.schema.check({name:this._getNodeSchemaName(t),attributes:Array.from(t.getAttributeKeys()),inside:e})}_checkIsObject(t){return this.schema.objects.has(this._getNodeSchemaName(t))}_getNodeSchemaName(t){return t.is("text")?"$text":t.name}}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e,n={}){const o=t.model.schema,c="backward"!=n.direction,l=n.unit?n.unit:"character",u=e.focus,h=new r.a({boundaries:function(t,e){const n=t.root,r=i.a.createAt(n,e?"end":0);return e?new s.a(t,r):new s.a(r,t)}(u,c),singleCharacters:!0,direction:c?"forward":"backward"}),d={walker:h,schema:o,isForward:c,unit:l};let f;for(;f=h.next();){if(f.done)return;const t=a(d,f.value);if(t)return void e.setFocus(t)}};var i=n(1),r=n(40),s=n(2),o=n(265);function a(t,e){if("text"==e.type)return function(t,e){const i=t.position.textNode;if(i){const r=i.data;let s=t.position.offset-i.startOffset;for(;n.i(o.a)(r,s)||"character"==e&&n.i(o.b)(r,s);)t.next(),s=t.position.offset-i.startOffset}return t.position}(t.walker,t.unit);if(e.type==(t.isForward?"elementStart":"elementEnd")){if(t.schema.objects.has(e.item.name))return i.a.createAt(e.item,t.isForward?"after":"before");if(t.schema.check({name:"$text",inside:e.nextPosition}))return e.nextPosition}else{if(t.schema.limits.has(e.item.name))return void t.walker.skip(()=>!0);if(t.schema.check({name:"$text",inside:e.nextPosition}))return e.nextPosition}}},function(t,e,n){"use strict";var i=n(71);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(t,e){t instanceof i.a&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map),this._consumable.get(t).set(e,!0)}consume(t,e){return t instanceof i.a&&(t=this._getSymbolForTextProxy(t)),!!this.test(t,e)&&(this._consumable.get(t).set(e,!1),!0)}test(t,e){t instanceof i.a&&(t=this._getSymbolForTextProxy(t));const n=this._consumable.get(t);if(void 0===n)return null;const r=n.get(e);return void 0===r?null:r}revert(t,e){t instanceof i.a&&(t=this._getSymbolForTextProxy(t));const n=this.test(t,e);return!1===n?(this._consumable.get(t).set(e,!0),!0):!0!==n&&null}_getSymbolForTextProxy(t){let e=null;const n=this._textProxyRegistry.get(t.startOffset);if(n){const i=n.get(t.endOffset);i&&(e=i.get(t.parent))}return e||(e=this._addSymbolForTextProxy(t.startOffset,t.endOffset,t.parent)),e}_addSymbolForTextProxy(t,e,n){const i=Symbol();let r,s;return(r=this._textProxyRegistry.get(t))||(r=new Map,this._textProxyRegistry.set(t,r)),(s=r.get(e))||(s=new Map,r.set(e,s)),s.set(n,i),i}}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e){return(n,r)=>{const s=r.newSelection,o=new i.a,a=[];for(let t of s.getRanges())a.push(e.toModelRange(t));o.setRanges(a,s.isBackward),o.isEqual(t.selection)||t.enqueueChanges(()=>{t.selection.setTo(o)})}};var i=n(56)},function(t,e,n){"use strict";e.b=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(){return(t,e,r,o)=>{if(!e.output&&r.consume(e.input,{name:!0})){const t=o.convertChildren(e.input,r,e);e.output=new i.a(n.i(s.b)(t))}}},e.a=function(){return(t,e,n,i)=>{const s={name:"$text",inside:e.context};i.schema.check(s)&&n.consume(e.input)&&(e.output=new r.a(e.input.data))}};var i=n(37),r=n(24),s=n(13)},function(t,e,n){"use strict";var i=n(12),r=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class s{constructor(){this._consumables=new Map}add(t,e){let n;t.is("text")||t.is("documentFragment")?this._consumables.set(t,!0):(this._consumables.has(t)?n=this._consumables.get(t):(n=new o,this._consumables.set(t,n)),n.add(e))}test(t,e){const n=this._consumables.get(t);return void 0===n?null:t.is("text")||t.is("documentFragment")?n:n.test(e)}consume(t,e){return!!this.test(t,e)&&(t.is("text")||t.is("documentFragment")?this._consumables.set(t,!1):this._consumables.get(t).consume(e),!0)}revert(t,e){const n=this._consumables.get(t);void 0!==n&&(t.is("text")||t.is("documentFragment")?this._consumables.set(t,!0):n.revert(e))}static consumablesFromElement(t){const e={name:!0,attribute:[],class:[],style:[]},n=t.getAttributeKeys();for(let t of n)"style"!=t&&"class"!=t&&e.attribute.push(t);const i=t.getClassNames();for(let t of i)e.class.push(t);const r=t.getStyleNames();for(let t of r)e.style.push(t);return e}static createFrom(t,e){if(e||(e=new s),t.is("text"))return e.add(t),e;t.is("element")&&e.add(t,s.consumablesFromElement(t)),t.is("documentFragment")&&e.add(t);for(let n of t.getChildren())e=s.createFrom(n,e);return e}}e.a=s;class o{constructor(){this._canConsumeName=null,this._consumables={attribute:new Map,style:new Map,class:new Map}}add(t){t.name&&(this._canConsumeName=!0);for(let e in this._consumables)e in t&&this._add(e,t[e])}test(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(let e in this._consumables)if(e in t){const n=this._test(e,t[e]);if(!0!==n)return n}return!0}consume(t){t.name&&(this._canConsumeName=!1);for(let e in this._consumables)e in t&&this._consume(e,t[e])}revert(t){t.name&&(this._canConsumeName=!0);for(let e in this._consumables)e in t&&this._revert(e,t[e])}_add(t,e){const s=n.i(i.a)(e)?e:[e],o=this._consumables[t];for(let e of s){if("attribute"===t&&("class"===e||"style"===e))throw new r.a("viewconsumable-invalid-attribute: Classes and styles should be handled separately.");o.set(e,!0)}}_test(t,e){const r=n.i(i.a)(e)?e:[e],s=this._consumables[t];for(let e of r)if("attribute"!==t||"class"!==e&&"style"!==e){const t=s.get(e);if(void 0===t)return null;if(!t)return!1}else{const t=this._test(e,[...this._consumables[e].keys()]);if(!0!==t)return t}return!0}_consume(t,e){const r=n.i(i.a)(e)?e:[e],s=this._consumables[t];for(let e of r)"attribute"!==t||"class"!==e&&"style"!==e?s.set(e,!1):this._consume(e,[...this._consumables[e].keys()])}_revert(t,e){const r=n.i(i.a)(e)?e:[e],s=this._consumables[t];for(let e of r)if("attribute"!==t||"class"!==e&&"style"!==e){!1===s.get(e)&&s.set(e,!0)}else this._revert(e,[...this._consumables[e].keys()])}}},function(t,e,n){"use strict";var i=n(296),r=n(2),s=n(1),o=n(40),a=n(55),c=n(37),l=n(13),u=n(7),h=n(4),d=n(53),f=n(36);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class p{constructor(t={}){this.conversionApi=n.i(d.a)({},t),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this)}convert(t,e={}){this.fire("viewCleanup",t);const a=i.a.createFrom(t);let u=this._convertItem(t,a,e);return u?(u.is("documentFragment")||(u=new c.a([u])),u.markers=function(t){const e=new Set,i=new Map,a=new o.a({startPosition:s.a.createAt(t,0),ignoreElementEnd:!0});for(const t of a)"$marker"==t.item.name&&e.add(t.item);for(const t of e){const e=t.getAttribute("data-name"),o=s.a.createBefore(t);i.has(e)?i.get(e).end=s.a.createFromPosition(o):i.set(e,new r.a(s.a.createFromPosition(o))),n.i(l.c)(r.a.createOn(t))}return i}(u),u):new c.a}_convertItem(t,e,i={}){const r=n.i(d.a)({},i,{input:t,output:null});return t.is("element")?this.fire("element:"+t.name,r,e,this.conversionApi):t.is("text")?this.fire("text",r,e,this.conversionApi):this.fire("documentFragment",r,e,this.conversionApi),r.output&&!(r.output instanceof a.a||r.output instanceof c.a)?(f.a.warn("view-conversion-dispatcher-incorrect-result: Dropped incorrect conversion result.",[t,r.output]),null):r.output}_convertChildren(t,e,n={}){const i=Array.from(t.getChildren()).map(t=>this._convertItem(t,e,n)).filter(t=>t instanceof a.a||t instanceof c.a).reduce((t,e)=>t.concat(e.is("documentFragment")?Array.from(e.getChildren()):e),[]);return new c.a(i)}}e.a=p,n.i(h.a)(p,u.a)},function(t,e,n){"use strict";
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class{getHtml(t){const e=document.implementation.createHTMLDocument("").createElement("div");return e.appendChild(t),e.innerHTML}}},function(t,e,n){"use strict";n(157),n(98),n(99),n(100),n(101),n(158),n(102),n(104),n(159),n(105)},function(t,e,n){"use strict";var i=n(103),r=n(2),s=n(1),o=n(70),a=n(69),c=n(38),l=n(107),u=n(21),h=n(157),d=n(98),f=n(301),p=n(99),g=n(100),m=n(102),b=n(159),w=n(105),v=n(104),y=n(158),_=n(101),k=n(60);function x(t,e){const n=t.clone(),i=n.operations[0];return i.oldRange=i.oldRange.getTransformedByDelta(e)[0],i.newRange=i.newRange.getTransformedByDelta(e)[0],[n]}function C(t,e){const n=new h.a,i=t.nodes;let s=i.getNode(0).getAttribute(e.key),o=0,c=i.getNode(0).offsetSize;for(let t=1;t<i.length;t++){const n=i.getNode(t),r=n.getAttribute(e.key);r!=s&&(s!=e.value&&l(),s=r,o=c),c+=n.offsetSize}return l(),n;function l(){const i=new r.a(t.position.getShiftedBy(o),t.position.getShiftedBy(c)),l=new a.a(i,e.key,s,e.value,0);n.addOperation(l)}}function A(){let t=new u.a;return t.addOperation(new o.a(0)),t}
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
n.i(i.b)(h.a,b.a,(t,e,r)=>{const s=n.i(i.c)(t,e,r);return t.range.containsPosition(e.position)&&s.push(C(e,t)),s}),n.i(i.b)(h.a,m.a,(t,e,o)=>{const c=new s.a(e.position.root,e.position.path.slice(0,-1)),l=n.i(i.c)(t,e,o);for(let n of t.operations)if(n.range.containsPosition(c)||n.range.start.isEqual(c)){const t=new h.a,i=c.getShiftedBy(1),o=s.a.createFromPosition(i);o.path.push(0);const u=e._cloneOperation.nodes.getNode(0).getAttribute(n.key);t.addOperation(new a.a(new r.a(i,o),n.key,void 0===u?null:u,n.newValue,0)),l.push(t);break}return l}),n.i(i.b)(d.a,p.a,(t,e,r)=>t.position.isEqual(e.position)?[e.getReversed(),t.clone()]:n.i(i.c)(t,e,r)),n.i(i.b)(f.a,m.a,x),n.i(i.b)(f.a,p.a,x),n.i(i.b)(f.a,w.a,x),n.i(i.b)(f.a,v.a,x),n.i(i.b)(f.a,g.a,x),n.i(i.b)(f.a,y.a,x),n.i(i.b)(g.a,p.a,(t,e,r)=>{const s=t.sourcePosition.root==e.position.root&&"same"===n.i(k.a)(t.sourcePosition.getParentPath(),e.position.getParentPath()),o=t.sourcePosition.offset<=e.position.offset&&t.sourcePosition.offset+t.howMany>e.position.offset;return s&&o?[e.getReversed(),t.clone()]:n.i(i.c)(t,e,r)}),n.i(i.b)(p.a,d.a,(t,e,r)=>t.position.isEqual(e.position)?[A()]:n.i(i.c)(t,e,r)),n.i(i.b)(p.a,g.a,(t,e,r)=>{const s=t.position.root==e.sourcePosition.root&&"same"===n.i(k.a)(t.position.getParentPath(),e.sourcePosition.getParentPath()),o=e.sourcePosition.offset<=t.position.offset&&e.sourcePosition.offset+e.howMany>t.position.offset;return s&&o?[A()]:n.i(i.c)(t,e,r)}),n.i(i.b)(m.a,m.a,(t,e,r)=>{const s=t.position.getParentPath(),o=e.position.getParentPath();if("same"==n.i(k.a)(s,o)){if(t.position.offset==e.position.offset)return[A()];if(t.position.offset<e.position.offset){const n=t.clone();return n._moveOperation.howMany=e.position.offset-t.position.offset,t._cloneOperation instanceof l.a&&e._cloneOperation instanceof l.a&&t._cloneOperation.sourcePosition.offset>e._cloneOperation.sourcePosition.offset&&n._cloneOperation.sourcePosition.offset--,[n]}{const n=t.clone();return n._cloneOperation.position.offset++,n._moveOperation.sourcePosition.path[n._moveOperation.sourcePosition.path.length-2]++,n._moveOperation.targetPosition.path[n._moveOperation.targetPosition.path.length-2]++,n._moveOperation.sourcePosition.offset=t.position.offset-e.position.offset,t._cloneOperation instanceof l.a&&e._cloneOperation instanceof l.a&&t._cloneOperation.sourcePosition.offset>e._cloneOperation.sourcePosition.offset&&n._cloneOperation.sourcePosition.offset--,[n]}}return n.i(i.c)(t,e,r)}),n.i(i.b)(m.a,v.a,(t,e,r)=>"same"===n.i(k.a)(e.position.path,t.position.getParentPath())?[A()]:n.i(i.c)(t,e,r)),n.i(i.b)(m.a,w.a,(t,e,r)=>{const o="same"===n.i(k.a)(t.position.getParentPath(),e.range.start.getParentPath()),a=e.range.start.offset<t.position.offset&&e.range.end.offset>=t.position.offset;if(o&&a)return[A()];if("same"===n.i(k.a)(t.position.getParentPath(),e.range.end.getShiftedBy(-1).path)){const n=t.clone(),i=s.a.createFromPosition(e.range.start);i.path.push(e.howMany-1);const r=i.getShiftedBy(1);n._cloneOperation.position=r;const o=s.a.createFromPosition(i);o.path.push(t.position.offset),n._moveOperation.sourcePosition=o;const a=s.a.createFromPosition(r);return a.path.push(0),n._moveOperation.targetPosition=a,[n]}return n.i(i.c)(t,e,r)}),n.i(i.b)(m.a,h.a,(t,e)=>{t=t.clone();const n=new s.a(t.position.root,t.position.path.slice(0,-1));if(t._cloneOperation instanceof c.a)for(let i of e.operations)if(i.range.containsPosition(n)||i.range.start.isEqual(n)){null!==i.newValue?t._cloneOperation.nodes.getNode(0).setAttribute(i.key,i.newValue):t._cloneOperation.nodes.getNode(0).removeAttribute(i.key);break}return[t]}),n.i(i.b)(v.a,m.a,(t,e,r)=>{if("same"===n.i(k.a)(t.position.path,e.position.getParentPath())){const n=[e.getReversed(),t.clone()];return n[1].operations[1].targetPosition.path[0]++,n}return n.i(i.c)(t,e,r)}),n.i(i.b)(b.a,h.a,(t,e)=>{const n=[t.clone()];return e.range.containsPosition(t.position)&&n.push(C(t,e)),n}),n.i(i.b)(w.a,m.a,(t,e,r)=>{const s="same"===n.i(k.a)(t.range.start.getParentPath(),e.position.getParentPath()),o=t.range.start.offset<e.position.offset&&t.range.end.offset>=e.position.offset;if(s&&o)return[e.getReversed(),t.clone()];if("same"===n.i(k.a)(e.position.getParentPath(),t.range.end.getShiftedBy(-1).path)){const e=t.clone();return e._insertOperation.position.offset++,e._moveOperation.howMany++,e._moveOperation.targetPosition.path[e._moveOperation.targetPosition.path.length-2]++,[e]}return n.i(i.c)(t,e,r)}),n.i(i.b)(y.a,m.a,(t,e,r)=>{const o=new s.a(e.position.root,e.position.path.slice(0,-1)),a=n.i(i.c)(t,e,r);if(t.operations[0].position.isEqual(o)){const e=t.clone();e.operations[0].position=t.operations[0].position.getShiftedBy(1),a.push(e)}return a}),n.i(i.b)(m.a,y.a,(t,e)=>{t=t.clone();const n=new s.a(t.position.root,t.position.path.slice(0,-1));return t._cloneOperation instanceof c.a&&e.operations[0].position.isEqual(n)&&(t._cloneOperation.nodes.getNode(0).name=e.operations[0].newName),[t]}),n.i(i.b)(_.a,m.a,(t,e,r)=>{const s=n.i(i.c)(t,e,r),o=e._cloneOperation.position;for(let t of s)for(let e of t.operations){e.sourcePosition.getShiftedBy(e.howMany).isEqual(o)&&(e.howMany+=1)}return s}),n.i(i.b)(m.a,_.a,(t,e,r)=>{e=e.clone();const s=t._cloneOperation.position;for(let t of e.operations){t.sourcePosition.getShiftedBy(t.howMany).isEqual(s)&&(t.howMany+=1)}return n.i(i.c)(t,e,r)})},function(t,e,n){"use strict";var i=n(21),r=n(18),s=n(17),o=n(106),a=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class c extends i.a{get type(){return"marker"}get _reverseDeltaClass(){return c}static get className(){return"engine.model.delta.MarkerDelta"}}function l(t,e,n,i){const r=t.document,s=new c,a=new o.a(e,n,i,r.markers,r.version);t.addDelta(s),s.addOperation(a),r.applyOperation(a)}e.a=c,n.i(s.b)("setMarker",function(t,e){const n="string"==typeof t?t:t.name,i=this.document.markers.get(n);if(!e&&!i)throw new a.a("batch-setMarker-no-range: Range parameter is required when adding a new marker.");const r=i?i.getRange():null;return e?l(this,n,r,e):l(this,n,null,r),this}),n.i(s.b)("removeMarker",function(t){const e="string"==typeof t?t:t.name;if(!this.document.markers.has(e))throw new a.a("batch-removeMarker-no-marker: Trying to remove marker that does not exist.");return l(this,e,this.document.markers.get(e).getRange(),null),this}),r.a.register(c)},function(t,e,n){"use strict";n(299),n(300);var i=n(2),r=n(1),s=n(308),o=n(17),a=n(303),c=n(304),l=n(309),u=n(40),h=n(305),d=n(92),f=n(7),p=n(0),g=n(4),m=n(265);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const b="$graveyard";class w{constructor(){this.version=0,this.schema=new l.a,this.history=new a.a(this),this.markers=new h.a,this.selection=new c.a(this),this._pendingChanges=[],this.roots=new Map,this.selection.on("change:range",()=>{for(let t of this.selection.getRanges())if(!this._validateSelectionRange(t))throw new p.a("document-selection-wrong-position: Range from document selection starts or ends at incorrect position.",{range:t})}),this.createRoot("$root",b)}get graveyard(){return this.getRoot(b)}applyOperation(t){if(t.baseVersion!==this.version)throw new p.a("model-document-applyOperation-wrong-version: Only operations with matching versions can be applied.",{operation:t});let e=t._execute();this.version++,this.history.addDelta(t.delta),e&&this.fire("change",t.type,e,t.delta.batch,t.delta.type)}batch(t){return new o.a(this,t)}createRoot(t="$root",e="main"){if(this.roots.has(e))throw new p.a("model-document-createRoot-name-exists: Root with specified name already exists.",{name:e});const n=new s.a(this,t,e);return this.roots.set(e,n),n}destroy(){this.selection.destroy(),this.stopListening()}enqueueChanges(t){if(this._pendingChanges.push(t),1==this._pendingChanges.length){for(;this._pendingChanges.length;)this._pendingChanges[0](),this._pendingChanges.shift();this.fire("changesDone")}}getRoot(t="main"){if(!this.roots.has(t))throw new p.a("model-document-getRoot-root-not-exist: Root with specified name does not exist.",{name:t});return this.roots.get(t)}hasRoot(t){return this.roots.has(t)}getRootNames(){return Array.from(this.roots.keys()).filter(t=>t!=b)}getNearestSelectionRange(t,e="both"){if(this.schema.check({name:"$text",inside:t}))return new i.a(t);let n,r;"both"!=e&&"backward"!=e||(n=new u.a({startPosition:t,direction:"backward"})),"both"!=e&&"forward"!=e||(r=new u.a({startPosition:t}));for(let t of function*(t,e){let n=!1;for(;!n;){if(n=!0,t){const e=t.next();e.done||(n=!1,yield{walker:t,value:e.value})}if(e){const t=e.next();t.done||(n=!1,yield{walker:e,value:t.value})}}}(n,r)){const e=t.walker==n?"elementEnd":"elementStart",r=t.value;if(r.type==e&&this.schema.objects.has(r.item.name))return i.a.createOn(r.item);if(this.schema.check({name:"$text",inside:r.nextPosition}))return new i.a(r.nextPosition)}return null}toJSON(){const t=n.i(d.a)(this);return t.selection="[engine.model.LiveSelection]",t}_getDefaultRoot(){for(let t of this.roots.values())if(t!==this.graveyard)return t;return this.graveyard}_getDefaultRange(){const t=this._getDefaultRoot(),e=new r.a(t,[0]);return this.getNearestSelectionRange(e)||new i.a(e)}_validateSelectionRange(t){return v(t.start)&&v(t.end)}}function v(t){const e=t.textNode;if(e){const i=e.data,r=t.offset-e.startOffset;return!n.i(m.a)(i,r)&&!n.i(m.b)(i,r)}return!0}e.a=w,n.i(g.a)(w,f.a)},function(t,e,n){"use strict";var i=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class{constructor(){this._deltas=[],this._historyPoints=new Map}addDelta(t){if(t.operations.length>0&&!this._historyPoints.has(t.baseVersion)){const e=this._deltas.length;this._deltas[e]=t,this._historyPoints.set(t.baseVersion,e)}}*getDeltas(t=0,e=Number.POSITIVE_INFINITY){if(0===this._deltas.length)return;let n=this._getIndex(t);if(-1!=n)for(;n<this._deltas.length;){const t=this._deltas[n++];if(t.baseVersion>=e)break;yield t}}getDelta(t){let e=this._historyPoints.get(t);if(void 0===e)return null;const n=[];for(;e<this._deltas.length;e++){const i=this._deltas[e];if(i.baseVersion!=t)break;n.push(i)}return 0===n.length?null:n}removeDelta(t){this.updateDelta(t,[])}updateDelta(t,e){const n=this.getDelta(t);if(null===n)return;for(let n of e)n.baseVersion=t;this._deltas.splice(this._getIndex(t),n.length,...e);const i=e.length-n.length;for(let e of this._historyPoints.keys())e>t&&this._historyPoints.set(e,this._historyPoints.get(e)+i)}_getIndex(t){let e=this._historyPoints.get(t);if(void 0===e){const e=this._deltas[this._deltas.length-1],n=e.baseVersion+e.operations.length;if(t<0||t>=n)return-1;throw new i.a("model-history-wrong-version: Given base version points to the middle of a delta.")}return e}}},function(t,e,n){"use strict";var i=n(1),r=n(2),s=n(161),o=n(24),a=n(71),c=n(148),l=n(0),u=n(36),h=n(56);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const d="selection:",f=new Set(["addAttribute","removeAttribute","changeAttribute","addRootAttribute","removeRootAttribute","changeRootAttribute"]);class p extends h.a{constructor(t){super(),this._document=t,this._attributePriority=new Map,this.listenTo(this._document,"change",(t,e)=>{f.has(e)&&this._updateAttributes(!1)})}get isCollapsed(){return 0===this._ranges.length||super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().start}get rangeCount(){return this._ranges.length?this._ranges.length:1}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}addRange(t,e=!1){super.addRange(t,e),this.refreshAttributes()}removeAllRanges(){super.removeAllRanges(),this.refreshAttributes()}setRanges(t,e=!1){super.setRanges(t,e),this.refreshAttributes()}setAttribute(t,e){if(this.isCollapsed&&0===this.anchor.parent.childCount&&this._storeAttribute(t,e),this._setAttribute(t,e)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}removeAttribute(t){if(this.isCollapsed&&0===this.anchor.parent.childCount&&this._removeStoredAttribute(t),this._removeAttribute(t)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}setAttributesTo(t){t=n.i(c.a)(t),this.isCollapsed&&0===this.anchor.parent.childCount&&this._setStoredAttributesTo(t);const e=this._setAttributesTo(t);if(e.size>0){const t=Array.from(e);this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}clearAttributes(){this.setAttributesTo([])}refreshAttributes(){this._updateAttributes(!0)}static createFromSelection(t){const e=new this(t._document);return e.setTo(t),e}_popRange(){this._ranges.pop().detach()}_pushRange(t){const e=this._prepareRange(t);e&&this._ranges.push(e)}_prepareRange(t){if(!(t instanceof r.a))throw new l.a("model-selection-added-not-range: Trying to add an object that is not an instance of Range.");if(t.root==this._document.graveyard)return void u.a.warn("model-selection-range-in-graveyard: Trying to add a Range that is in the graveyard root. Range rejected.");this._checkRange(t);const e=s.a.createFromRange(t);return this.listenTo(e,"change",(t,n)=>{e.root==this._document.graveyard&&this._fixGraveyardSelection(e,n),this.fire("change:range",{directChange:!1})}),e}_updateAttributes(t){const e=n.i(c.a)(this._getSurroundingAttributes()),i=n.i(c.a)(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(let[t,e]of this._attributePriority)"low"==e&&(this._attrs.delete(t),this._attributePriority.delete(t));this._setAttributesTo(e,!1);const r=[];for(let[t,e]of this.getAttributes())i.has(t)&&i.get(t)===e||r.push(t);for(let[t]of i)this.hasAttribute(t)||r.push(t);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}static _getStoreAttributeKey(t){return d+t}_setAttribute(t,e,n=!0){const i=n?"normal":"low";return("low"!=i||"normal"!=this._attributePriority.get(t))&&(super.getAttribute(t)!==e&&(this._attrs.set(t,e),this._attributePriority.set(t,i),!0))}_removeAttribute(t,e=!0){const n=e?"normal":"low";return("low"!=n||"normal"!=this._attributePriority.get(t))&&(!!super.hasAttribute(t)&&(this._attrs.delete(t),this._attributePriority.set(t,n),!0))}_setAttributesTo(t,e=!0){const n=new Set;for(let[i,r]of this.getAttributes())t.get(i)!==r&&this._removeAttribute(i,e)&&n.add(i);for(let[i,r]of t){this._setAttribute(i,r,e)&&n.add(i)}return n}*_getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&0===t.childCount)for(let e of t.getAttributeKeys())if(0===e.indexOf(d)){yield[e.substr(d.length),t.getAttribute(e)]}}_removeStoredAttribute(t){const e=p._getStoreAttributeKey(t);this._document.batch().removeAttribute(this.anchor.parent,e)}_storeAttribute(t,e){const n=p._getStoreAttributeKey(t);this._document.batch().setAttribute(this.anchor.parent,n,e)}_setStoredAttributesTo(t){const e=this.anchor.parent,n=this._document.batch();for(let[t]of this._getStoredAttributes()){const i=p._getStoreAttributeKey(t);n.removeAttribute(e,i)}for(let[i,r]of t){const t=p._getStoreAttributeKey(i);n.setAttribute(e,t,r)}}_getSurroundingAttributes(){const t=this.getFirstPosition();let e=null;if(this.isCollapsed){const n=t.textNode?t.textNode:t.nodeBefore,i=t.textNode?t.textNode:t.nodeAfter;if((e=g(n))||(e=g(i)),!e){let t=n;for(;t&&!e;)e=g(t=t.previousSibling)}if(!e){let t=i;for(;t&&!e;)e=g(t=t.nextSibling)}e||(e=this._getStoredAttributes())}else{const t=this.getFirstRange();for(let n of t)"text"==n.type&&null===e&&(e=n.item.getAttributes())}return e}_fixGraveyardSelection(t,e){const n=t.start.path,s=e.start.path.length-(n.length-2),o=e.start.path.slice(0,s);o[o.length-1]-=n[1];const a=new i.a(e.root,o);let c=this._document.getNearestSelectionRange(a);c||(c=new r.a(new i.a(a.root,[0])));const l=this._prepareRange(c),u=this._ranges.indexOf(t);t.detach(),this._ranges.splice(u,1,l)}}function g(t){return t instanceof a.a||t instanceof o.a?t.getAttributes():null}e.a=p},function(t,e,n){"use strict";var i=n(161),r=n(1),s=n(2),o=n(7),a=n(0),c=n(4);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class l{constructor(){this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(t){return this._markers.has(t)}get(t){return this._markers.get(t)||null}set(t,e){const n=t instanceof u?t.name:t,r=this._markers.get(n);if(r){if(r.getRange().isEqual(e))return r;this.remove(n)}const s=i.a.createFromRange(e),o=new u(n,s);return this._markers.set(n,o),this.fire("add:"+n,o),o}remove(t){const e=t instanceof u?t.name:t,n=this._markers.get(e);return!!n&&(this._markers.delete(e),this.fire("remove:"+e,n),this._destroyMarker(n),!0)}*getMarkersAtPosition(t){for(let e of this)e.getRange().containsPosition(t)&&(yield e)}destroy(){for(let t of this._markers.values())this._destroyMarker(t);this._markers=null,this.stopListening()}*getMarkersGroup(t){for(let e of this._markers.values())e.name.startsWith(t+":")&&(yield e)}_destroyMarker(t){t.stopListening(),t._liveRange.detach(),t._liveRange=null}}e.a=l,n.i(c.a)(l,o.a);class u{constructor(t,e){this.name=t,this._liveRange=e,this._liveRange.delegate("change").to(this)}getStart(){if(!this._liveRange)throw new a.a("marker-destroyed: Operating on destroyed marker instance.");return r.a.createFromPosition(this._liveRange.start)}getEnd(){if(!this._liveRange)throw new a.a("marker-destroyed: Operating on destroyed marker instance.");return r.a.createFromPosition(this._liveRange.end)}getRange(){if(!this._liveRange)throw new a.a("marker-destroyed: Operating on destroyed marker instance.");return s.a.createFromRange(this._liveRange)}}n.i(c.a)(u,o.a)},function(t,e,n){"use strict";var i=n(69),r=n(38),s=n(106),o=n(27),a=n(70),c=n(32),l=n(107),u=n(39),h=n(108),d=n(109);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const f={};f[i.a.className]=i.a,f[r.a.className]=r.a,f[s.a.className]=s.a,f[o.a.className]=o.a,f[a.a.className]=a.a,f[c.a.className]=c.a,f[l.a.className]=l.a,f[u.a.className]=u.a,f[h.a.className]=h.a,f[d.a.className]=d.a;e.a=class{static fromJSON(t,e){return f[t.__className].fromJSON(t,e)}}},function(t,e,n){"use strict";var i=n(38),r=n(69),s=n(109),o=n(108),a=n(106),c=n(27),l=n(39),u=n(70),h=n(2),d=n(60);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=function(t,e,n){let l,u;t instanceof i.a?l=f.InsertOperation:t instanceof r.a?l=f.AttributeOperation:t instanceof s.a?l=f.RootAttributeOperation:t instanceof o.a?l=f.RenameOperation:t instanceof a.a?l=f.MarkerOperation:t instanceof c.a?l=f.MoveOperation:u=p;l&&(u=e instanceof i.a?l.InsertOperation:e instanceof r.a?l.AttributeOperation:e instanceof s.a?l.RootAttributeOperation:e instanceof o.a?l.RenameOperation:e instanceof a.a?l.MarkerOperation:e instanceof c.a?l.MoveOperation:p);let h=u(t,e,n);return function(t,e){for(let n=0;n<e.length;n++)e[n].baseVersion=t+n+1;return e}(t.baseVersion,h)};const f={InsertOperation:{InsertOperation(t,e,n){const i=t.clone();return i.position=i.position._getTransformedByInsertion(e.position,e.nodes.maxOffset,!n),[i]},AttributeOperation:p,RootAttributeOperation:p,RenameOperation:p,MarkerOperation:p,MoveOperation(t,e,n){const i=t.clone();return i.position=t.position._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!n,e.isSticky),[i]}},AttributeOperation:{InsertOperation:(t,e)=>t.range._getTransformedByInsertion(e.position,e.nodes.maxOffset,!0,!1).reverse().map(e=>new r.a(e,t.key,t.oldValue,t.newValue,t.baseVersion)),AttributeOperation(t,e,n){if(t.key===e.key){let i=t.range.getDifference(e.range).map(e=>new r.a(e,t.key,t.oldValue,t.newValue,t.baseVersion));const s=t.range.getIntersection(e.range);return s&&(n?i.push(new r.a(s,e.key,e.newValue,t.newValue,t.baseVersion)):0===i.length&&i.push(new u.a(0))),i}return[t.clone()]},RootAttributeOperation:p,RenameOperation:p,MarkerOperation:p,MoveOperation(t,e){const n=h.a.createFromPositionAndShift(e.sourcePosition,e.howMany);let i=[];e instanceof l.a&&e._needsHolderElement&&t.range.root==e.targetPosition.root&&t.range.start.path[0]>=e._holderElementOffset&&((t=t.clone()).range.start.path[0]++,t.range.end.path[0]++);const s=m(t.range.getDifference(n)),o=t.range.getIntersection(n);return null!==s&&(s.start=s.start._getTransformedByDeletion(e.sourcePosition,e.howMany),s.end=s.end._getTransformedByDeletion(e.sourcePosition,e.howMany),i=s._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,!0,!1).reverse()),null!==o&&(o.start=o.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),o.end=o.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),i.push(o)),i.map(e=>new r.a(e,t.key,t.oldValue,t.newValue,t.baseVersion))}},RootAttributeOperation:{InsertOperation:p,AttributeOperation:p,RootAttributeOperation:(t,e,n)=>t.root!==e.root||t.key!==e.key||(t.newValue===e.newValue||n)&&t.newValue!==e.newValue?[t.clone()]:[new u.a(t.baseVersion)],RenameOperation:p,MarkerOperation:p,MoveOperation:p},RenameOperation:{InsertOperation(t,e){const n=t.clone();return n.position=n.position._getTransformedByInsertion(e.position,e.nodes.maxOffset,!0),[n]},AttributeOperation:p,RootAttributeOperation:p,RenameOperation(t,e,n){const i=t.clone();if(t.position.isEqual(e.position)){if(!n)return[new u.a(t.baseVersion)];i.oldName=e.newName}return[i]},MarkerOperation:p,MoveOperation(t,e){const n=t.clone(),i=n.position.isEqual(e.sourcePosition);return n.position=n.position._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!0,i),[n]}},MarkerOperation:{InsertOperation(t,e){const n=t.clone();return n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertion(e.position,e.nodes.maxOffset,!1,!1)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertion(e.position,e.nodes.maxOffset,!1,!1)[0]),[n]},AttributeOperation:p,RootAttributeOperation:p,RenameOperation:p,MarkerOperation(t,e,n){const i=t.clone();if(t.name==e.name){if(!n)return[new u.a(t.baseVersion)];i.oldRange=e.newRange}return[i]},MoveOperation(t,e){const n=t.clone();if(n.oldRange){const t=n.oldRange._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany);n.oldRange=h.a.createFromRanges(t)}if(n.newRange){const t=n.newRange._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany);n.newRange=h.a.createFromRanges(t)}return[n]}},MoveOperation:{InsertOperation(t,e,n){let i=h.a.createFromPositionAndShift(t.sourcePosition,t.howMany);i=i._getTransformedByInsertion(e.position,e.nodes.maxOffset,!1,t.isSticky)[0];let r=new t.constructor(i.start,i.end.offset-i.start.offset,t instanceof l.a?t.baseVersion:t.targetPosition._getTransformedByInsertion(e.position,e.nodes.maxOffset,!n),t instanceof l.a?void 0:t.baseVersion);return r.isSticky=t.isSticky,t instanceof l.a&&(r._needsHolderElement=t._needsHolderElement,r._holderElementOffset=t._holderElementOffset),[r]},AttributeOperation:p,RootAttributeOperation:p,RenameOperation:p,MarkerOperation:p,MoveOperation(t,e,i){if(g(t,e)&&g(e,t))return[e.getReversed()];if(t instanceof l.a&&e instanceof l.a){const n=t.targetPosition.path[0],r=e.targetPosition.path[0];(n>r||n==r&&i)&&(t=t.clone()).targetPosition.path[0]++}t instanceof l.a&&!(e instanceof l.a)?i=!0:!(t instanceof l.a)&&e instanceof l.a&&(i=!1);const r=h.a.createFromPositionAndShift(t.sourcePosition,t.howMany),s=h.a.createFromPositionAndShift(e.sourcePosition,e.howMany);let o=[],a=m(r.getDifference(s));a&&(a.start=a.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!t.isSticky,!1),a.end=a.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,t.isSticky,!1),o.push(a));const c=r.getIntersection(s);let f=n.i(d.a)(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath()),p=r.containsPosition(e.targetPosition)||r.start.isEqual(e.targetPosition)&&t.isSticky||r.end.isEqual(e.targetPosition)&&t.isSticky,b=s.containsRange(r)&&(s.containsPosition(t.targetPosition)||s.start.isEqual(t.targetPosition)||s.end.isEqual(t.targetPosition));if(null!==c&&("extension"===f||"same"===f&&i||b)&&!p&&(c.start=c.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),c.end=c.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),a&&r.start.isBefore(s.start)?o.push(c):o.unshift(c)),0===o.length)return t instanceof l.a?((t=t.clone()).howMany=0,t.sourcePosition=e.targetPosition,[t]):[new u.a(t.baseVersion)];let w=t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!i,e.isSticky||b);return o.reverse().map((e,n)=>{let i=new t.constructor(e.start,e.end.offset-e.start.offset,t instanceof l.a?t.baseVersion:w,t instanceof l.a?void 0:t.baseVersion);return i.isSticky=t.isSticky,t instanceof l.a&&(i._needsHolderElement=t._needsHolderElement&&0===n,i._holderElementOffset=t._holderElementOffset),i})}}};function p(t){return[t.clone()]}function g(t,e){return null===t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)}function m(t){return 0===t.length?null:1==t.length?t[0]:(t[0].end=t[t.length-1].end,t[0])}},function(t,e,n){"use strict";var i=n(6);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class extends i.a{constructor(t,e,n="main"){super(e),this._doc=t,this.rootName=n}get document(){return this._doc}is(t,e){return e?"rootElement"==t&&e==this.name||super.is(t,e):"rootElement"==t||super.is(t)}toJSON(){return this.rootName}}},function(t,e,n){"use strict";var i=n(1),r=n(6),s=n(92),o=n(12),a=n(145),c=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class l{constructor(){this.objects=new Set,this.limits=new Set,this._items=new Map,this._extensionChains=new Map,this.registerItem("$root"),this.registerItem("$block"),this.registerItem("$inline"),this.registerItem("$text","$inline"),this.allow({name:"$block",inside:"$root"}),this.allow({name:"$inline",inside:"$block"}),this.registerItem("$clipboardHolder","$root"),this.allow({name:"$inline",inside:"$clipboardHolder"})}allow(t){this._getItem(t.name).allow(l._normalizeQueryPath(t.inside),t.attributes)}disallow(t){this._getItem(t.name).disallow(l._normalizeQueryPath(t.inside),t.attributes)}requireAttributes(t,e){this._getItem(t).requireAttributes(e)}check(t){if(!this.hasItem(t.name))return!1;n.i(o.a)(t.attributes)?0===t.attributes.length&&t.attributes.push(void 0):t.attributes=[t.attributes];const e=l._normalizeQueryPath(t.inside),i=this._extensionChains.get(t.name).map(t=>this._getItem(t));if(!this._getItem(t.name)._checkRequiredAttributes(t.attributes))return!1;for(let n of t.attributes)for(let t of i)if(t._hasMatchingPath("disallow",e,n))return!1;for(let n of t.attributes){let t=!1;for(let r of i)if(r._hasMatchingPath("allow",e,n)){t=!0;break}if(!t)return!1}return!0}hasItem(t){return this._items.has(t)}registerItem(t,e){if(this.hasItem(t))throw new c.a("model-schema-item-exists: Item with specified name already exists in schema.");if(e&&!this.hasItem(e))throw new c.a("model-schema-no-item: Item with specified name does not exist in schema.");this._items.set(t,new u(this));const n=this.hasItem(e)?this._extensionChains.get(e).concat(t):[t];this._extensionChains.set(t,n)}itemExtends(t,e){if(!this.hasItem(t)||!this.hasItem(e))throw new c.a("model-schema-no-item: Item with specified name does not exist in schema.");return this._extensionChains.get(t).some(t=>t==e)}_getItem(t){if(!this.hasItem(t))throw new c.a("model-schema-no-item: Item with specified name does not exist in schema.");return this._items.get(t)}static _normalizeQueryPath(t){let e=[];if(n.i(o.a)(t))for(let i of t)i instanceof r.a?e.push(i.name):n.i(a.a)(i)&&e.push(i);else if(t instanceof i.a){let n=t.parent;for(;null!==n;)e.push(n.name),n=n.parent;e.reverse()}else n.i(a.a)(t)&&(e=t.split(" "));return e}}e.a=l;class u{constructor(t){this._schema=t,this._allowed=[],this._disallowed=[],this._requiredAttributes=[]}allow(t,e){this._addPath("_allowed",t,e)}disallow(t,e){this._addPath("_disallowed",t,e)}requireAttributes(t){this._requiredAttributes.push(t)}_addPath(t,e,i){e=e.slice(),n.i(o.a)(i)||(i=[i]);for(let n of i)this[t].push({path:e,attribute:n})}_getPaths(t,e){const n="allow"===t?this._allowed:this._disallowed,i=[];for(let t of n)t.attribute===e&&i.push(t.path);return i}_checkRequiredAttributes(t){let e=!0;for(let n of this._requiredAttributes){e=!0;for(let i of n)if(-1==t.indexOf(i)){e=!1;break}if(e)break}return e}_hasMatchingPath(t,e,n){const i=this._getPaths(t,n);for(const t of i)if(h(this._schema,e,t))return!0;return!1}toJSON(){const t=n.i(s.a)(this);return t._schema="[model.Schema]",t}}function h(t,e,n){let i=n.length-1,r=e.length-1;for(;i>=0&&r>=0;){const s=e[r];if(!t.hasItem(s))return!1;if(!t._extensionChains.get(s).includes(n[i]))return!1;i--,r--}return!0}},function(t,e,n){"use strict";var i=n(59),r=n(317),s=n(162),o=n(166),a=n(57),c=n(36),l=n(165),u=n(316),h=n(313),d=n(314),f=n(312),p=n(4),g=n(31);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class m{constructor(){this.domRoots=new Map,this.selection=new i.a,this.domConverter=new s.a,this.roots=new Map,this.set("isFocused",!1),this.renderer=new r.a(this.domConverter,this.selection),this.renderer.bind("isFocused").to(this,"isFocused"),this._observers=new Map,this.addObserver(l.a),this.addObserver(u.a),this.addObserver(h.a),this.addObserver(d.a),this.addObserver(f.a),n.i(a.h)(this),this.on("render",()=>{this.disableObservers(),this.renderer.render(),this.enableObservers()})}addObserver(t){let e=this._observers.get(t);if(e)return e;e=new t(this),this._observers.set(t,e);for(let[t,n]of this.domRoots)e.observe(n,t);return e.enable(),e}getObserver(t){return this._observers.get(t)}createRoot(t,e="main"){const n="string"==typeof t?t:t.tagName,i=new o.a(n.toLowerCase(),e);return i.document=this,this.roots.set(e,i),i.on("change:children",(t,e)=>this.renderer.markToSync("children",e)),i.on("change:attributes",(t,e)=>this.renderer.markToSync("attributes",e)),i.on("change:text",(t,e)=>this.renderer.markToSync("text",e)),this.domConverter.isElement(t)&&this.attachDomRoot(t,e),i}attachDomRoot(t,e="main"){const n=this.getRoot(e);this.domRoots.set(e,t),this.domConverter.bindElements(t,n),this.renderer.markToSync("children",n),this.renderer.domDocuments.add(t.ownerDocument);for(let n of this._observers.values())n.observe(t,e)}getRoot(t="main"){return this.roots.get(t)}getDomRoot(t="main"){return this.domRoots.get(t)}render(){this.fire("render")}focus(){if(!this.isFocused){const t=this.selection.editableElement;t?(this.domConverter.focus(t),this.render()):c.a.warn("view-focus-no-selection: There is no selection in any editable to focus.")}}disableObservers(){for(let t of this._observers.values())t.disable()}enableObservers(){for(let t of this._observers.values())t.enable()}destroy(){for(let t of this._observers.values())t.destroy()}}e.a=m,n.i(p.a)(m,g.a)},function(t,e,n){"use strict";var i=n(58);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class extends i.a{constructor(t){super(t),this.domEventType="click"}onDomEvent(t){this.fire(t.type,t)}}},function(t,e,n){"use strict";var i=n(47),r=n(59),s=n(22),o=n(139);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this._fireSelectionChangeDoneDebounced=n.i(o.a)(t=>this.document.fire("selectionChangeDone",t),200)}observe(){const t=this.document;var e;t.on("keydown",(n,i)=>{t.selection.isFake&&((e=i.keyCode)==s.a.arrowright||e==s.a.arrowleft||e==s.a.arrowup||e==s.a.arrowdown)&&this.isEnabled&&(i.preventDefault(),this._handleSelectionMove(i.keyCode))},{priority:"lowest"})}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(t){const e=this.document.selection,n=r.a.createFromSelection(e);n.setFake(!1),t!=s.a.arrowleft&&t!=s.a.arrowup||n.collapseToStart(),t!=s.a.arrowright&&t!=s.a.arrowdown||n.collapseToEnd();const i={oldSelection:e,newSelection:n,domSelection:null};this.document.fire("selectionChange",i),this._fireSelectionChangeDoneDebounced(i)}}},function(t,e,n){"use strict";var i=n(58);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class extends i.a{constructor(t){super(t),this.domEventType=["focus","blur"],this.useCapture=!0,t.on("focus",()=>{t.isFocused=!0,this._renderTimeoutId=setTimeout(()=>t.render(),0)}),t.on("blur",(e,n)=>{const i=t.selection.editableElement;null!==i&&i!==n.target||(t.isFocused=!1,t.render())})}onDomEvent(t){this.fire(t.type,t)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}},function(t,e,n){"use strict";var i=n(58),r=n(22);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this.domEventType="keydown"}onDomEvent(t){this.fire("keydown",t,{keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey||t.metaKey,shiftKey:t.shiftKey,get keystroke(){return n.i(r.d)(this)}})}}},function(t,e,n){"use strict";var i=n(58);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class extends i.a{constructor(t){super(t),this.domEventType="mousedown"}onDomEvent(t){this.fire(t.type,t)}}},function(t,e,n){"use strict";var i=n(47),r=n(165),s=n(36),o=n(139);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this.mutationObserver=t.getObserver(r.a),this.document=t,this.selection=t.selection,this.domConverter=t.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=n.i(o.a)(t=>this.document.fire("selectionChangeDone",t),200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._loopbackCounter=0}observe(t){const e=t.ownerDocument;this._documents.has(e)||(this.listenTo(e,"selectionchange",()=>{this._handleSelectionChange(e)}),this._documents.add(e))}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionChange(t){if(!this.isEnabled||!this.document.isFocused)return;this.mutationObserver.flush();const e=t.defaultView.getSelection(),n=this.domConverter.domSelectionToView(e);if(this.selection.isEqual(n))return;if(++this._loopbackCounter>60)return void s.a.warn("selectionchange-infinite-loop: Selection change observer detected an infinite rendering loop.");const i={oldSelection:this.selection,newSelection:n,domSelection:e};this.document.fire("selectionChange",i),this._fireSelectionChangeDoneDebounced(i)}_clearInfiniteLoop(){this._loopbackCounter=0}}},function(t,e,n){"use strict";var i=n(29),r=n(28),s=n(59),o=n(57),a=n(4),c=n(179),l=n(379),u=n(383),h=n(36),d=n(31),f=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class p{constructor(t,e){this.domDocuments=new Set,this.domConverter=t,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=e,this._inlineFiller=null,this.isFocused=!1,this._fakeSelectionContainer=null}markToSync(t,e){if("text"===t)this.domConverter.getCorrespondingDom(e.parent)&&this.markedTexts.add(e);else{if(!this.domConverter.getCorrespondingDom(e))return;if("attributes"===t)this.markedAttributes.add(e);else{if("children"!==t)throw new f.a("view-renderer-unknown-type: Unknown type passed to Renderer.markToSync.");this.markedChildren.add(e)}}}render(){let t;this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?t=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(t=this.selection.getFirstPosition(),this.markedChildren.add(t.parent));for(let e of this.markedTexts)!this.markedChildren.has(e.parent)&&this.domConverter.getCorrespondingDom(e.parent)&&this._updateText(e,{inlineFillerPosition:t});for(let t of this.markedAttributes)this._updateAttrs(t);for(let e of this.markedChildren)this._updateChildren(e,{inlineFillerPosition:t});this._updateSelection(),this._updateFocus(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear(),this._inlineFiller=this._getInlineFillerNode(t)}_getInlineFillerNode(t){if(!t)return void(this._inlineFiller=null);const e=this.domConverter.viewPositionToDom(t);if(!e||!n.i(o.c)(e.parent))throw new f.a("view-renderer-cannot-find-filler: Cannot find filler node by its position.");return e.parent}_getInlineFillerPosition(){const t=this.selection.getFirstPosition();return t.parent.is("text")?r.a.createBefore(this.selection.getFirstPosition().parent):t}_isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),e=this.domConverter.viewPositionToDom(t);return!!(e&&this.domConverter.isText(e.parent)&&n.i(o.c)(e.parent))}_removeInlineFiller(){const t=this._inlineFiller;if(!n.i(o.c)(t))throw new f.a("view-renderer-filler-was-lost: The inline filler node was lost.");n.i(o.f)(t)?t.parentNode.removeChild(t):t.data=t.data.substr(o.d),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),e=t.parent,n=t.offset;if(!this.domConverter.getCorrespondingDomElement(e.root))return!1;if(!e.is("element"))return!1;if(n===e.getFillerOffset())return!1;const r=t.nodeBefore,s=t.nodeAfter;return!(r instanceof i.a||s instanceof i.a)}_updateText(t,e){const n=this.domConverter.getCorrespondingDom(t),i=this.domConverter.viewToDom(t,n.ownerDocument),r=n.data;let s=i.data;const a=e.inlineFillerPosition;a&&a.parent==t.parent&&a.offset==t.index&&(s=o.i+s),r!=s&&(n.data=s)}_updateAttrs(t){const e=this.domConverter.getCorrespondingDom(t),n=Array.from(e.attributes).map(t=>t.name),i=t.getAttributeKeys();for(let n of i)e.setAttribute(n,t.getAttribute(n));for(let i of n)t.hasAttribute(i)||e.removeAttribute(i)}_updateChildren(t,e){const i=this.domConverter,r=i.getCorrespondingDom(t);if(!r)return;const s=r.ownerDocument,a=e.inlineFillerPosition,h=r.childNodes,d=Array.from(i.viewChildrenToDom(t,s,{bind:!0}));if(a&&a.parent==t){const t=d[a.offset];this.domConverter.isText(t)?t.data=o.i+t.data:d.splice(a.offset,0,s.createTextNode(o.i))}const f=n.i(c.a)(h,d,function(t,e){if(t===e)return!0;if(i.isText(t)&&i.isText(e))return t.data===e.data;if(n.i(o.e)(t,i.blockFiller)&&n.i(o.e)(e,i.blockFiller))return!0;return!1});let p=0;for(let t of f)"insert"===t?(n.i(l.a)(r,p,d[p]),p++):"delete"===t?(this.domConverter.unbindDomElement(h[p]),n.i(u.a)(h[p])):p++}_updateSelection(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();const t=this.domConverter.getCorrespondingDomElement(this.selection.editableElement);this.isFocused&&t&&(this.selection.isFake?this._updateFakeSelection(t):(this._removeFakeSelection(),this._updateDomSelection(t)))}_updateFakeSelection(t){const e=t.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=e.createElement("div"),this._fakeSelectionContainer.style.position="fixed",this._fakeSelectionContainer.style.top=0,this._fakeSelectionContainer.style.left="-9999px",this._fakeSelectionContainer.appendChild(e.createTextNode("Â "))),this._fakeSelectionContainer.parentElement||t.appendChild(this._fakeSelectionContainer);const n=this.selection.fakeSelectionLabel||"Â ";this._fakeSelectionContainer.firstChild.data=n;const i=e.getSelection();i.removeAllRanges();const r=e.createRange();r.selectNodeContents(this._fakeSelectionContainer),i.addRange(r),this.domConverter.bindFakeSelection(this._fakeSelectionContainer,this.selection)}_updateDomSelection(t){const e=t.ownerDocument.defaultView.getSelection(),n=e&&this.domConverter.domSelectionToView(e);if(n&&this.selection.isEqual(n))return;if(n&&(i=n,r=this.selection,!i.isCollapsed&&g(i).isEqual(g(r)))){const t={oldSelection:n,currentSelection:this.selection};return void h.a.warn("renderer-skipped-selection-rendering: The selection was not rendered due to its similarity to the current one.",t)}var i,r;const s=this.domConverter.viewPositionToDom(this.selection.anchor),o=this.domConverter.viewPositionToDom(this.selection.focus);e.collapse(s.parent,s.offset),e.extend(o.parent,o.offset)}_removeDomSelection(){for(let t of this.domDocuments){if(t.getSelection().rangeCount){const e=t.activeElement,n=this.domConverter.getCorrespondingViewElement(e);e&&n&&t.getSelection().removeAllRanges()}}}_removeFakeSelection(){const t=this._fakeSelectionContainer;t&&t.remove()}_updateFocus(){if(this.isFocused){const t=this.selection.editableElement;t&&this.domConverter.focus(t)}}}function g(t){const e=s.a.createFromSelection(t),n=e.getRanges();let i=[];for(let t of n)i.push(t.getTrimmed());return e.setRanges(i,e.isBackward),e}e.a=p,n.i(a.a)(p,d.a)},function(t,e,n){"use strict";var i=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class{constructor(t,e,n){if(this.textNode=t,e<0||e>t.data.length)throw new i.a("view-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.");if(n<0||e+n>t.data.length)throw new i.a("view-textproxy-wrong-length: Given length value is incorrect.");this.data=t.data.substring(e,e+n),this.offsetInText=e}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(t){return"textProxy"==t}getAncestors(t={includeNode:!1,parentFirst:!1}){const e=[];let n=t.includeNode?this.textNode:this.parent;for(;null!==n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}}},function(t,e,n){"use strict";var i=n(3),r=n(320),s=n(321);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{static get pluginName(){return"enter/enter"}init(){const t=this.editor,e=t.editing.view;e.addObserver(s.a),t.commands.set("enter",new r.a(t)),this.listenTo(e,"enter",(e,n)=>{t.execute("enter"),n.preventDefault()},{priority:"low"})}}},function(t,e,n){"use strict";var i=n(11),r=n(1);function s(t,e,n){if(n.isAtEnd){const e=n.parent,i=new e.constructor(e.name,e.getAttributes());t.insert(r.a.createAfter(n.parent),i)}else t.split(n);e.collapse(n.parent.nextSibling)}e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{_doExecute(){const t=this.editor.document,e=t.batch();t.enqueueChanges(()=>{!function(t,e,n,i){const r=n.isCollapsed,o=n.getFirstRange(),a=o.start.parent,c=o.end.parent;if(!i.limits.has(a.name)&&!i.limits.has(c.name))if(a.root!=a)if(r)s(e,n,o.start);else{const i=o.start.isAtStart&&o.end.isAtEnd,r=a==c;t.deleteContent(n,e,{merge:i}),i||(r?s(e,n,n.focus):n.collapse(c))}else r||t.deleteContent(n,e)}(this.editor.data,e,t.selection,t.schema),this.fire("afterExecute",{batch:e})})}}},function(t,e,n){"use strict";var i=n(47),r=n(113),s=n(22);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),t.on("keydown",(e,n)=>{this.isEnabled&&n.keyCode==s.a.enter&&t.fire("enter",new r.a(t,n.domEvent))})}observe(){}}},function(t,e,n){"use strict";var i=n(74),r=n(324),s=n(3),o=n(365),a=n(356),c=n(75),l=n(5),u=n(509);n.n(u);function h(t,e){return Array.prototype.concat(...t.map(t=>[t,e]))}e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends s.a{static get requires(){return[i.a,r.a]}static get pluginName(){return"heading/heading"}init(){const t=this.editor,e=new c.a,i=this._getLocalizedOptions(),r=[],s=t.t,u=s("Choose heading"),d=s("Heading");for(let n of i){const i=t.commands.get(n.modelElement),s=new o.a({commandName:n.modelElement,label:n.title,class:n.class});s.bind("isActive").to(i,"value"),e.add(s),r.push(i)}const f=new o.a({withText:!0,items:e,tooltip:d});f.bind("isEnabled").to(...h(r,"isEnabled"),(...t)=>t.some(t=>t)),f.bind("label").to(...h(r,"value"),(...t)=>{const e=t.findIndex(t=>t);return i[e]?i[e].title:u}),t.ui.componentFactory.add("headings",e=>{const i=n.i(a.a)(f,e);return l.a.extend(i.template,{attributes:{class:["ck-heading-dropdown"]}}),this.listenTo(i,"execute",e=>{t.execute(e.source.commandName),t.editing.view.focus()}),i})}_getLocalizedOptions(){const t=this.editor,e=t.t,n={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3")};return t.config.get("heading.options").map(t=>{const e=n[t.title];return e&&e!=t.title&&(t=Object.assign({},t,{title:e})),t})}}},function(t,e,n){"use strict";var i=n(2),r=n(11),s=n(56),o=n(1),a=n(77);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends r.a{constructor(t,e){super(t),Object.assign(this,e),this.set("value",!1),this.listenTo(t.document,"changesDone",()=>{this.refreshValue(),this.refreshState()})}_doExecute(t={}){const e=this.editor,n=e.document,r=this.value;n.enqueueChanges(()=>{const o=t.batch||n.batch();for(let t of n.selection.getSelectedBlocks())if(r){if(t.is(this.modelElement)){const n=new s.a;n.addRange(i.a.createIn(t)),e.execute("paragraph",{selection:n,batch:o})}}else t.is(this.modelElement)||o.rename(t,this.modelElement)})}refreshValue(){const t=n.i(a.a)(this.editor.document.selection.getSelectedBlocks());this.value=!!t&&t.is(this.modelElement)}_checkEnabled(){const t=n.i(a.a)(this.editor.document.selection.getSelectedBlocks());return!!t&&this.editor.document.schema.check({name:this.modelElement,inside:o.a.createBefore(t)})}}},function(t,e,n){"use strict";var i=n(3),r=n(45),s=n(54),o=n(74),a=n(323);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const c="paragraph";e.a=class extends i.a{constructor(t){super(t),t.config.define("heading",{options:[{modelElement:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{modelElement:"heading1",viewElement:"h2",title:"Heading 1",class:"ck-heading_heading1"},{modelElement:"heading2",viewElement:"h3",title:"Heading 2",class:"ck-heading_heading2"},{modelElement:"heading3",viewElement:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[o.a]}init(){const t=this.editor,e=t.data,i=t.editing,o=t.config.get("heading.options");for(let l of o)l.modelElement!==c&&(t.document.schema.registerItem(l.modelElement,"$block"),n.i(r.a)().for(e.modelToView,i.modelToView).fromElement(l.modelElement).toElement(l.viewElement),n.i(s.a)().for(e.viewToModel).fromElement(l.viewElement).toElement(l.modelElement),t.commands.set(l.modelElement,new a.a(t,l)))}afterInit(){const t=this.editor,e=t.commands.get("enter"),n=t.config.get("heading.options");e&&this.listenTo(e,"afterExecute",(e,i)=>{const r=t.document.selection.getFirstPosition().parent,s=i.batch;n.some(t=>r.is(t.modelElement))&&!r.is(c)&&0===r.childCount&&s.rename(r,c)})}}},function(t,e,n){"use strict";var i=n(3),r=n(327),s=n(491),o=n(328),a=n(511);n.n(a);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{static get requires(){return[r.a,s.a,o.a]}static get pluginName(){return"image/image"}}},function(t,e,n){"use strict";e.b=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(){return(t,e,n,o)=>{const a=e.input;if(!n.test(a,{name:!0,class:"image"}))return;if(!o.schema.check({name:"image",inside:e.context,attributes:"src"}))return;const c=a.getChild(0);if(!c||"img"!=c.name||!n.test(c,{name:!0,attribute:"src"}))return;n.consume(a,{name:!0,class:"image"}),n.consume(c,{name:!0,attribute:"src"});const l=new i.a("image",{src:c.getAttribute("src")});n.consume(c,{attribute:["alt"]})&&l.setAttribute("alt",c.getAttribute("alt")),e.context.push(l);const u=o.convertChildren(a,n,e),h=r.a.createAt(l,"end");s.a.insert(h,u),e.context.pop(),e.output=l}},e.a=function(t,e){for(let n of t)n.on(`addAttribute:${e}:image`,o),n.on(`changeAttribute:${e}:image`,o),n.on(`removeAttribute:${e}:image`,o)};var i=n(6),r=n(1),s=n(13);function o(t,e,n,i){const r=t.name.split(":"),s=r[0]+":"+r[1];if(!n.consume(e.item,s))return;const o=i.mapper.toViewElement(e.item).getChild(0);"removeAttribute"==r[0]?o.removeAttribute(e.attributeKey):o.setAttribute(e.attributeKey,e.attributeNewValue)}},function(t,e,n){"use strict";var i=n(3),r=n(45),s=n(326),o=n(73),a=n(46),c=n(163);function l(){return new a.a("figure",{class:"image"},new c.a("img"))}e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{init(){const t=this.editor,e=t.document.schema,i=t.data,a=t.editing,c=t.t;e.registerItem("image"),e.requireAttributes("image",["src"]),e.allow({name:"image",attributes:["alt","src"],inside:"$root"}),e.objects.add("image"),n.i(r.a)().for(i.modelToView).fromElement("image").toElement(()=>l()),n.i(r.a)().for(a.modelToView).fromElement("image").toElement(()=>n.i(o.c)(l(),c("image widget"))),n.i(s.a)([a.modelToView,i.modelToView],"src"),n.i(s.a)([a.modelToView,i.modelToView],"alt"),i.viewToModel.on("element:figure",n.i(s.b)())}}},function(t,e,n){"use strict";var i=n(3),r=n(19),s=n(330),o=n(351),a=n(172),c=n(332),l=n(331),u=n(168),h=n(517),d=n.n(h),f=n(510);n.n(f);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{static get requires(){return[s.a]}static get pluginName(){return"image/imagetextalternative"}init(){this._createButton();const t=this.editor.config.get("image.defaultToolbar");return t&&(t.length&&t.push("|"),t.push("imageTextAlternative")),this._createBalloonPanel().then(t=>{this.balloonPanel=t,this.form=t.content.get(0)})}_createButton(){const t=this.editor,e=t.commands.get("imageTextAlternative"),n=t.t;t.ui.componentFactory.add("imageTextAlternative",t=>{const i=new r.a(t);return i.set({label:n("Change image text alternative"),icon:d.a,tooltip:!0}),i.bind("isEnabled").to(e,"isEnabled"),this.listenTo(i,"execute",()=>this._showBalloonPanel()),i})}_createBalloonPanel(){const t=this.editor,e=new u.a(t),i=new l.a(t.locale);this.listenTo(i,"submit",()=>{t.execute("imageTextAlternative",{newValue:i.lebeledInput.inputView.element.value}),this._hideBalloonPanel()});const r=t.plugins.get(c.a);return r&&this.listenTo(e,"change:isVisible",()=>{e.isVisible?(r.hide(),r.isEnabled=!1):(r.show(),r.isEnabled=!0)}),this.listenTo(i,"cancel",()=>this._hideBalloonPanel()),n.i(o.a)({emitter:e,activator:()=>e.isVisible,callback:()=>this._hideBalloonPanel()}),n.i(a.a)({emitter:e,activator:()=>e.isVisible,contextElement:e.element,callback:()=>this._hideBalloonPanel()}),Promise.all([e.content.add(i),t.ui.view.body.add(e)]).then(()=>e)}_showBalloonPanel(){const t=this.editor.commands.get("imageTextAlternative");this.form.lebeledInput.value=t.value||"",this.balloonPanel.attach(),this.form.lebeledInput.select()}_hideBalloonPanel(){const t=this.editor;this.balloonPanel.detach(),t.editing.view.focus()}}},function(t,e,n){"use strict";var i=n(11),r=n(73);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this.set("value",!1),this.listenTo(t.document,"changesDone",()=>{this._updateValue(),this.refreshState()})}_updateValue(){const t=this.editor.document.selection.getSelectedElement();n.i(r.b)(t)&&t.hasAttribute("alt")?this.value=t.getAttribute("alt"):this.value=!1}_checkEnabled(){const t=this.editor.document.selection.getSelectedElement();return n.i(r.b)(t)}_doExecute(t){const e=this.editor.document,n=e.selection.getSelectedElement();e.enqueueChanges(()=>{(t.batch||e.batch()).setAttribute(n,"alt",t.newValue)})}}},function(t,e,n){"use strict";var i=n(329),r=n(3);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends r.a{init(){this.editor.commands.set("imageTextAlternative",new i.a(this.editor))}}},function(t,e,n){"use strict";var i=n(9),r=n(19),s=n(5),o=n(175),a=n(174),c=n(173);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t);const e=this.locale.t;this.lebeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(e("Save")),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(e("Cancel"),"cancel"),s.a.extend(this.saveButtonView.template,{attributes:{class:["ck-button-action"]}}),this.template=new s.a({tag:"form",attributes:{class:["cke-text-alternative-form"]},children:[this.lebeledInput,{tag:"div",attributes:{class:["cke-text-alternative-form__actions"]},children:[this.saveButtonView,this.cancelButtonView]}]}),n.i(c.a)({view:this})}_createButton(t,e){const n=new r.a(this.locale);return n.label=t,n.withText=!0,e&&n.delegate("execute").to(this,e),n}_createLabeledInputView(){const t=this.locale.t,e=new o.a(this.locale,a.a);return e.label=t("Text alternative"),e}}},function(t,e,n){"use strict";var i=n(5),r=n(3),s=n(177),o=n(73),a=n(168);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends r.a{static get pluginName(){return"image/imagetoolbar"}constructor(t){super(t),t.config.set("image.defaultToolbar",[]),this.isEnabled=!0}afterInit(){const t=this.editor,e=t.config.get("image.toolbar")||t.config.get("image.defaultToolbar");if(!e.length)return;const n=this._panel=new a.a(t),r=[],o=new s.a;return i.a.extend(n.template,{attributes:{class:["ck-toolbar__container"]}}),r.push(n.content.add(o)),r.push(o.fillFromConfig(e,t.ui.componentFactory)),r.push(t.ui.view.body.add(n)),this.listenTo(this.editor.editing.view,"render",()=>{this.isEnabled&&this.show()},{priority:"low"}),this.listenTo(t.ui.focusTracker,"change:isFocused",(t,e,n,i)=>{!i&&n&&this.isEnabled&&this.show()}),Promise.all(r)}show(){const t=this.editor.editing.view.selection.getSelectedElement();t&&n.i(o.a)(t)&&this._panel.attach()}hide(){this._panel.detach()}}},function(t,e,n){"use strict";var i=n(3),r=n(311),s=n(335),o=n(170),a=n(172),c=n(19),l=n(176),u=n(336),h=n(518),d=n.n(h),f=n(519),p=n.n(f),g=n(512);n.n(g);function m(t){return t.parent.getAncestors().find(t=>t instanceof o.a)}e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{static get requires(){return[s.a]}static get pluginName(){return"link/link"}init(){this.editor.editing.view.addObserver(r.a),this.balloonPanelView=this._createBalloonPanel(),this.formView=this._createForm(),this._createToolbarLinkButton(),this._createToolbarUnlinkButton()}_createToolbarLinkButton(){const t=this.editor,e=t.commands.get("link"),n=t.t;t.keystrokes.set("CTRL+K",()=>this._showPanel()),t.ui.componentFactory.add("link",t=>{const i=new c.a(t);return i.isEnabled=!0,i.label=n("Link"),i.icon=d.a,i.keystroke="CTRL+K",i.tooltip=!0,i.bind("isEnabled").to(e,"isEnabled"),this.listenTo(i,"execute",()=>this._showPanel()),i})}_createToolbarUnlinkButton(){const t=this.editor,e=t.t,n=t.commands.get("unlink");t.ui.componentFactory.add("unlink",i=>{const r=new c.a(i);return r.isEnabled=!1,r.label=e("Unlink"),r.icon=p.a,r.tooltip=!0,r.bind("isEnabled").to(n,"isEnabled"),this.listenTo(r,"execute",()=>t.execute("unlink")),r})}_createBalloonPanel(){const t=this.editor,e=t.editing.view,i=new l.a(t.locale);return i.maxWidth=300,t.ui.focusTracker.add(i.element),this.listenTo(e,"click",()=>{const t=e.selection,n=m(t.getFirstPosition());t.isCollapsed&&n&&(this._attachPanelToElement(),this.listenTo(e,"render",()=>{const e=m(t.getFirstPosition());t.isCollapsed&&n===e?this._attachPanelToElement(n):this._hidePanel()}),this.listenTo(i,"change:isVisible",()=>this.stopListening(e,"render")))}),t.keystrokes.set("Tab",(t,e)=>{i.isVisible&&!this.formView.focusTracker.isFocused&&(this.formView.focus(),e())}),t.keystrokes.set("Esc",(t,e)=>{i.isVisible&&(this._hidePanel(!0),e())}),n.i(a.a)({emitter:i,activator:()=>i.isVisible,contextElement:i.element,callback:()=>this._hidePanel()}),t.ui.view.body.add(i),i}_createForm(){const t=this.editor,e=new u.a(t.locale);return e.urlInputView.bind("value").to(t.commands.get("link"),"value"),this.listenTo(e,"submit",()=>{t.execute("link",e.urlInputView.inputView.element.value),this._hidePanel(!0)}),this.listenTo(e,"unlink",()=>{t.execute("unlink"),this._hidePanel(!0)}),e.keystrokes.set("Esc",(t,e)=>{this._hidePanel(!0),e()}),this.listenTo(e,"cancel",()=>this._hidePanel(!0)),this.balloonPanelView.content.add(e),e}_attachPanelToElement(t){const e=this.editor.editing.view,n=t||m(e.selection.getFirstPosition()),i=n?e.domConverter.getCorrespondingDomElement(n):e.domConverter.viewRangeToDom(e.selection.getFirstRange());this.balloonPanelView.attachTo({target:i,limiter:e.domConverter.getCorrespondingDomElement(e.selection.editableElement)})}_hidePanel(t){this.balloonPanelView.hide(),t&&this.editor.editing.view.focus()}_showPanel(){this._attachPanelToElement(),this.formView.urlInputView.select()}}},function(t,e,n){"use strict";var i=n(11),r=n(24),s=n(2),o=n(150),a=n(151),c=n(169);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this.set("value",void 0),this.listenTo(this.editor.document.selection,"change:attribute",()=>{this.value=this.editor.document.selection.getAttribute("linkHref")})}_checkEnabled(){const t=this.editor.document;return n.i(a.a)("linkHref",t.selection,t.schema)}_doExecute(t){const e=this.editor.document,i=e.selection;e.enqueueChanges(()=>{const a=e.batch();if(i.isCollapsed){const o=i.getFirstPosition(),l=o.parent;if(i.hasAttribute("linkHref")){const e=n.i(c.a)(i.getFirstPosition(),i.getAttribute("linkHref"));a.setAttribute(e,"linkHref",t),i.setRanges([e])}else if(e.schema.check({name:"$text",attributes:"linkHref",inside:l.name})){const e=new r.a(t,{linkHref:t});a.insert(o,e),i.setRanges([s.a.createOn(e)])}}else{const r=n.i(o.a)("linkHref",i.getRanges(),e.schema);for(let e of r)a.setAttribute(e,"linkHref",t)}})}}},function(t,e,n){"use strict";var i=n(3),r=n(45),s=n(54),o=n(170),a=n(334),c=n(337);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{init(){const t=this.editor,e=t.data,i=t.editing;t.document.schema.allow({name:"$inline",attributes:"linkHref"}),n.i(r.a)().for(e.modelToView,i.modelToView).fromAttribute("linkHref").toElement(t=>new o.a("a",{href:t})),n.i(s.a)().for(e.viewToModel).fromElement("a").toAttribute(t=>({key:"linkHref",value:t.getAttribute("href")})),t.commands.set("link",new a.a(t)),t.commands.set("unlink",new c.a(t))}}},function(t,e,n){"use strict";var i=n(9),r=n(5),s=n(116),o=n(19),a=n(175),c=n(174),l=n(173),u=n(62),h=n(115),d=n(63);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t);const e=t.t;this.focusTracker=new u.a,this.keystrokes=new d.a,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(e("Save")),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(e("Cancel"),"cancel"),this.unlinkButtonView=this._createButton(e("Unlink"),"unlink"),this._focusables=new s.a,this._focusCycler=new h.a({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),r.a.extend(this.saveButtonView.template,{attributes:{class:["ck-button-action"]}}),this.template=new r.a({tag:"form",attributes:{class:["ck-link-form"]},children:[this.urlInputView,{tag:"div",attributes:{class:["ck-link-form__actions"]},children:[this.saveButtonView,this.cancelButtonView,this.unlinkButtonView]}]}),n.i(l.a)({view:this}),[this.urlInputView,this.saveButtonView,this.cancelButtonView,this.unlinkButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)})}init(){return this.keystrokes.listenTo(this.element),super.init()}focus(){this._focusCycler.focusFirst()}_createUrlInput(){const t=this.locale.t,e=new a.a(this.locale,c.a);return e.label=t("Link URL"),e}_createButton(t,e){const n=new o.a(this.locale);return n.label=t,n.withText=!0,e&&n.delegate("execute").to(this,e),n}}},function(t,e,n){"use strict";var i=n(11),r=n(169);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this.listenTo(t.document.selection,"change:attribute",()=>this.refreshState())}_doExecute(){const t=this.editor.document,e=t.selection;t.enqueueChanges(()=>{const i=e.isCollapsed?[n.i(r.a)(e.getFirstPosition(),e.getAttribute("linkHref"))]:e.getRanges(),s=t.batch();for(let t of i)s.removeAttribute(t,"linkHref")})}_checkEnabled(){return this.editor.document.selection.hasAttribute("linkHref")}}},function(t,e,n){"use strict";e.e=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e,n,r){if(!n.test(e.item,"insert")||!n.test(e.item,"addAttribute:type")||!n.test(e.item,"addAttribute:indent"))return;n.consume(e.item,"insert"),n.consume(e.item,"addAttribute:type"),n.consume(e.item,"addAttribute:indent");const s=e.item,a=function(t,e){const n="numbered"==t.getAttribute("type")?"ol":"ul",r=new i.a;return new c.a(n,null).appendChildren(r),e.bindElements(t,r),r}(s,r.mapper),l=r.mapper.toViewPosition(o.a.createBefore(s));b(s,a,r.mapper,l)},e.f=function(t,e,n,i){if(!n.consume(e.item,"changeAttribute:type"))return;const r=i.mapper.toViewElement(e.item);d.a.breakContainer(l.a.createBefore(r)),d.a.breakContainer(l.a.createAfter(r));let s=r.parent;const o="numbered"==e.attributeNewValue?"ol":"ul";m(s=d.a.rename(s,o),s.nextSibling),m(s.previousSibling,s)},e.g=function(t,e,n,i){if(!n.consume(e.item,"remove"))return;const r=i.mapper.toViewPosition(e.sourcePosition),s=r.nodeAfter.is("li")?r.nodeAfter:r.nodeAfter.getChild(0);d.a.breakContainer(l.a.createBefore(s)),d.a.breakContainer(l.a.createAfter(s));const o=s.parent,a=o.previousSibling,c=u.a.createOn(o);d.a.remove(c),a&&a.nextSibling&&m(a,a.nextSibling);w(e.item.getAttribute("indent")+1,e.sourcePosition,c.start,s,i.mapper),"$graveyard"==e.item.root.rootName&&i.mapper.unbindModelElement(e.item)},e.i=function(t,e,n,i){if(!n.consume(e.item,"changeAttribute:indent"))return;const r=i.mapper.toViewElement(e.item);d.a.breakContainer(l.a.createBefore(r)),d.a.breakContainer(l.a.createAfter(r));const s=r.parent,o=s.previousSibling,a=u.a.createOn(s);let c;d.a.remove(a),o&&o.nextSibling&&(c=m(o,o.nextSibling));c||(c=a.start);w(e.attributeOldValue+1,e.range.start,a.start,r,i.mapper),b(e.item,r,i.mapper,c)},e.d=function(t,e,n,i){if("listItem"!=e.item.name){let t=i.mapper.toViewPosition(e.range.start);const n=[];for(;("ul"==t.parent.name||"ol"==t.parent.name)&&"li"==(t=d.a.breakContainer(t)).parent.name;){const e=t,i=l.a.createAt(t.parent,"end");if(!e.isEqual(i)){const t=d.a.remove(new u.a(e,i));n.push(t)}t=l.a.createAfter(t.parent)}if(n.length>0){for(let e=0;e<n.length;e++){const i=t.nodeBefore,r=d.a.insert(t,n[e]);if(t=r.end,e>0){let e=m(i,i.nextSibling);e&&e.parent==i&&t.offset--}}m(t.nodeBefore,t.nodeAfter)}}},e.h=function(t,e,n,i){if(!e.item.is("listItem")){const t=i.mapper.toViewPosition(e.sourcePosition),n=t.nodeBefore,r=t.nodeAfter;m(n,r)}},e.l=function(t,e,n,i){if(n.consume(e.input,{name:!0})){const t=new s.a("listItem");e.indent=e.indent?e.indent:0;const c="ul"==e.input.parent.name?"bulleted":"numbered";t.setAttribute("type",c),t.setAttribute("indent",e.indent),e.context.push(t),e.indent++;let l=new r.a;l.appendChildren(t);for(let r of e.input.getChildren()){const s=i.convertItem(r,n,e);"ul"==r.name||"ol"==r.name?l.appendChildren(Array.from(s.getChildren())):a.a.insert(o.a.createAt(t,"end"),s)}e.indent--,e.context.pop(),e.output=l}},e.j=function(t,e,n){if(n.test(e.input,{name:!0})){const t=Array.from(e.input.getChildren());for(let e of t)e.is("li")||e.remove()}},e.k=function(t,e,n){if(n.test(e.input,{name:!0})){if(0===e.input.childCount)return;const t=[...e.input.getChildren()];let n=!1,i=!0;for(let e of t)!n||e.is("ul")||e.is("ol")||e.remove(),e.is("text")?(i&&(e.data=e.data.replace(/^\s+/,"")),(!e.nextSibling||e.nextSibling.is("ul")||e.nextSibling.is("ol"))&&(e.data=e.data.replace(/\s+$/,""))):(e.is("ul")||e.is("ol"))&&(n=!0),i=!1}},e.b=function(t,e){const n=e.modelPosition.nodeBefore;if(n&&n.is("listItem")){const t=e.mapper.toViewElement(n),i=t.getAncestors().find(t=>t.is("ul")||t.is("ol")),r=new h.a({startPosition:l.a.createAt(t,0)});for(let t of r){if("elementStart"==t.type&&t.item.is("li")){e.viewPosition=t.previousPosition;break}if("elementEnd"==t.type&&t.item==i){e.viewPosition=t.nextPosition;break}}}},e.c=function(t,e){const n=e.viewPosition,i=n.parent,r=e.mapper;if("ul"==i.name||"ol"==i.name){if(n.isAtEnd){const t=r.toModelElement(n.nodeBefore),i=r.getModelLength(n.nodeBefore);e.modelPosition=o.a.createBefore(t).getShiftedBy(i)}else{const t=r.toModelElement(n.nodeAfter);e.modelPosition=o.a.createBefore(t)}t.stop()}else if("li"==i.name&&n.nodeBefore&&("ul"==n.nodeBefore.name||"ol"==n.nodeBefore.name)){const s=r.toModelElement(i);let a=1,c=n.nodeBefore;for(;c&&(c.is("ul")||c.is("ol"));)a+=r.getModelLength(c),c=c.previousSibling;e.modelPosition=o.a.createBefore(s).getShiftedBy(a),t.stop()}},e.a=function(t){return(e,n,i,r)=>{if("remove"==n)f(i.sourcePosition,t,r),p(i.sourcePosition,!1,t,r);else if("move"==n)f(i.sourcePosition,t,r),p(i.sourcePosition,!1,t,r),f(i.range.start,t,r),p(i.range.start,!1,t,r),f(i.range.end,t,r),p(i.range.end,!0,t,r);else if("rename"==n&&"listItem"==i.oldName&&"listItem"!=i.newName){const e=i.element;t.enqueueChanges(()=>{r.removeAttribute(e,"indent").removeAttribute(e,"type")});const n=o.a.createAfter(i.element);f(n,t,r)}else"insert"==n&&(f(i.range.start,t,r),p(i.range.start,!1,t,r),f(i.range.end,t,r),p(i.range.end,!0,t,r))}},e.m=function(t,e){let n=e.content.getChild(0);if(n.is("listItem")){const t=e.selection.getFirstPosition();let i=null;if(t.parent.is("listItem")?i=t.parent:t.nodeBefore&&t.nodeBefore.is("listItem")&&(i=t.nodeBefore),i){const t=i.getAttribute("indent");if(t>0)for(;n&&n.is("listItem");)n.setAttribute("indent",n.getAttribute("indent")+t),n=n.nextSibling}}};var i=n(343),r=n(37),s=n(6),o=n(1),a=n(13),c=n(46),l=n(28),u=n(33),h=n(48),d=n(114);function f(t,e,n){let i=t.nodeAfter;i&&"listItem"==i.name&&e.enqueueChanges(()=>{const t=i.previousSibling,e=t&&t.is("listItem")?t.getAttribute("indent")+1:0;let r=i.getAttribute("indent")-e;const s=[];for(;i&&"listItem"==i.name&&i.getAttribute("indent")>e;){r>i.getAttribute("indent")&&(r=i.getAttribute("indent"));const t=i.getAttribute("indent")-r;s.push({item:i,indent:t}),i=i.nextSibling}if(s.length>0)for(let t of s.reverse())n.setAttribute(t.item,"indent",t.indent)})}function p(t,e,n,i){let r=t[e?"nodeBefore":"nodeAfter"];r&&r.is("listItem")&&0!==r.getAttribute("indent")&&n.enqueueChanges(()=>{const t=v(r,!e);if(!t||t==r)return;const n=t.getAttribute("indent"),s=t.getAttribute("type");for(;r&&r.is("listItem")&&r.getAttribute("indent")>=n;)r.getAttribute("type")!=s&&r.getAttribute("indent")==n&&i.setAttribute(r,"type",s),r=r[e?"previousSibling":"nextSibling"]})}function g(t,e){const n=e.getNext?"nextSibling":"previousSibling",i=e.getNext?"nodeAfter":"nodeBefore",r=!!e.checkAllSiblings,o=!!e.sameIndent,a=!!e.biggerIndent,c=!!e.smallerIndent,l=!!e.isMapped,u=t instanceof s.a?t.getAttribute("indent"):e.indent;let h=t instanceof s.a?t[n]:t[i];for(;h&&"listItem"==h.name;){let t=h.getAttribute("indent");if(o&&u==t||a&&u<t||c&&u>t){if(!l||e.mapper.toViewElement(h))return h;h=h[n]}else{if(!r)return null;h=h[n]}}return null}function m(t,e){return t&&e&&("ul"==t.name||"ol"==t.name)&&t.name==e.name?d.a.mergeContainers(l.a.createAfter(t)):null}function b(t,e,n,i){const r=e.parent;let s,a=g(t,{sameIndent:!0,smallerIndent:!0,checkAllSiblings:!0});if(a&&a.getAttribute("indent")==t.getAttribute("indent")){let t=n.toViewElement(a);s=d.a.breakContainer(l.a.createAfter(t))}else s=(a=t.previousSibling)&&"listItem"==a.name?a.getAttribute("indent")<t.getAttribute("indent")?n.toViewPosition(o.a.createAt(a,"end")):i.parent.is("ul")||i.parent.is("ol")?d.a.breakContainer(i):i:n.toViewPosition(o.a.createBefore(t));d.a.insert(s,r);const c=g(t,{biggerIndent:!0,getNext:!0,isMapped:!0,mapper:n});if(c){let t=n.toViewElement(c);d.a.breakContainer(l.a.createBefore(t));const i=l.a.createBefore(t.parent),r=v(c,!1),s=n.toViewElement(r),o=d.a.breakContainer(l.a.createAfter(s)),a=new u.a(i,o),h=l.a.createAt(e,"end");d.a.move(a,h)}m(r,r.nextSibling),m(r.previousSibling,r)}function w(t,e,n,i,r){const s=g(e,{sameIndent:!0,smallerIndent:!0,checkAllSiblings:!0,indent:t}),a=s?s.getAttribute("indent"):null;let c;if(s)if(a==t){const t=r.toViewElement(s).parent;c=l.a.createAfter(t)}else{const t=o.a.createAt(s,"end");c=r.toViewPosition(t)}else c=n;for(let t of[...i.getChildren()])(t.is("ul")||t.is("ol"))&&(c=d.a.move(u.a.createOn(t),c).end,m(t,t.nextSibling),m(t.previousSibling,t))}function v(t,e){const n=t.getAttribute("indent"),i=e?"previousSibling":"nextSibling";let r=t;for(;t[i]&&t[i].is("listItem")&&t[i].getAttribute("indent")>=n;)(t=t[i]).getAttribute("indent")==n&&(r=t);return r}},function(t,e,n){"use strict";var i=n(11),r=n(77);function s(t,e){const n=o(t,!1);if(n)return void e.setAttribute(t,"type",n.getAttribute("type"));const i=o(t,!0);i&&e.setAttribute(t,"type",i.getAttribute("type"))}function o(t,e){let n=t[e?"nextSibling":"previousSibling"];for(;n&&n.is("listItem")&&n.getAttribute("indent")>=t.getAttribute("indent");){if(n.getAttribute("indent")==t.getAttribute("indent"))return n;n=n[e?"nextSibling":"previousSibling"]}return null}e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t,e){super(t),this._indentBy="forward"==e?1:-1,this.listenTo(t.document,"changesDone",()=>{this.refreshState()})}_doExecute(){const t=this.editor.document,e=t.batch();let n=Array.from(t.selection.getSelectedBlocks());t.enqueueChanges(()=>{const t=n[n.length-1];let i=t.nextSibling;for(;i&&"listItem"==i.name&&i.getAttribute("indent")>t.getAttribute("indent");)n.push(i),i=i.nextSibling;this._indentBy<0&&(n=n.reverse());for(let t of n){const n=t.getAttribute("indent")+this._indentBy;n<0?e.rename(t,"paragraph"):e.setAttribute(t,"indent",n)}this._indentBy<0&&(n=n.reverse());for(let t of n)s(t,e)})}_checkEnabled(){const t=n.i(r.a)(this.editor.document.selection.getSelectedBlocks());if(!t||!t.is("listItem"))return!1;if(this._indentBy>0){const e=t.getAttribute("indent"),n=t.getAttribute("type");let i=t.previousSibling;for(;i&&i.is("listItem")&&i.getAttribute("indent")>=e;){if(i.getAttribute("indent")==e)return i.getAttribute("type")==n;i=i.previousSibling}return!1}return!0}}},function(t,e,n){"use strict";var i=n(342),r=n(521),s=n.n(r),o=n(520),a=n.n(o),c=n(3),l=n(22),u=n(19);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends c.a{static get requires(){return[i.a]}static get pluginName(){return"list/list"}init(){const t=this.editor.t;this._addButton("numberedList",t("Numbered List"),s.a),this._addButton("bulletedList",t("Bulleted List"),a.a),this.listenTo(this.editor.editing.view,"enter",(t,e)=>{const n=this.editor.document,i=n.selection.getLastPosition().parent;n.selection.isCollapsed&&"listItem"==i.name&&i.isEmpty&&(this.editor.execute("outdentList"),e.preventDefault(),t.stop())}),this.listenTo(this.editor.editing.view,"keydown",(t,e)=>{let i;e.keystroke==n.i(l.c)("Tab")?i="indentList":e.keystroke==n.i(l.c)("Shift+Tab")&&(i="outdentList"),i&&this.editor.commands.get(i).isEnabled&&(this.editor.execute(i),e.preventDefault(),t.stop())})}_addButton(t,e,n){const i=this.editor,r=i.commands.get(t);i.ui.componentFactory.add(t,s=>{const o=new u.a(s);return o.set({label:e,icon:n,tooltip:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(o,"execute",()=>i.execute(t)),o})}}},function(t,e,n){"use strict";var i=n(11),r=n(1),s=n(77);function o(t,e,n){const i=e?t[0]:t[t.length-1];if(i.is("listItem")){let r=i[e?"previousSibling":"nextSibling"],s=i.getAttribute("indent");for(;r&&r.is("listItem")&&r.getAttribute("indent")>=n;)s>r.getAttribute("indent")&&(s=r.getAttribute("indent")),r.getAttribute("indent")==s&&t[e?"unshift":"push"](r),r=r[e?"previousSibling":"nextSibling"]}}e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t,e){super(t),this.type="bulleted"==e?"bulleted":"numbered",this.set("value",!1),this.listenTo(t.document,"changesDone",()=>{this.refreshValue(),this.refreshState()})}refreshValue(){const t=n.i(s.a)(this.editor.document.selection.getSelectedBlocks());this.value=t&&t.is("listItem")&&t.getAttribute("type")==this.type}_doExecute(t={}){const e=this.editor.document,n=Array.from(e.selection.getSelectedBlocks()),i=!0===this.value;e.enqueueChanges(()=>{const r=t.batch||e.batch();if(i){let t=n[n.length-1].nextSibling,e=Number.POSITIVE_INFINITY,i=[];for(;t&&"listItem"==t.name&&0!==t.getAttribute("indent");){const n=t.getAttribute("indent");n<e&&(e=n);const r=n-e;i.push({element:t,indent:r}),t=t.nextSibling}i=i.reverse();for(let t of i)r.setAttribute(t.element,"indent",t.indent)}if(!i){let t=Number.POSITIVE_INFINITY;for(let e of n)e.is("listItem")&&e.getAttribute("indent")<t&&(t=e.getAttribute("indent"));o(n,!0,t=0===t?1:t),o(n,!1,t)}for(let t of n.reverse())i&&"listItem"==t.name?r.rename(t,"paragraph"):i||"listItem"==t.name?i||"listItem"!=t.name||t.getAttribute("type")==this.type||r.setAttribute(t,"type",this.type):r.setAttribute(t,"type",this.type).setAttribute(t,"indent",0).rename(t,"listItem")})}_checkEnabled(){if(this.value)return!0;const t=this.editor.document.selection,e=this.editor.document.schema,i=n.i(s.a)(t.getSelectedBlocks());return!!i&&e.check({name:"listItem",attributes:["type","indent"],inside:r.a.createBefore(i)})}}},function(t,e,n){"use strict";var i=n(341),r=n(339),s=n(3),o=n(74),a=n(338);function c(t){let e=1;for(let n of t.getChildren())if("ul"==n.name||"ol"==n.name)for(let t of n.getChildren())e+=c(t);return e}e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends s.a{static get requires(){return[o.a]}init(){const t=this.editor,e=t.document.schema;e.registerItem("listItem","$block"),e.allow({name:"listItem",inside:"$root",attributes:["type","indent"]}),e.requireAttributes("listItem",["type","indent"]);const s=t.data,o=t.editing;this.editor.document.on("change",n.i(a.a)(this.editor.document),{priority:"high"}),this.editor.document.on("change",(t,e,n)=>{if("move"==e)for(let t of n.range.getItems())t.is("listItem")&&o.mapper.unbindModelElement(t)},{priority:"high"}),o.mapper.registerViewToModelLength("li",c),s.mapper.registerViewToModelLength("li",c),o.mapper.on("modelToViewPosition",a.b),o.mapper.on("viewToModelPosition",a.c),s.mapper.on("modelToViewPosition",a.b),o.modelToView.on("insert",a.d,{priority:"high"}),o.modelToView.on("insert:listItem",a.e),s.modelToView.on("insert",a.d,{priority:"high"}),s.modelToView.on("insert:listItem",a.e),o.modelToView.on("changeAttribute:type:listItem",a.f),s.modelToView.on("changeAttribute:type:listItem",a.f),o.modelToView.on("remove:listItem",a.g),o.modelToView.on("remove",a.h,{priority:"low"}),s.modelToView.on("remove:listItem",a.g),s.modelToView.on("remove",a.h,{priority:"low"}),o.modelToView.on("changeAttribute:indent:listItem",a.i),s.modelToView.on("changeAttribute:indent:listItem",a.i),s.viewToModel.on("element:ul",a.j,{priority:"high"}),s.viewToModel.on("element:ol",a.j,{priority:"high"}),s.viewToModel.on("element:li",a.k,{priority:"high"}),s.viewToModel.on("element:li",a.l),s.on("insertContent",a.m,{priority:"high"}),t.commands.set("numberedList",new i.a(t,"numbered")),t.commands.set("bulletedList",new i.a(t,"bulleted")),t.commands.set("indentList",new r.a(t,"forward")),t.commands.set("outdentList",new r.a(t,"backward"))}}},function(t,e,n){"use strict";var i=n(46);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */function r(){const t=!this.isEmpty&&("ul"==this.getChild(0).name||"ol"==this.getChild(0).name);return this.isEmpty||t?0:null}e.a=class extends i.a{constructor(t,e){super("li",t,e),this.getFillerOffset=r}}},function(t,e,n){"use strict";var i=n(11),r=n(1),s=n(77);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this.set("value",!1),this.listenTo(t.document,"changesDone",()=>{this.refreshValue(),this.refreshState()})}_doExecute(t={}){const e=this.editor.document;e.enqueueChanges(()=>{const n=t.batch||e.batch(),i=(t.selection||e.selection).getSelectedBlocks();for(let t of i)t.is("paragraph")||n.rename(t,"paragraph")})}refreshValue(){const t=n.i(s.a)(this.editor.document.selection.getSelectedBlocks());this.value=!!t&&t.is("paragraph")}_checkEnabled(){const t=n.i(s.a)(this.editor.document.selection.getSelectedBlocks());return!!t&&this.editor.document.schema.check({name:"paragraph",inside:r.a.createBefore(t)})}}},function(t,e,n){"use strict";var i=n(3),r=n(346),s=n(347);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{static get pluginName(){return"typing/delete"}init(){const t=this.editor,e=t.editing.view;e.addObserver(s.a),t.commands.set("forwardDelete",new r.a(t,"forward")),t.commands.set("delete",new r.a(t,"backward")),this.listenTo(e,"delete",(e,n)=>{t.execute("forward"==n.direction?"forwardDelete":"delete",{unit:n.unit}),n.preventDefault()})}}},function(t,e,n){"use strict";var i=n(11),r=n(56),s=n(171),o=n(178);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t,e){super(t),this.direction=e,this._buffer=new s.a(t.document,t.config.get("typing.undoStep"))}_doExecute(t={}){const e=this.editor.document,i=this.editor.data;e.enqueueChanges(()=>{this._buffer.lock();const s=r.a.createFromSelection(e.selection);if(s.isCollapsed&&i.modifySelection(s,{direction:this.direction,unit:t.unit}),s.isCollapsed)return;let a=0;s.getFirstRange().getMinimalFlatRanges().forEach(t=>{a+=n.i(o.a)(t.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),i.deleteContent(s,this._buffer.batch,{merge:!0}),this._buffer.input(a),e.selection.setRanges(s.getRanges(),s.isBackward),this._buffer.unlock()})}}},function(t,e,n){"use strict";var i=n(47),r=n(113),s=n(22);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),t.on("keydown",(e,n)=>{const i={};if(n.keyCode==s.a.delete)i.direction="forward",i.unit="character";else{if(n.keyCode!=s.a.backspace)return;i.direction="backward",i.unit="codePoint"}i.unit=n.altKey?"word":i.unit,t.fire("delete",new r.a(t,n.domEvent,i))})}observe(){}}},function(t,e,n){"use strict";var i=n(3),r=n(2),s=n(28),o=n(29),a=n(179),c=n(374),l=n(22),u=n(349);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{static get pluginName(){return"typing/input"}init(){const t=this.editor,e=t.editing.view,n=new u.a(t,t.config.get("typing.undoStep")||20);t.commands.set("input",n),this.listenTo(e,"keydown",(t,e)=>{this._handleKeydown(e,n.buffer)},{priority:"lowest"}),this.listenTo(e,"mutations",(t,e,n)=>{this._handleMutations(e,n)})}_handleKeydown(t,e){const n=this.editor.document;var i;(i=t).ctrlKey||d.includes(i.keyCode)||n.selection.isCollapsed||(e.lock(),n.enqueueChanges(()=>{this.editor.data.deleteContent(n.selection,e.batch)}),e.unlock())}_handleMutations(t,e){new h(this.editor).handle(t,e)}};class h{constructor(t){this.editor=t,this.editing=this.editor.editing}handle(t,e){for(let n of t)this._handleTextMutation(n,e),this._handleTextNodeInsertion(n)}_handleTextMutation(t,e){if("text"!=t.type)return;const i=t.newText.replace(/\u00A0/g," "),o=t.oldText.replace(/\u00A0/g," "),c=n.i(a.a)(o,i);let l=null,u=null;for(let t=0;t<c.length;t++){"equal"!=c[t]&&(l=null===l?t:l,u=t)}let h=0,d=0;for(let t=l;t<=u;t++)"insert"!=c[t]&&h++,"delete"!=c[t]&&d++;let f=null;e&&(f=this.editing.mapper.toModelRange(e.getFirstRange()));const p=new s.a(t.node,l),g=this.editing.mapper.toModelPosition(p),m=r.a.createFromPositionAndShift(g,h),b=i.substr(l,d);this.editor.execute("input",{text:b,range:m,resultRange:f})}_handleTextNodeInsertion(t){if("children"!=t.type)return;if(t.newChildren.length-t.oldChildren.length!=1)return;const e=n.i(a.a)(t.oldChildren,t.newChildren,f),i=n.i(c.a)(e,t.newChildren);if(i.length>1)return;const l=i[0];if(!(l.values[0]instanceof o.a))return;const u=new s.a(t.node,l.index),h=this.editing.mapper.toModelPosition(u),d=l.values[0].data;this.editor.execute("input",{text:d.replace(/\u00A0/g," "),range:new r.a(h)})}}const d=[n.i(l.d)("arrowUp"),n.i(l.d)("arrowRight"),n.i(l.d)("arrowDown"),n.i(l.d)("arrowLeft"),9,16,17,18,20,27,33,34,35,36,229];for(let t=112;t<=135;t++)d.push(t);function f(t,e){return t instanceof o.a&&e instanceof o.a?t.data===e.data:t===e}},function(t,e,n){"use strict";var i=n(11),r=n(171);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t,e){super(t),this._buffer=new r.a(t.document,e)}destroy(){super.destroy(),this._buffer.destroy(),this._buffer=null}get buffer(){return this._buffer}_doExecute(t={}){const e=this.editor.document,n=t.text||"",i=n.length,r=t.range||e.selection.getFirstRange(),s=t.resultRange;e.enqueueChanges(()=>{const t=r.isCollapsed;this._buffer.lock(),t||this._buffer.batch.remove(r),this._buffer.batch.weakInsert(r.start,n),s?this.editor.data.model.selection.setRanges([s]):t&&this.editor.data.model.selection.collapse(r.start.getShiftedBy(i)),this._buffer.unlock(),this._buffer.input(i)})}}},function(t,e,n){"use strict";var i=n(3),r=n(348),s=n(345);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{static get requires(){return[r.a,s.a]}static get pluginName(){return"typing/typing"}}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function({emitter:t,activator:e,callback:n}){t.listenTo(document,"keydown",(t,{keyCode:r})=>{r==i.a.esc&&e()&&n()})};var i=n(22)},function(t,e,n){"use strict";var i=n(0);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class{constructor(t){this.editor=t,this._components=new Map}add(t,e){if(this._components.get(t))throw new i.a("componentfactory-item-exists: The item already exists in the component factory.",{name:t});this._components.set(t,e)}create(t){const e=this._components.get(t);if(!e)throw new i.a("componentfactory-item-missing: There is no such UI component in the factory.",{name:t});return e(this.editor.locale)}}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e){const n=new i.a(e);n.bind("label","isOn","isEnabled","withText","keystroke","tooltip").to(t);const o=new s.a(e);return new r.a(e,n,o)};var i=n(19),r=n(355),s=n(354)},function(t,e,n){"use strict";var i=n(9),r=n(5);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t);const e=this.bindTemplate;this.set("isVisible",!1),this.children=this.createCollection(),this.template=new r.a({tag:"div",attributes:{class:["ck-reset","ck-dropdown__panel",e.if("isVisible","ck-dropdown__panel-visible")]},children:this.children})}}},function(t,e,n){"use strict";var i=n(9),r=n(5),s=n(62),o=n(63);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t,e,n){super(t),r.a.extend(e.template,{attributes:{class:["ck-dropdown__button"]}}),this.buttonView=e,this.panelView=n,this.set("isOpen",!1),this.focusTracker=new s.a,this.keystrokes=new o.a,this.template=new r.a({tag:"div",attributes:{class:["ck-dropdown"]},children:[e,n]}),this.listenTo(e,"execute",()=>this.isOpen=!this.isOpen),n.bind("isVisible").to(this,"isOpen")}init(){this.keystrokes.listenTo(this.element),this.focusTracker.add(this.element);const t=(t,e)=>{this.isOpen&&(this.buttonView.focus(),this.isOpen=!1,e())};return this.keystrokes.set("arrowdown",(t,e)=>{this.isOpen||(this.isOpen=!0,e())}),this.keystrokes.set("arrowright",(t,e)=>{this.isOpen&&e()}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t),super.init()}focus(){this.buttonView.focus()}}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e){const o=n.i(s.a)(t,e),a=o.listView=new i.a(e);return a.items.bindTo(t.items).using(t=>{const n=new r.a(e);return n.bind(...Object.keys(t)).to(t),n}),a.items.delegate("execute").to(o),o.panelView.children.add(a),o.on("change:isOpen",(t,e,n)=>{n?function(t){t.listenTo(document,"click",(e,{target:n})=>{t.element==n||t.element.contains(n)||(t.isOpen=!1)})}(o):o.stopListening(document)}),o.on("execute",()=>{o.isOpen=!1}),o.keystrokes.set("arrowdown",(t,e)=>{o.isOpen&&(a.focus(),e())}),o.keystrokes.set("arrowup",(t,e)=>{o.isOpen&&(a.focusLast(),e())}),o};var i=n(364),r=n(363),s=n(353)},function(t,e,n){"use strict";var i=n(9),r=n(5);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t,e){super(t);const n=this.bindTemplate;e&&(this.element=this.editableElement=e),this.template=new r.a({tag:"div",attributes:{class:[n.to("isFocused",t=>t?"ck-focused":"ck-blurred"),"ck-editor__editable"],contenteditable:n.to("isReadOnly",t=>!t)}}),this.set("isReadOnly",!1),this.set("isFocused",!1),this.externalElement=e}init(){return this.externalElement?this.template.apply(this.externalElement):this.editableElement=this.element,super.init()}destroy(){return this.externalElement&&this.template.revert(this.externalElement),super.destroy()}}},function(t,e,n){"use strict";var i=n(357),r=n(5);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t,e){super(t,e);const n=this.bindTemplate,i=this.t;this.set("name",null),r.a.extend(this.template,{attributes:{role:"textbox","aria-label":n.to("name",t=>i("Rich Text Editor, %0",[t])),class:"ck-editor__editable_inline"}})}}},function(t,e,n){"use strict";var i=n(360),r=n(67),s=n(5);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t);const e=this.t,i=n.i(r.a)();this.set("width",null),this.set("height",null),this.top=this.createCollection(),this.main=this.createCollection(),this.template=new s.a({tag:"div",attributes:{class:["ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:"ltr",lang:t.lang,"aria-labelledby":`cke-editor__aria-label_${i}`},children:[{tag:"span",attributes:{id:`cke-editor__aria-label_${i}`,class:"cke-voice-label"},children:[e("Rich Text Editor")]},{tag:"div",attributes:{class:"ck-editor__top ck-reset_all",role:"presentation"},children:this.top},{tag:"div",attributes:{class:"ck-editor__main",role:"presentation"},children:this.main}]})}}},function(t,e,n){"use strict";var i=n(9),r=n(5);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this.body=this.createCollection()}init(){return Promise.resolve().then(()=>this._renderBodyCollection()).then(()=>super.init())}destroy(){return this._bodyCollectionContainer.remove(),super.destroy()}_renderBodyCollection(){const t=this._bodyCollectionContainer=new r.a({tag:"div",attributes:{class:["ck-body","ck-rounded-corners","ck-reset_all"]},children:this.body}).render();document.body.appendChild(t)}}},function(t,e,n){"use strict";var i=n(9),r=n(5);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(){super();const t=this.bindTemplate;this.set("content"),this.set("viewBox","0 0 20 20"),this.template=new r.a({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:"ck-icon",viewBox:t.to("viewBox")}}),this.on("change:content",(t,e,n)=>{const i=(new DOMParser).parseFromString(n.trim(),"image/svg+xml").firstChild;for(;i.childNodes.length>0;)this.element.appendChild(i.childNodes[0])})}}},function(t,e,n){"use strict";var i=n(9),r=n(5);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this.set("text"),this.set("for");const e=this.bindTemplate;this.template=new r.a({tag:"label",attributes:{class:["ck-label"],for:e.to("for")},children:[{text:e.to("text")}]})}}},function(t,e,n){"use strict";var i=n(9),r=n(5);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(){super(),this.set("tabindex",-1);const t=this.bindTemplate;this.template=new r.a({tag:"li",attributes:{class:["ck-list__item",t.to("class"),t.if("isActive","ck-list__item_active")],style:t.to("style"),tabindex:t.to("tabindex")},children:[{text:t.to("label")}],on:{click:t.to("execute")}})}focus(){this.element.focus()}}},function(t,e,n){"use strict";var i=n(9),r=n(5),s=n(62),o=n(115),a=n(63);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(){super(),this.items=this.createCollection(),this.focusTracker=new s.a,this.keystrokes=new a.a,this._focusCycler=new o.a({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.template=new r.a({tag:"ul",attributes:{class:["ck-reset","ck-list"]},children:this.items}),this.items.on("add",(t,e)=>{this.focusTracker.add(e.element)}),this.items.on("remove",(t,e)=>{this.focusTracker.remove(e.element)})}init(){return this.keystrokes.listenTo(this.element),super.init()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}},function(t,e,n){"use strict";var i=n(53),r=n(4),s=n(31);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class o{constructor(t,e){e&&n.i(i.a)(this,e),t&&this.set(t)}}e.a=o,n.i(r.a)(o,s.a)},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function({origin:t,originKeystrokeHandler:e,originFocusTracker:n,toolbar:i}){n.add(i.element),e.set("Alt+F10",(t,e)=>{n.isFocused&&!i.focusTracker.isFocused&&(i.focus(),e())}),i.keystrokes.set("Esc",(e,n)=>{i.focusTracker.isFocused&&(t.focus(),n())})}},function(t,e,n){"use strict";var i=n(61),r=n(5),s=n(177),o=n(181);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const a=n.i(o.a)("px");e.a=class extends s.a{constructor(t){super(t);const e=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterOffset",50),this.set("_marginLeft",null),this.set("_isStickyToTheLimiter",!1),r.a.extend(this.template,{attributes:{class:[e.if("isSticky","ck-toolbar_sticky"),e.if("_isStickyToTheLimiter","ck-toolbar_sticky_bottom-limit")],style:{width:e.to("isSticky",t=>t?a(this._elementPlaceholder.getBoundingClientRect().width):null),bottom:e.to("_isStickyToTheLimiter",t=>t?a(this.limiterOffset):null),marginLeft:e.to("_marginLeft")}}}),this._elementPlaceholder=new r.a({tag:"div",attributes:{class:["ck-toolbar__placeholder"],style:{display:e.to("isSticky",t=>t?"block":"none"),height:e.to("isSticky",t=>t?a(this._toolbarRect.height):null)}}}).render()}init(){super.init(),this.element.parentNode.insertBefore(this._elementPlaceholder,this.element),this.listenTo(i.a.window,"scroll",()=>{this._checkIfShouldBeSticky()}),this.listenTo(this,"change:isActive",()=>{this._checkIfShouldBeSticky()})}destroy(){return super.destroy().then(()=>{this._elementPlaceholder.remove()})}_checkIfShouldBeSticky(){const t=this._limiterRect=this.limiterElement.getBoundingClientRect(),e=this._toolbarRect=this.element.getBoundingClientRect();this.isSticky=this.isActive&&t.top<0&&this._toolbarRect.height+this.limiterOffset<t.height,this.isSticky?(this._isStickyToTheLimiter=t.bottom<e.height+this.limiterOffset,this._marginLeft=this._isStickyToTheLimiter?null:a(-i.a.window.scrollX)):(this._isStickyToTheLimiter=!1,this._marginLeft=null)}}},function(t,e,n){"use strict";var i=n(9),r=n(5);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this.template=new r.a({tag:"span",attributes:{class:["ck-toolbar__separator"]}})}}},function(t,e,n){"use strict";var i=n(117),r=n(103);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{_doExecute(){const t=this._stack.pop();this.editor.document.enqueueChanges(()=>{const e=t.batch.deltas[t.batch.deltas.length-1],n=e.baseVersion+e.operations.length,i=Array.from(this.editor.document.history.getDeltas(n)).filter(t=>!this._createdBatches.has(t.batch));this._restoreSelection(t.selection.ranges,t.selection.isBackward,i),this._redo(t.batch)}),this.refreshState()}_redo(t){const e=this.editor.document,i=e.batch();this._createdBatches.add(i);const s=t.deltas.slice();s.reverse();for(let t of s){const s=t.baseVersion+t.operations.length;let o=[t.getReversed()];for(let t of e.history.getDeltas(s))this._createdBatches.has(t.batch)||(o=n.i(r.a)(o,[t],!0).deltasA);for(let t of o){t.baseVersion=e.version,i.addDelta(t);for(let n of t.operations)e.applyOperation(n)}}}}},function(t,e,n){"use strict";var i=n(3),r=n(372),s=n(19),o=n(523),a=n.n(o),c=n(522),l=n.n(c);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{static get requires(){return[r.a]}static get pluginName(){return"undo/undo"}init(){const t=this.editor,e=t.t;this._addButton("undo",e("Undo"),"CTRL+Z",a.a),this._addButton("redo",e("Redo"),"CTRL+Y",l.a),t.keystrokes.set("CTRL+Z","undo"),t.keystrokes.set("CTRL+Y","redo"),t.keystrokes.set("CTRL+SHIFT+Z","redo")}_addButton(t,e,n,i){const r=this.editor,o=r.commands.get(t);r.ui.componentFactory.add(t,a=>{const c=new s.a(a);return c.set({label:e,icon:i,keystroke:n,tooltip:!0}),c.bind("isEnabled").to(o,"isEnabled"),this.listenTo(c,"execute",()=>r.execute(t)),c})}}},function(t,e,n){"use strict";var i=n(117),r=n(103);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{_doExecute(t=null){let e=t?this._stack.findIndex(e=>e.batch==t):this._stack.length-1;const n=this._stack.splice(e,1)[0];this.editor.document.enqueueChanges(()=>{const t=this._undo(n.batch),e=this.editor.document.history.getDeltas(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,e),this.fire("revert",n.batch,t)}),this.refreshState()}_getItemIndexFromBaseVersion(t){for(let e=0;e<this._stack.length;e++)if(this._stack[e].batch.baseVersion==t)return e;return null}_undo(t){const e=this.editor.document,s=e.batch();this._createdBatches.add(s);const o=e.history,a=t.deltas.slice();a.reverse();for(let t of a){const a=t.baseVersion,c=a+t.operations.length,l=o.getDelta(a);if(null===l)continue;l.reverse();let u=[];for(let t of l)u.push(t.getReversed());const h={};for(let t of o.getDeltas(c)){const e=this._getItemIndexFromBaseVersion(t.baseVersion);null!==e&&(this._stack[e].selection.ranges=n.i(i.b)(this._stack[e].selection.ranges,u));const s=n.i(r.a)(u,[t],!0);u=s.deltasA;const o=s.deltasB;h[t.baseVersion]||(h[t.baseVersion]=[]),h[t.baseVersion]=h[t.baseVersion].concat(o)}for(let t of u){t.baseVersion=e.version,s.addDelta(t);for(let n of t.operations)e.applyOperation(n)}o.removeDelta(a);for(let t of u)o.removeDelta(t.baseVersion);for(let t in h)o.updateDelta(Number(t),h[t])}return s}}},function(t,e,n){"use strict";var i=n(3),r=n(371),s=n(369);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{constructor(t){super(t),this._batchRegistry=new WeakSet}init(){this._undoCommand=new r.a(this.editor),this._redoCommand=new s.a(this.editor),this.editor.commands.set("undo",this._undoCommand),this.editor.commands.set("redo",this._redoCommand),this.listenTo(this.editor.document,"change",(t,e,n,i)=>{this._batchRegistry.has(i)||"transparent"==i.type||(this._redoCommand._createdBatches.has(i)?this._undoCommand.addBatch(i):this._undoCommand._createdBatches.has(i)||(this._undoCommand.addBatch(i),this._redoCommand.clearStack()),this._batchRegistry.add(i))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(t,e,n)=>{this._redoCommand.addBatch(n)})}}},function(t,e,n){"use strict";var i=n(95);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class{constructor(t,e){this._config={},e&&this.define(e),t&&this._setObjectToTarget(this._config,t)}set(t,e){this._setToTarget(this._config,t,e)}define(t,e){this._setToTarget(this._config,t,e,!0)}get(t){return this._getFromSource(this._config,t)}_setToTarget(t,e,r,s=!1){if(n.i(i.a)(e))return void this._setObjectToTarget(t,e,s);const o=e.split(".");e=o.pop();for(let e of o)n.i(i.a)(t[e])||(t[e]={}),t=t[e];if(n.i(i.a)(r))return n.i(i.a)(t[e])||(t[e]={}),t=t[e],void this._setObjectToTarget(t,r,s);s&&void 0!==t[e]||(t[e]=r)}_getFromSource(t,e){const r=e.split(".");e=r.pop();for(let e of r){if(!n.i(i.a)(t[e])){t=null;break}t=t[e]}return t?t[e]:void 0}_setObjectToTarget(t,e,n){Object.keys(e).forEach(i=>{this._setToTarget(t,i,e[i],n)})}}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e){const n=[];let i,r=0;return t.forEach(t=>{"equal"==t?(s(),r++):"insert"==t?(o("insert")?i.values.push(e[r]):(s(),i={type:"insert",index:r,values:[e[r]]}),r++):o("delete")?i.howMany++:(s(),i={type:"delete",index:r,howMany:1})}),s(),n;function s(){i&&(n.push(i),i=null)}function o(t){return i&&i.type==t}}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e){const r=n.i(i.a)(t),s=n.i(i.a)(e);let o=0;for(;r[o]==s[o]&&r[o];)o++;return 0===o?null:r[o-1]};var i=n(180)},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){if(t instanceof HTMLTextAreaElement)return t.value;return t.innerHTML}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){for(;t&&"html"!=t.tagName.toLowerCase();){if("static"!=i.a.window.getComputedStyle(t).position)return t;t=t.parentElement}return null};var i=n(61)},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){let e=0;for(;t.previousSibling;)t=t.previousSibling,e++;return e}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e,n){t.insertBefore(n,t.childNodes[e]||null)}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){return"[object Range]"==Object.prototype.toString.apply(t)}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function({element:t,target:e,positions:c,limiter:l,fitInViewport:u}){const h=n.i(s.a)(t.parentElement),d=new r.a(t),f=new r.a(e);let p,g;if(l||u){const t=l&&new r.a(l).getVisible(),e=u&&r.a.getViewportRect();[g,p]=function(t,e,n,i,r){let s,a,c=0,l=0;const u=n.getArea();return t.some(t=>{const[h,d]=o(t,e,n);let f,p;if(i)if(r){const t=i.getIntersection(r);f=t?t.getIntersectionArea(d):0}else f=i.getIntersectionArea(d);function g(){l=p,c=f,s=d,a=h}return r&&(p=r.getIntersectionArea(d)),r&&!i?p>l&&g():!r&&i?f>c&&g():p>l&&f>=c?g():p>=l&&f>c&&g(),f===u}),s?[a,s]:null}(c,f,d,t,e)||o(c[0],f,d)}else[g,p]=o(c[0],f,d);let{left:m,top:b}=a(p);if(h){const t=a(new r.a(h)),e=i.a.window.getComputedStyle(h);m-=t.left,b-=t.top,m+=h.scrollLeft,b+=h.scrollTop,m-=parseInt(e.borderLeftWidth,10),b-=parseInt(e.borderTopWidth,10)}return{left:m,top:b,name:g}};var i=n(61),r=n(382),s=n(377);function o(t,e,n){const{left:i,top:r,name:s}=t(e,n);return[s,n.clone().moveTo(i,r)]}function a({left:t,top:e}){const{scrollX:n,scrollY:r}=i.a.window;return{left:t+n,top:e+r}}},function(t,e,n){"use strict";var i=n(61),r=n(380),s=n(473);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class o{constructor(t){if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!1,enumerable:!1}),n.i(s.a)(t))c(this,t.getBoundingClientRect());else if(n.i(r.a)(t))if(t.collapsed){const e=t.getClientRects();e.length?c(this,e[0]):(c(this,t.startContainer.getBoundingClientRect()),this.width=0)}else c(this,t.getBoundingClientRect());else c(this,t)}clone(){return new o(this)}moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this}moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this}getIntersection(t){const e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left)};return e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0?null:new o(e)}getIntersectionArea(t){const e=this.getIntersection(t);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let e=this.clone();if(t!=i.a.document.body){let n=t.parentNode||t.commonAncestorContainer;for(;n&&n!=i.a.document.body;){const t=new o(n),i=e.getIntersection(t);if(!i)return null;i.getArea()<e.getArea()&&(e=i),n=n.parentNode}}return e}static getViewportRect(){const{innerWidth:t,innerHeight:e}=i.a.window;return new o({top:0,right:t,bottom:e,left:0,width:t,height:e})}}e.a=o;const a=["top","right","bottom","left","width","height"];function c(t,e){for(const n of a)t[n]=e[n]}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t){const e=t.parentNode;e&&e.removeChild(t)}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e){t instanceof HTMLTextAreaElement&&(t.value=e);t.innerHTML=e}},function(t,e,n){"use strict";
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class{constructor(){this._replacedElements=[]}replace(t,e){this._replacedElements.push({element:t,newElement:e}),t.style.display="none",e&&t.parentNode.insertBefore(e,t.nextSibling)}restore(){this._replacedElements.forEach(({element:t,newElement:e})=>{t.style.display="",e&&e.remove()}),this._replacedElements=[]}}},function(t,e,n){"use strict";
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */const i={mac:function(t){return t.indexOf("macintosh")>-1}(navigator.userAgent.toLowerCase())};e.a=i},function(t,e,n){"use strict";var i=n(489);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class{constructor(t,e){this.source=t,this.name=e,this.path=[],this.stop=n.i(i.a)(),this.off=n.i(i.a)()}}},function(t,e,n){"use strict";var i=n(49),r=n(30),s=n.i(i.a)(r.a,"DataView");e.a=s},function(t,e,n){"use strict";var i=n(435),r=n(436),s=n(437),o=n(438),a=n(439);function c(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}c.prototype.clear=i.a,c.prototype.delete=r.a,c.prototype.get=s.a,c.prototype.has=o.a,c.prototype.set=a.a,e.a=c},function(t,e,n){"use strict";var i=n(49),r=n(30),s=n.i(i.a)(r.a,"Promise");e.a=s},function(t,e,n){"use strict";var i=n(30).a.Reflect;e.a=i},function(t,e,n){"use strict";var i=n(49),r=n(30),s=n.i(i.a)(r.a,"WeakMap");e.a=s},function(t,e,n){"use strict";e.a=function(t,e){return t.set(e[0],e[1]),t}},function(t,e,n){"use strict";e.a=function(t,e){return t.add(e),t}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,i=t.length;++n<i&&!1!==e(t[n],n,t););return t}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){"use strict";var i=n(135),r=n(66);e.a=function(t,e){return t&&n.i(i.a)(e,n.i(r.a)(e),t)}},function(t,e,n){"use strict";var i=n(218);e.a=function(t,e){for(var r=-1,s=null==t,o=e.length,a=Array(o);++r<o;)a[r]=s?void 0:n.i(i.a)(t,e[r]);return a}},function(t,e,n){"use strict";e.a=function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}},function(t,e,n){"use strict";var i=n(15),r=Object.create;e.a=function(t){return n.i(i.a)(t)?r(t):{}}},function(t,e,n){"use strict";var i=n(16),r=n(483);e.a=function(t,e,s,o){var a=t.length;for((s=n.i(i.a)(s))<0&&(s=-s>a?0:a+s),(o=void 0===o||o>a?a:n.i(i.a)(o))<0&&(o+=a),o=s>o?0:n.i(r.a)(o);s<o;)t[s++]=e;return t}},function(t,e,n){"use strict";var i=n(81),r=n(12);e.a=function(t,e,s){var o=e(t);return n.i(r.a)(t)?o:n.i(i.a)(o,s(t))}},function(t,e,n){"use strict";e.a=function(t,e){return e in Object(t)}},function(t,e,n){"use strict";e.a=function(t,e,n,i){for(var r=n-1,s=t.length;++r<s;)if(i(t[r],e))return r;return-1}},function(t,e,n){"use strict";var i=n(119),r=n(195),s=n(429),o=n(430),a=n(137),c=n(12),l=n(87),u=n(475),h=2,d="[object Arguments]",f="[object Array]",p="[object Object]",g=Object.prototype.hasOwnProperty;e.a=function(t,e,m,b,w,v){var y=n.i(c.a)(t),_=n.i(c.a)(e),k=f,x=f;y||(k=(k=n.i(a.a)(t))==d?p:k),_||(x=(x=n.i(a.a)(e))==d?p:x);var C=k==p&&!n.i(l.a)(t),A=x==p&&!n.i(l.a)(e),T=k==x;if(T&&!C)return v||(v=new i.a),y||n.i(u.a)(t)?n.i(r.a)(t,e,m,b,w,v):n.i(s.a)(t,e,k,m,b,w,v);if(!(w&h)){var S=C&&g.call(t,"__wrapped__"),P=A&&g.call(e,"__wrapped__");if(S||P){var E=S?t.value():t,O=P?e.value():e;return v||(v=new i.a),m(E,O,b,w,v)}}return!!T&&(v||(v=new i.a),n.i(o.a)(t,e,m,b,w,v))}},function(t,e,n){"use strict";var i=n(119),r=n(126),s=1,o=2;e.a=function(t,e,a,c){var l=a.length,u=l,h=!c;if(null==t)return!u;for(t=Object(t);l--;){var d=a[l];if(h&&d[2]?d[1]!==t[d[0]]:!(d[0]in t))return!1}for(;++l<u;){var f=(d=a[l])[0],p=t[f],g=d[1];if(h&&d[2]){if(void 0===p&&!(f in t))return!1}else{var m=new i.a;if(c)var b=c(p,g,f,t,e,m);if(!(void 0===b?n.i(r.a)(g,p,c,s|o,m):b))return!1}}return!0}},function(t,e,n){"use strict";var i=Object.keys;e.a=function(t){return i(Object(t))}},function(t,e,n){"use strict";var i=n(391),r=n(445),s=Object.prototype,o=i.a?i.a.enumerate:void 0,a=s.propertyIsEnumerable;function c(t){t=null==t?t:Object(t);var e=[];for(var n in t)e.push(n);return e}o&&!a.call({valueOf:1},"valueOf")&&(c=function(t){return n.i(r.a)(o(t))}),e.a=c},function(t,e,n){"use strict";var i=n(406),r=n(433),s=n(200);e.a=function(t){var e=n.i(r.a)(t);return 1==e.length&&e[0][2]?n.i(s.a)(e[0][0],e[0][1]):function(r){return r===t||n.i(i.a)(r,t,e)}}},function(t,e,n){"use strict";var i=n(126),r=n(218),s=n(471),o=n(50),a=n(199),c=n(200),l=n(51),u=1,h=2;e.a=function(t,e){return n.i(o.a)(t)&&n.i(a.a)(e)?n.i(c.a)(n.i(l.a)(t),e):function(o){var a=n.i(r.a)(o,t);return void 0===a&&a===e?n.i(s.a)(o,t):n.i(i.a)(e,a,void 0,u|h)}}},function(t,e,n){"use strict";var i=n(35);e.a=function(t,e){var r=t.length;if(r)return e+=e<0?r:0,n.i(i.a)(e,r)?t[e]:void 0}},function(t,e,n){"use strict";var i=n(123);e.a=function(t){return function(e){return n.i(i.a)(e,t)}}},function(t,e,n){"use strict";var i=n(64),r=n(85),s=n(35),o=n(50),a=n(15),c=n(51);e.a=function(t,e,l,u){for(var h=-1,d=(e=n.i(o.a)(e,t)?[e]:n.i(r.a)(e)).length,f=d-1,p=t;null!=p&&++h<d;){var g=n.i(c.a)(e[h]);if(n.i(a.a)(p)){var m=l;if(h!=f){var b=p[g];void 0===(m=u?u(b,g,p):void 0)&&(m=null==b?n.i(s.a)(e[h+1])?[]:{}:b)}n.i(i.a)(p,g,m)}p=p[g]}return t}},function(t,e,n){"use strict";var i=n(26);e.a=function(t,e){return n.i(i.a)(e,function(e){return[e,t[e]]})}},function(t,e,n){"use strict";var i=n(120),r=n(44),s=1/0,o=i.a?i.a.prototype:void 0,a=o?o.toString:void 0;e.a=function(t){if("string"==typeof t)return t;if(n.i(r.a)(t))return a?a.call(t):"";var e=t+"";return"0"==e&&1/t==-s?"-0":e}},function(t,e,n){"use strict";e.a=function(t){return t&&t.Object===Object?t:null}},function(t,e,n){"use strict";e.a=function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}},function(t,e,n){"use strict";var i=n(134);e.a=function(t,e){var r=e?n.i(i.a)(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}},function(t,e,n){"use strict";var i=n(393),r=n(186),s=n(138);e.a=function(t,e,o){var a=e?o(n.i(s.a)(t),!0):n.i(s.a)(t);return n.i(r.a)(a,i.a,new t.constructor)}},function(t,e,n){"use strict";var i=/\w*$/;e.a=function(t){var e=new t.constructor(t.source,i.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){"use strict";var i=n(394),r=n(186),s=n(91);e.a=function(t,e,o){var a=e?o(n.i(s.a)(t),!0):n.i(s.a)(t);return n.i(r.a)(a,i.a,new t.constructor)}},function(t,e,n){"use strict";var i=n(120),r=i.a?i.a.prototype:void 0,s=r?r.valueOf:void 0;e.a=function(t){return s?Object(s.call(t)):{}}},function(t,e,n){"use strict";var i=n(134);e.a=function(t,e){var r=e?n.i(i.a)(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}},function(t,e,n){"use strict";var i=n(44);e.a=function(t,e){if(t!==e){var r=void 0!==t,s=null===t,o=t==t,a=n.i(i.a)(t),c=void 0!==e,l=null===e,u=e==e,h=n.i(i.a)(e);if(!l&&!h&&!a&&t>e||a&&c&&u&&!l&&!h||s&&c&&u||!r&&u||!o)return 1;if(!s&&!a&&!h&&t<e||h&&r&&o&&!s&&!a||l&&r&&o||!c&&o||!u)return-1}return 0}},function(t,e,n){"use strict";var i=n(135),r=n(196);e.a=function(t,e){return n.i(i.a)(t,n.i(r.a)(t),e)}},function(t,e,n){"use strict";var i=n(88),r=n(8);e.a=function(t){return n.i(r.a)(function(e,r){var s=-1,o=r.length,a=o>1?r[o-1]:void 0,c=o>2?r[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,c&&n.i(i.a)(r[0],r[1],c)&&(a=o<3?void 0:a,o=1),e=Object(e);++s<o;){var l=r[s];l&&t(e,l,s,a)}return e})}},function(t,e,n){"use strict";var i=n(183),r=n(478),s=n(91),o=i.a&&1/n.i(s.a)(new i.a([,-0]))[1]==1/0?function(t){return new i.a(t)}:r.a;e.a=o},function(t,e,n){"use strict";var i=n(414),r=n(137),s=n(138),o=n(459),a="[object Map]",c="[object Set]";e.a=function(t){return function(e){var l=n.i(r.a)(e);return l==a?n.i(s.a)(e):l==c?n.i(o.a)(e):n.i(i.a)(e,t(e))}}},function(t,e,n){"use strict";var i=n(120),r=n(184),s=n(195),o=n(138),a=n(91),c=1,l=2,u="[object Boolean]",h="[object Date]",d="[object Error]",f="[object Map]",p="[object Number]",g="[object RegExp]",m="[object Set]",b="[object String]",w="[object Symbol]",v="[object ArrayBuffer]",y="[object DataView]",_=i.a?i.a.prototype:void 0,k=_?_.valueOf:void 0;e.a=function(t,e,i,_,x,C,A){switch(i){case y:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case v:return!(t.byteLength!=e.byteLength||!_(new r.a(t),new r.a(e)));case u:case h:return+t==+e;case d:return t.name==e.name&&t.message==e.message;case p:return t!=+t?e!=+e:t==+e;case g:case b:return t==e+"";case f:var T=o.a;case m:var S=C&l;if(T||(T=a.a),t.size!=e.size&&!S)return!1;var P=A.get(t);return P?P==e:(C|=c,A.set(t,e),n.i(s.a)(T(t),T(e),_,x,C,A));case w:if(k)return k.call(t)==k.call(e)}return!1}},function(t,e,n){"use strict";var i=n(189),r=n(66),s=2;e.a=function(t,e,o,a,c,l){var u=c&s,h=n.i(r.a)(t),d=h.length;if(d!=n.i(r.a)(e).length&&!u)return!1;for(var f=d;f--;){var p=h[f];if(!(u?p in e:n.i(i.a)(e,p)))return!1}var g=l.get(t);if(g)return g==e;var m=!0;l.set(t,e);for(var b=u;++f<d;){var w=t[p=h[f]],v=e[p];if(a)var y=u?a(v,w,p,e,t,l):a(w,v,p,t,e,l);if(!(void 0===y?w===v||o(w,v,a,c,l):y)){m=!1;break}b||(b="constructor"==p)}if(m&&!b){var _=t.constructor,k=e.constructor;_!=k&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof k&&k instanceof k)&&(m=!1)}return l.delete(t),m}},function(t,e,n){"use strict";var i=n(402),r=n(196),s=n(66);e.a=function(t){return n.i(i.a)(t,s.a,r.a)}},function(t,e,n){"use strict";var i=n(127),r=n.i(i.a)("length");e.a=r},function(t,e,n){"use strict";var i=n(199),r=n(484);e.a=function(t){for(var e=n.i(r.a)(t),s=e.length;s--;)e[s][2]=n.i(i.a)(e[s][1]);return e}},function(t,e,n){"use strict";var i=n(85),r=n(143),s=n(12),o=n(35),a=n(50),c=n(94),l=n(145),u=n(51);e.a=function(t,e,h){for(var d,f=-1,p=(e=n.i(a.a)(e,t)?[e]:n.i(i.a)(e)).length;++f<p;){var g=n.i(u.a)(e[f]);if(!(d=null!=t&&h(t,g)))break;t=t[g]}return d||!!(p=t?t.length:0)&&n.i(c.a)(p)&&n.i(o.a)(g,p)&&(n.i(s.a)(t)||n.i(l.a)(t)||n.i(r.a)(t))}},function(t,e,n){"use strict";var i=n(90);e.a=function(){this.__data__=i.a?n.i(i.a)(null):{}}},function(t,e,n){"use strict";e.a=function(t){return this.has(t)&&delete this.__data__[t]}},function(t,e,n){"use strict";var i=n(90),r="__lodash_hash_undefined__",s=Object.prototype.hasOwnProperty;e.a=function(t){var e=this.__data__;if(i.a){var n=e[t];return n===r?void 0:n}return s.call(e,t)?e[t]:void 0}},function(t,e,n){"use strict";var i=n(90),r=Object.prototype.hasOwnProperty;e.a=function(t){var e=this.__data__;return i.a?void 0!==e[t]:r.call(e,t)}},function(t,e,n){"use strict";var i=n(90),r="__lodash_hash_undefined__";e.a=function(t,e){return this.__data__[t]=i.a&&void 0===e?r:e,this}},function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty;e.a=function(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&i.call(t,"index")&&(n.index=t.index,n.input=t.input),n}},function(t,e,n){"use strict";var i=n(134),r=n(418),s=n(419),o=n(420),a=n(421),c=n(422),l=n(423),u="[object Boolean]",h="[object Date]",d="[object Map]",f="[object Number]",p="[object RegExp]",g="[object Set]",m="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",v="[object DataView]",y="[object Float32Array]",_="[object Float64Array]",k="[object Int8Array]",x="[object Int16Array]",C="[object Int32Array]",A="[object Uint8Array]",T="[object Uint8ClampedArray]",S="[object Uint16Array]",P="[object Uint32Array]";e.a=function(t,e,E,O){var R=t.constructor;switch(e){case w:return n.i(i.a)(t);case u:case h:return new R(+t);case v:return n.i(r.a)(t,O);case y:case _:case k:case x:case C:case A:case T:case S:case P:return n.i(l.a)(t,O);case d:return n.i(s.a)(t,O,E);case f:case m:return new R(t);case p:return n.i(o.a)(t);case g:return n.i(a.a)(t,O,E);case b:return n.i(c.a)(t)}}},function(t,e,n){"use strict";var i=n(400),r=n(136),s=n(89);e.a=function(t){return"function"!=typeof t.constructor||n.i(s.a)(t)?{}:n.i(i.a)(n.i(r.a)(t))}},function(t,e,n){"use strict";var i=n(143),r=n(12);e.a=function(t){return n.i(r.a)(t)||n.i(i.a)(t)}},function(t,e,n){"use strict";e.a=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){"use strict";e.a=function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}},function(t,e,n){"use strict";e.a=function(){this.__data__=[]}},function(t,e,n){"use strict";var i=n(82),r=Array.prototype.splice;e.a=function(t){var e=this.__data__,s=n.i(i.a)(e,t);return!(s<0||(s==e.length-1?e.pop():r.call(e,s,1),0))}},function(t,e,n){"use strict";var i=n(82);e.a=function(t){var e=this.__data__,r=n.i(i.a)(e,t);return r<0?void 0:e[r][1]}},function(t,e,n){"use strict";var i=n(82);e.a=function(t){return n.i(i.a)(this.__data__,t)>-1}},function(t,e,n){"use strict";var i=n(82);e.a=function(t,e){var r=this.__data__,s=n.i(i.a)(r,t);return s<0?r.push([t,e]):r[s][1]=e,this}},function(t,e,n){"use strict";var i=n(389),r=n(78),s=n(182);e.a=function(){this.__data__={hash:new i.a,map:new(s.a||r.a),string:new i.a}}},function(t,e,n){"use strict";var i=n(86);e.a=function(t){return n.i(i.a)(this,t).delete(t)}},function(t,e,n){"use strict";var i=n(86);e.a=function(t){return n.i(i.a)(this,t).get(t)}},function(t,e,n){"use strict";var i=n(86);e.a=function(t){return n.i(i.a)(this,t).has(t)}},function(t,e,n){"use strict";var i=n(86);e.a=function(t,e){return n.i(i.a)(this,t).set(t,e),this}},function(t,e,n){"use strict";var i=n(123),r=n(34);e.a=function(t,e){return 1==e.length?t:n.i(i.a)(t,n.i(r.a)(e,0,-1))}},function(t,e,n){"use strict";var i="__lodash_hash_undefined__";e.a=function(t){return this.__data__.set(t,i),this}},function(t,e,n){"use strict";e.a=function(t){return this.__data__.has(t)}},function(t,e,n){"use strict";e.a=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}},function(t,e,n){"use strict";var i=n(78);e.a=function(){this.__data__=new i.a}},function(t,e,n){"use strict";e.a=function(t){return this.__data__.delete(t)}},function(t,e,n){"use strict";e.a=function(t){return this.__data__.get(t)}},function(t,e,n){"use strict";e.a=function(t){return this.__data__.has(t)}},function(t,e,n){"use strict";var i=n(78),r=n(118),s=200;e.a=function(t,e){var n=this.__data__;return n instanceof i.a&&n.__data__.length==s&&(n=this.__data__=new r.a(n.__data__)),n.set(t,e),this}},function(t,e,n){"use strict";var i=n(477),r=n(485),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,o=/\\(\\)?/g,a=n.i(i.a)(function(t){var e=[];return n.i(r.a)(t).replace(s,function(t,n,i,r){e.push(i?r.replace(o,"$1"):n||t)}),e});e.a=a},function(t,e,n){"use strict";var i=n(202),r=n(203),s=n(204),o=n(205),a=n(206),c=n(207),l=n(140),u=n(141),h=n(208),d=n(209),f=n(210),p=n(211),g=n(212),m=n(213),b=n(214),w=n(215),v=n(216),y=n(217),_=n(142),k=n(220),x=n(221),C=n(222),A=n(223),T=n(224),S=n(226),P=n(20),E=n(227),O=n(228),R=n(229),N=n(146),M=n(230),F=n(231),L=n(232),V=n(233),I=n(234),B=n(235),D=n(236),j=n(237),q=n(238),$=n(239),z=n(240),H=n(241),W=n(242),K=n(243),U=n(244),J=n(245),G=n(246),Z=n(247),Y=n(248),X=n(250),Q=n(251),tt=n(252),et=n(253),nt=n(254),it=n(255),rt=n(96),st=n(147),ot=n(256),at=n(257),ct=n(258),lt=n(259),ut=n(260),ht=n(261),dt=n(262),ft=n(263);e.a={chunk:i.a,compact:r.a,concat:s.a,difference:o.a,differenceBy:a.a,differenceWith:c.a,drop:l.a,dropRight:u.a,dropRightWhile:h.a,dropWhile:d.a,fill:f.a,findIndex:p.a,findLastIndex:g.a,first:m.a,flatten:b.a,flattenDeep:w.a,flattenDepth:v.a,fromPairs:y.a,head:_.a,indexOf:k.a,initial:x.a,intersection:C.a,intersectionBy:A.a,intersectionWith:T.a,join:S.a,last:P.a,lastIndexOf:E.a,nth:O.a,pull:R.a,pullAll:N.a,pullAllBy:M.a,pullAllWith:F.a,pullAt:L.a,remove:V.a,reverse:I.a,slice:B.a,sortedIndex:D.a,sortedIndexBy:j.a,sortedIndexOf:q.a,sortedLastIndex:$.a,sortedLastIndexBy:z.a,sortedLastIndexOf:H.a,sortedUniq:W.a,sortedUniqBy:K.a,tail:U.a,take:J.a,takeRight:G.a,takeRightWhile:Z.a,takeWhile:Y.a,union:X.a,unionBy:Q.a,unionWith:tt.a,uniq:et.a,uniqBy:nt.a,uniqWith:it.a,unzip:rt.a,unzipWith:st.a,without:ot.a,xor:at.a,xorBy:ct.a,xorWith:lt.a,zip:ut.a,zipObject:ht.a,zipObjectDeep:dt.a,zipWith:ft.a}},function(t,e,n){"use strict";n(202),n(203),n(204),n(205),n(206),n(207),n(140),n(141),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(142),n(220),n(221),n(222),n(223),n(224),n(226),n(20),n(227),n(228),n(229),n(146),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(250),n(251),n(252),n(253),n(254),n(255),n(96),n(147),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263);var i=n(466);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";var i=n(64),r=n(135),s=n(426),o=n(93),a=n(89),c=n(476),l=!Object.prototype.propertyIsEnumerable.call({valueOf:1},"valueOf"),u=n.i(s.a)(function(t,e){if(l||n.i(a.a)(e)||n.i(o.a)(e))n.i(r.a)(e,n.i(c.a)(e),t);else for(var s in e)n.i(i.a)(t,s,e[s])});e.a=u},function(t,e,n){"use strict";var i=n(187);e.a=function(t,e){return n.i(i.a)(t,!0,!0,e)}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";var i=n(403),r=n(434);e.a=function(t,e){return null!=t&&n.i(r.a)(t,e,i.a)}},function(t,e,n){"use strict";(function(t){var i=n(470),r=n(30),s={function:!0,object:!0},o=s[typeof exports]&&exports&&!exports.nodeType?exports:void 0,a=s[typeof t]&&t&&!t.nodeType?t:void 0,c=(a&&a.exports===o?o:void 0)?r.a.Buffer:void 0,l=c?function(t){return t instanceof c}:n.i(i.a)(!1);e.a=l}).call(e,n(269)(t))},function(t,e,n){"use strict";var i=n(43),r=n(95);e.a=function(t){return!!t&&1===t.nodeType&&n.i(i.a)(t)&&!n.i(r.a)(t)}},function(t,e,n){"use strict";var i=n(126);e.a=function(t,e){return n.i(i.a)(t,e)}},function(t,e,n){"use strict";var i=n(94),r=n(43),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;var o=Object.prototype.toString;e.a=function(t){return n.i(r.a)(t)&&n.i(i.a)(t.length)&&!!s[o.call(t)]}},function(t,e,n){"use strict";var i=n(408),r=n(197),s=n(35),o=n(89),a=Object.prototype.hasOwnProperty;e.a=function(t){for(var e=-1,c=n.i(o.a)(t),l=n.i(i.a)(t),u=l.length,h=n.i(r.a)(t),d=!!h,f=h||[],p=f.length;++e<u;){var g=l[e];d&&("length"==g||n.i(s.a)(g,p))||"constructor"==g&&(c||!a.call(t,g))||f.push(g)}return f}},function(t,e,n){"use strict";var i=n(118),r="Expected a function";function s(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(r);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o),o};return n.cache=new(s.Cache||i.a),n}s.Cache=i.a,e.a=s},function(t,e,n){"use strict";e.a=function(){}},function(t,e,n){"use strict";var i=Date.now;e.a=i},function(t,e,n){"use strict";var i=n(127),r=n(412),s=n(50),o=n(51);e.a=function(t){return n.i(s.a)(t)?n.i(i.a)(n.i(o.a)(t)):n.i(r.a)(t)}},function(t,e,n){"use strict";var i=n(139),r=n(15),s="Expected a function";e.a=function(t,e,o){var a=!0,c=!0;if("function"!=typeof t)throw new TypeError(s);return n.i(r.a)(o)&&(a="leading"in o?!!o.leading:a,c="trailing"in o?!!o.trailing:c),n.i(i.a)(t,e,{leading:a,maxWait:e,trailing:c})}},function(t,e,n){"use strict";var i=n(249),r=1/0,s=1.7976931348623157e308;e.a=function(t){return t?(t=n.i(i.a)(t))===r||t===-r?(t<0?-1:1)*s:t==t?t:0:0===t?t:0}},function(t,e,n){"use strict";var i=n(399),r=n(16),s=4294967295;e.a=function(t){return t?n.i(i.a)(n.i(r.a)(t),0,s):0}},function(t,e,n){"use strict";var i=n(428),r=n(66),s=n.i(i.a)(r.a);e.a=s},function(t,e,n){"use strict";var i=n(415);e.a=function(t){return null==t?"":n.i(i.a)(t)}},function(t,e,n){"use strict";var i=n(490);
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=class{constructor(t){this.lang=t||"en",this.t=((...t)=>this._t(...t))}_t(t,e){let r=n.i(i.a)(this.lang,t);return e&&(r=r.replace(/\%(\d+)/g,(t,n)=>n<e.length?e[n]:t)),r}}},function(t,e,n){"use strict";e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e){if(t.size!=e.size)return!1;for(let n of t.entries()){let t=JSON.stringify(n[1]),i=JSON.stringify(e.get(n[0]));if(t!==i)return!1}return!0}},function(t,e,n){"use strict";
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */const i={get(t){return"number"!=typeof t?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};e.a=i},function(t,e,n){"use strict";
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */e.a=function(){return function t(){t.called=!0}}},function(t,e,n){"use strict";e.a=function(t,e){if(!function(t,e){return t in i&&e in i[t]}(t,e))return e.replace(/ \[context: [^\]]+\]$/,"");return i[t][e]};
/**
 * @license Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
let i={}},function(t,e,n){"use strict";var i=n(3),r=n(315),s=n(2),o=n(56),a=n(6),c=n(112),l=n(166),u=n(266),h=n(22),d=n(513);n.n(d);e.a=
/**
 * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
class extends i.a{static get pluginName(){return"widget/widget"}init(){const t=this.editor.editing.view;let e;this.editor.editing.modelToView.on("selection",(t,i,r,s)=>{e&&e.hasClass(u.c)&&e.removeClass(u.c);const o=s.viewSelection,a=o.getSelectedElement();a&&n.i(u.b)(a)&&(o.setFake(!0,{label:n.i(u.d)(a)}),a.addClass(u.c),e=a)},{priority:"low"}),t.addObserver(r.a),this.listenTo(t,"mousedown",(...t)=>this._onMousedown(...t)),this.listenTo(t,"keydown",(...t)=>this._onKeydown(...t),{priority:"high"})}_onMousedown(t,e){const i=this.editor,r=i.editing.view;let s=e.target;if(function(t){for(;t;){if(t instanceof c.a&&!(t instanceof l.a))return!0;t=t.parent}return!1}(s))return;if(!n.i(u.b)(s)&&!(s=s.findAncestor(u.b)))return;e.preventDefault(),r.isFocused||r.focus();const o=i.editing.mapper.toModelElement(s);i.document.enqueueChanges(()=>{this._setSelectionOverElement(o)})}_onKeydown(t,e){const n=e.keyCode,i=n==h.a.delete||n==h.a.arrowdown||n==h.a.arrowright;((function(t){return t==h.a.delete||t==h.a.backspace})(n)&&this._handleDelete(i)||function(t){return t==h.a.arrowright||t==h.a.arrowleft||t==h.a.arrowup||t==h.a.arrowdown}(n)&&this._handleArrowKeys(i))&&(e.preventDefault(),t.stop())}_handleDelete(t){const e=this.editor.document,n=e.selection;if(!n.isCollapsed)return;const i=this._getObjectElementNextToSelection(t);return i?(e.enqueueChanges(()=>{const t=n.anchor.parent;t.isEmpty&&e.batch().remove(t),this._setSelectionOverElement(i)}),!0):void 0}_handleArrowKeys(t){const e=this.editor.document,n=e.schema,i=e.selection,r=i.getSelectedElement();if(r&&n.objects.has(r.name)){const n=t?i.getLastPosition():i.getFirstPosition(),r=e.getNearestSelectionRange(n,t?"forward":"backward");return r&&e.enqueueChanges(()=>{i.setRanges([r])}),!0}if(!i.isCollapsed)return;const s=this._getObjectElementNextToSelection(t);return s instanceof a.a&&e.schema.objects.has(s.name)?(e.enqueueChanges(()=>{this._setSelectionOverElement(s)}),!0):void 0}_setSelectionOverElement(t){this.editor.document.selection.setRanges([s.a.createOn(t)])}_getObjectElementNextToSelection(t){const e=this.editor.document,n=e.schema,i=e.selection,r=this.editor.data,s=o.a.createFromSelection(i);r.modifySelection(s,{direction:t?"forward":"backward"});const c=t?s.focus.nodeBefore:s.focus.nodeAfter;return c instanceof a.a&&n.objects.has(c.name)?c:null}}},function(t,e,n){"use strict";var i,r,s,o,a=n(496),c=n(268),l=n.n(c),u=n(267),h=n.n(u),d=n(284),f=n(319),p=n(350),g=n(74),m=n(370),b=n(271),w=n(275),v=n(273),y=n(325),_=n(340),k=n(333),x=n(322),C=n(499),A=n(502),T=n(505);i=void 0,r=void 0,s=void 0,(o=new h.a.Renderer).heading=function(t,e){return"<h"+e+">"+t+"</h"+e+">"},h.a.setOptions({renderer:o,gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1}),a.a.init.conf(function(t){var e,n,c,u,S,P;"unknown"===t.readURL?r="/bzzr:/":"unknown"!==t.readURL&&(r=t.readURL),"unknown"===t.postURL?i="/bzzr:/":"unknown"!==t.postURL&&(i=t.postURL),window.swarmagent||(window.swarmagent={}),window.swarmagent.editor={},window.swarmagent.editor.store={markdownMode:{isActive:!1},encrypted:!1},u=function(){n.innerHTML=c.value+"\n"},e=document.querySelector(".textarea-container"),n=e.querySelector(".textarea-size"),c=e.querySelector("textarea"),u(),c.addEventListener("input",u);try{d.a.create(document.querySelector("#ckeditor"),{heading:{options:[{modelElement:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{modelElement:"heading1",viewElement:"h1",title:"Heading 1",class:"ck-heading_heading1"},{modelElement:"heading2",viewElement:"h2",title:"Heading 2",class:"ck-heading_heading2"},{modelElement:"heading3",viewElement:"h3",title:"Heading 3",class:"ck-heading_heading3"}]},plugins:[f.a,x.a,p.a,g.a,m.a,b.a,v.a,y.a,k.a,_.a,A.a,T.a,C.a,w.a],toolbar:["headings","bold","italic","link","unlink","bulletedList","numberedList","undo","redo","submit","toMarkdown","encrypt"]}).then(function(t){window.swarmagent.editor.engine=t,(s=t).setData("<h2>What would you like to share?</h2>")}).catch(function(t){console.error(t.stack)})}catch(t){S=document.querySelector("#ckeditor"),(P=document.createElement("p")).innerHTML="\n\t\t\t\t\t<h2>That's a shame...</h2>\n\t\t\t\t\t<p>We're not proud of this but this early developer preview does not work in your web browser.</p>\n\t\t\t\t\t<p>Please consider using <a href=\"https://www.google.com/chrome/\">Google Chrome</a> instead.</p>\n\t\t\t\t\t<p>We're terribly sorry.</p>\n\t\t\t\t",P.classList.add("message"),S.parentNode.insertBefore(P,S)}window.swarmagent.editor.submitPost=function(t){var e=l()(t,{gfm:!0}),n=window.swarmagent.editor.store.encrypted,r=i;n&&(r=i+"encrypted"),a.a.communicate.post(e,r,function(t,e){if(200!=e)s.setData("Oops! We could not post this document. <br /> Error: <br /> "+t),document.title="Post error!";else if(200==e){var n="index.html#"+t;window.location.href=n}})};var E=function(){if(window.location.hash){var t=window.location.hash.substring(1),e=r+t,n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var t=this.getResponseHeader("content-type");if(!a.a.verify.contentType(t).validity&&"404"!=n.status)return document.title="Document error!",void s.setData("Oops! We could not find this document.");if("404"==n.status)document.title="Document error!",s.setData("Oops! We could not find this document.");else{var e=h()(n.responseText,{renderer:o});s.setData(e)}}},n.open("GET",e,!0),n.send()}};window.onhashchange=E,E()})},function(t,e,n){"use strict";var i={post:function(t,e,n){var i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("Content-type","text/plain;charset=UTF-8"),i.onreadystatechange=function(){4==i.readyState&&n(i.responseText,i.status)},i.send(t)}};e.a=i},function(t,e,n){"use strict";var i={conf:function(t){var e={postURL:"unknown",readURL:"unknown"},n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState)if("404"==n.status)t();else{var i=JSON.parse(n.responseText);i.configuration.postURL&&(e.postURL=i.configuration.postURL),i.configuration.readURL&&(e.readURL=i.configuration.readURL),t(e)}},n.open("GET","./appConfiguration.json",!0),n.send()}};e.a=i},function(t,e,n){"use strict";var i={contentType:function(t){var e={validity:!1,error:"You should never be seeing this error, please inform us"};return-1!=t.indexOf("text/html")?(e.error="Oops, you tried to load an HTML document",e):(e.validity=!0,e)}};e.a=i},function(t,e,n){"use strict";var i=n(494),r=n(493),s=n(495),o={init:{conf:function(t){return i.a.conf(t)}},communicate:{post:function(t,e,n){return r.a.post(t,e,n)}},verify:{contentType:function(t){return s.a.contentType(t)}}};e.a=o},function(t,e){t.exports=["address","article","aside","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tfoot","ul","video"]},function(t,e,n){"use strict";var i=n(531);Object.keys(i).forEach(function(t){i[t.toUpperCase()]=1});var r={};function s(t){return!(!t||!r[t.nodeName])}function o(t){return!(!t||!i[t.nodeName])}function a(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function c(t,e){return t&&t.parentNode===e||"PRE"===e.nodeName?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}n(497).forEach(function(t){r[t.toUpperCase()]=1}),t.exports=function(t,e){if(t.firstChild&&"PRE"!==t.nodeName){"function"!=typeof e&&(e=s);for(var n=null,i=!1,r=null,l=c(r,t);l!==t;){if(3===l.nodeType){var u=l.data.replace(/[ \r\n\t]+/g," ");if(n&&!/ $/.test(n.data)||i||" "!==u[0]||(u=u.substr(1)),!u){l=a(l);continue}l.data=u,n=l}else{if(1!==l.nodeType){l=a(l);continue}e(l)||"BR"===l.nodeName?(n&&(n.data=n.data.replace(/ $/,"")),n=null,i=!1):o(l)&&(n=null,i=!0)}var h=c(r,l);r=l,l=h}n&&(n.data=n.data.replace(/ $/,""),n.data||a(n))}}},function(t,e,n){"use strict";var i=n(3),r=n(501),s=n(19),o=n(524),a=n.n(o);e.a=class extends i.a{static get requires(){return[r.a]}init(){const t=this.editor,e=t.t,n=t.commands.get("ToggleEncrypt");t.ui.componentFactory.add("encrypt",i=>{const r=new s.a(i);let o=window.swarmagent.editor.store.encrypted?"Disable encryption":"Enable Encryption",c={label:e(o),icon:a.a,tooltip:!0,withText:!0};return r.set(c),r.bind("isOn","isEnabled").to(n,"value","isEnabled"),this.listenTo(r,"execute",()=>{t.execute("ToggleEncrypt"),o=window.swarmagent.editor.store.encrypted?"Disable encryption":"Enable Encryption",c.label=o,r.set(c)}),r})}}},function(t,e,n){"use strict";var i=n(11);e.a=class extends i.a{_doExecute(){window.swarmagent.editor.store.encrypted=!window.swarmagent.editor.store.encrypted}}},function(t,e,n){"use strict";var i=n(3),r=n(500);e.a=class extends i.a{init(){const t=this.editor;t.commands.set("ToggleEncrypt",new r.a(t))}}},function(t,e,n){"use strict";var i=n(3),r=n(504),s=n(19),o=n(525),a=n.n(o);e.a=class extends i.a{static get requires(){return[r.a]}init(){const t=this.editor,e=t.t,n=t.commands.get("SubmitDocument");t.ui.componentFactory.add("submit",i=>{const r=new s.a(i);return r.set({label:e("Submit"),icon:a.a,keystroke:"CTRL+ENTER",tooltip:!0,withText:!0}),r.bind("isOn","isEnabled").to(n,"value","isEnabled"),this.listenTo(r,"execute",()=>t.execute("SubmitDocument")),r}),t.keystrokes.set("CTRL+ENTER","SubmitDocument")}}},function(t,e,n){"use strict";var i=n(11);e.a=class extends i.a{_doExecute(){const t=this.editor.getData();window.swarmagent.editor.submitPost(t)}}},function(t,e,n){"use strict";var i=n(3),r=n(503);e.a=class extends i.a{init(){const t=this.editor;t.commands.set("SubmitDocument",new r.a(t))}}},function(t,e,n){"use strict";var i=n(3),r=n(507),s=n(19),o=n(526),a=n.n(o);e.a=class extends i.a{static get requires(){return[r.a]}init(){const t=this.editor,e=t.t,n=t.commands.get("ConvertToMarkdown");t.ui.componentFactory.add("toMarkdown",i=>{const r=new s.a(i);return r.set({label:e("ToMarkdown"),icon:a.a,keystroke:"CTRL+ENTER",tooltip:!0,withText:!0}),r.bind("isOn","isEnabled").to(n,"value","isEnabled"),this.listenTo(r,"execute",()=>t.execute("ConvertToMarkdown")),r}),t.keystrokes.set("CTRL+ENTER","ConvertToMarkdown")}}},function(t,e,n){"use strict";var i=n(11),r=n(268),s=n.n(r),o=n(267),a=n.n(o);function c(t,e){e.isEnabled=!1,t.stop()}e.a=class extends i.a{_doExecute(){const t=window.swarmagent.editor.engine,e=t.getData(),n=window.swarmagent.editor.store,i=new a.a.Renderer;i.heading=function(t,e){return`<h${e}>${t}</h${e}>`},a.a.setOptions({renderer:i,gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1}),a.a.Lexer.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u2424/g,"\n"),this.token(t,!0)};const r=[];if(n.markdownMode.isActive){if(n.markdownMode.isActive){t.commands.forEach(t=>{-1==r.indexOf(t.constructor.name)&&t!=this&&(t.off("refreshState",c),t.refreshState())});const e=document.getElementsByClassName("ck-editor__main")[0],i=document.getElementById("markdownField"),s=i.value;e.style.display="block",i.style.display="none",t.setData(a()(s)),n.markdownMode.isActive=!1}}else{t.commands.forEach(t=>{-1==r.indexOf(t.constructor.name)&&t!=this&&(t.on("refreshState",c),t.refreshState())});const i=document.getElementsByClassName("ck-editor__main")[0],o=document.getElementById("markdownField");o.value=s()(e,{gfm:!0}),i.style.display="none",o.style.display="block";const a=new Event("input",{bubbles:!0,cancelable:!0});o.dispatchEvent(a),n.markdownMode.isActive=!0}}}},function(t,e,n){"use strict";var i=n(3),r=n(506);e.a=class extends i.a{init(){const t=this.editor;t.commands.set("ConvertToMarkdown",new r.a(t))}}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    \x3c!-- Generator: Sketch 3.5.2 (25235) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>bold</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="bold" sketch:type="MSArtboardGroup" fill="#454545">\n            <g id="icon:bold" sketch:type="MSLayerGroup" transform="translate(4.000000, 3.000000)">\n                <path d="M11.135257,7.40877709 C11.4960763,7.65684034 11.7892376,7.96832419 12.0147496,8.34323798 C12.2402617,8.71815176 12.353016,9.15930309 12.353016,9.66670521 C12.353016,10.2755877 12.2247579,10.7900294 11.968238,11.2100456 C11.711718,11.6300618 11.343857,11.9612776 10.8646439,12.2037031 C10.3572418,12.463042 9.77232867,12.6462677 9.10988702,12.753386 C8.44744538,12.8605042 7.66803104,12.9140625 6.77162064,12.9140625 L0.5390625,12.9140625 L0.5390625,12.254443 C0.713834339,12.2375296 0.933705291,12.2121599 1.19868195,12.1783331 C1.46365861,12.1445063 1.64970326,12.1050423 1.75682149,12.0599399 C1.96542013,11.9753729 2.10777248,11.864028 2.1838828,11.7259018 C2.25999311,11.5877757 2.2980477,11.4087782 2.2980477,11.1889039 L2.2980477,2.73224432 C2.2980477,2.52928347 2.26704026,2.36015197 2.20502445,2.22484474 C2.14300863,2.08953751 1.99360914,1.97114546 1.75682149,1.86966504 C1.58204965,1.79637362 1.37909184,1.73576817 1.14794199,1.68784686 C0.916792141,1.63992554 0.713834339,1.60187096 0.5390625,1.57368195 L0.5390625,0.9140625 L7.05914707,0.9140625 C8.69974724,0.9140625 9.88366774,1.13957117 10.6109441,1.59059527 C11.3382205,2.04161937 11.7018532,2.70686994 11.7018532,3.58636694 C11.7018532,3.99228863 11.6201063,4.34887421 11.4566101,4.65613438 C11.2931138,4.96339455 11.0591486,5.22977666 10.7547073,5.45528872 C10.4784551,5.66388736 10.1486486,5.8442943 9.76527814,5.99651493 C9.38190766,6.14873557 8.97035434,6.27558419 8.53060584,6.37706461 L8.53060584,6.53774115 C8.97035434,6.58284356 9.42700939,6.68009417 9.9005847,6.8294959 C10.37416,6.97889764 10.7857133,7.17198943 11.135257,7.40877709 L11.135257,7.40877709 Z M8.41221261,3.79778343 C8.41221261,3.13252288 8.22475853,2.61385294 7.84984474,2.24175806 C7.47493096,1.86966318 6.91256872,1.68361853 6.16274115,1.68361853 C6.05562292,1.68361853 5.91608943,1.68784681 5.7441365,1.69630351 C5.57218356,1.70476022 5.42419349,1.71180736 5.30016187,1.71744516 L5.30016187,6.16564812 L5.73990817,6.16564812 C6.65323197,6.16564812 7.32693912,5.95282432 7.76104982,5.52717032 C8.19516051,5.10151633 8.41221261,4.52505979 8.41221261,3.79778343 L8.41221261,3.79778343 Z M9.00417878,9.55676863 C9.00417878,8.72237404 8.75611924,8.0824932 8.25999273,7.6371069 C7.76386622,7.1917206 7.05069506,6.96903079 6.12045785,6.96903079 C6.01333962,6.96903079 5.87098728,6.97325908 5.69339654,6.98171578 C5.5158058,6.99017248 5.38472888,6.99721962 5.30016187,7.00285743 L5.30016187,11.3918638 C5.35090208,11.6004624 5.50875814,11.7766411 5.7737348,11.920405 C6.03871146,12.0641689 6.36006132,12.1360498 6.737794,12.1360498 C7.40869235,12.1360498 7.95414144,11.9105411 8.37415764,11.459517 C8.79417383,11.0084929 9.00417878,10.3742498 9.00417878,9.55676863 L9.00417878,9.55676863 Z" id="B" sketch:type="MSShapeGroup"></path>\n            </g>\n        </g>\n    </g>\n</svg>'},function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    \x3c!-- Generator: Sketch 3.5.2 (25235) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>italic</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="italic" sketch:type="MSArtboardGroup" fill="#454545">\n            <g id="icon:italic" sketch:type="MSLayerGroup" transform="translate(5.000000, 3.000000)">\n                <path d="M8.82538319,0.9140625 L8.6985333,1.47220203 C8.52376146,1.47783984 8.29543393,1.50320956 8.01354387,1.54831197 C7.73165381,1.59341438 7.52305829,1.63569726 7.38775106,1.67516187 C7.1509634,1.74845328 6.9818319,1.86120762 6.88035148,2.01342825 C6.77887106,2.16564888 6.70558074,2.33196153 6.66047833,2.51237117 L4.63088002,11.2819272 C4.61960442,11.3213918 4.61114784,11.3664935 4.60551004,11.4172337 C4.59987224,11.467974 4.59705338,11.5130757 4.59705338,11.5525403 C4.59705338,11.6822097 4.62524197,11.7921452 4.68161998,11.88235 C4.73799799,11.9725548 4.83947689,12.0514829 4.98605973,12.1191365 C5.07062674,12.1586011 5.2566714,12.2051123 5.54419926,12.2586714 C5.83172712,12.3122305 6.04596036,12.3446474 6.18690539,12.355923 L6.0600555,12.9140625 L0.65625,12.9140625 L0.783099894,12.355923 C0.94095833,12.3446474 1.166467,12.3277342 1.45963266,12.305183 C1.75279833,12.2826318 1.96139385,12.2488055 2.08542548,12.2037031 C2.30529973,12.1247739 2.47161237,12.0162478 2.58436839,11.8781217 C2.69712442,11.7399956 2.77323359,11.5722735 2.8126982,11.3749504 L4.83383985,2.59693776 C4.84511545,2.54619755 4.85357203,2.4954581 4.85920983,2.44471789 C4.86484763,2.39397768 4.86766649,2.34323823 4.86766649,2.29249802 C4.86766649,2.17974199 4.84370619,2.08108195 4.79578488,1.99651493 C4.74786357,1.91194791 4.6477941,1.83583874 4.49557347,1.76818512 C4.34335283,1.70053151 4.13616674,1.63710719 3.87400899,1.57791028 C3.61185123,1.51871337 3.41875943,1.48347764 3.2947278,1.47220203 L3.4215777,0.9140625 L8.82538319,0.9140625 Z" id="I" sketch:type="MSShapeGroup"></path>\n            </g>\n        </g>\n    </g>\n</svg>'},function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg width="100%" height="100%" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;"><path d="M5.414,6.749l-2.511,-2.512c-0.192,-0.191 -0.192,-0.502 0,-0.694c0.192,-0.192 0.503,-0.192 0.694,0l2.797,2.797c0.695,-0.251 1.407,-0.428 2.127,-0.53c0.366,-0.051 0.734,-0.081 1.103,-0.095c0.137,-0.003 0.275,-0.005 0.412,-0.004c0.371,0.006 0.742,0.029 1.112,0.074c1.109,0.134 2.204,0.449 3.243,0.936c0.743,0.347 1.464,0.782 2.12,1.331c0.276,0.231 0.542,0.484 0.784,0.766c0.18,0.211 0.349,0.439 0.488,0.692c0.169,0.307 0.301,0.664 0.301,1.039c0,0.375 -0.132,0.732 -0.301,1.039c-0.139,0.252 -0.308,0.481 -0.488,0.691c-0.242,0.283 -0.508,0.535 -0.784,0.767c-0.647,0.542 -1.359,0.973 -2.092,1.318l2.196,2.197c0.192,0.191 0.192,0.503 0,0.694c-0.191,0.192 -0.503,0.192 -0.694,0l-2.485,-2.484l-0.008,0.003l-0.931,-0.931l0.009,-0.003l-6.215,-6.215c-0.321,0.131 -0.636,0.278 -0.945,0.444l6.239,6.24l-0.006,0.005l0.78,0.78c-0.388,0.094 -0.78,0.166 -1.174,0.215l-1.11,-1.11l0.011,0l-5.603,-5.603c-0.229,0.157 -0.452,0.328 -0.665,0.514c-0.038,0.032 -0.075,0.065 -0.112,0.098l4.897,4.897l-0.005,0.006l1.276,1.276c-0.494,-0.003 -0.987,-0.042 -1.477,-0.117l-0.479,-0.479l-0.009,0.009l-4.863,-4.863c-0.007,0.01 -0.015,0.021 -0.022,0.031c-0.044,0.065 -0.086,0.131 -0.124,0.2c-0.026,0.047 -0.05,0.095 -0.071,0.145c-0.014,0.031 -0.026,0.063 -0.037,0.096c-0.013,0.042 -0.026,0.087 -0.028,0.133c-0.001,0.024 0.003,0.049 0.008,0.072c0.009,0.041 0.022,0.082 0.036,0.12c0.014,0.036 0.029,0.072 0.046,0.106c0.031,0.065 0.066,0.126 0.103,0.186c0.041,0.067 0.085,0.131 0.131,0.193l3.463,3.594c-0.281,-0.097 -0.56,-0.206 -0.835,-0.326c-0.44,-0.193 -0.872,-0.417 -1.29,-0.674c-0.35,-0.215 -0.69,-0.454 -1.015,-0.721c-0.281,-0.23 -0.551,-0.482 -0.798,-0.764c-0.184,-0.21 -0.357,-0.438 -0.502,-0.69c-0.184,-0.319 -0.329,-0.693 -0.329,-1.089c0,-0.375 0.131,-0.732 0.301,-1.039c0.139,-0.253 0.307,-0.481 0.488,-0.692c0.225,-0.263 0.471,-0.5 0.728,-0.719c0.647,-0.552 1.36,-0.99 2.096,-1.341l0.019,-0.009l0,0Zm6.674,0.401c1.069,0.849 1.755,2.16 1.755,3.63c0,0.833 -0.224,1.648 -0.647,2.362l0.345,0.344c0.015,-0.006 0.03,-0.012 0.046,-0.018c0.695,-0.285 1.372,-0.649 2,-1.112c0.252,-0.186 0.497,-0.388 0.727,-0.613c0.137,-0.134 0.27,-0.277 0.392,-0.431c0.072,-0.091 0.141,-0.185 0.203,-0.286c0.037,-0.06 0.072,-0.121 0.103,-0.186c0.016,-0.034 0.032,-0.07 0.045,-0.106c0.015,-0.039 0.028,-0.079 0.036,-0.12c0.005,-0.023 0.009,-0.048 0.008,-0.072c-0.002,-0.046 -0.014,-0.091 -0.028,-0.133c-0.01,-0.033 -0.023,-0.065 -0.036,-0.096c-0.022,-0.05 -0.046,-0.098 -0.071,-0.145c-0.039,-0.069 -0.081,-0.135 -0.125,-0.2c-0.081,-0.118 -0.17,-0.229 -0.263,-0.335c-0.166,-0.19 -0.345,-0.362 -0.53,-0.523c-0.333,-0.29 -0.689,-0.543 -1.054,-0.768c-0.601,-0.369 -1.232,-0.664 -1.879,-0.891c-0.338,-0.119 -0.681,-0.219 -1.027,-0.301Zm-2.85,0.21c-0.023,0 -0.046,0.001 -0.069,0.002c-0.092,0.01 -0.18,0.041 -0.254,0.097c-0.163,0.123 -0.234,0.34 -0.175,0.535c0.016,0.051 0.04,0.1 0.071,0.144c0.036,0.05 0.082,0.093 0.133,0.126c0.059,0.038 0.124,0.061 0.193,0.073c0.023,0.003 0.022,0.003 0.045,0.005c0.091,0.003 0.181,0.003 0.272,0.012c0.158,0.016 0.315,0.048 0.467,0.094c0.496,0.151 0.937,0.462 1.246,0.878c0.124,0.167 0.224,0.349 0.304,0.541c0.024,0.061 0.043,0.125 0.069,0.185c0.038,0.077 0.089,0.144 0.159,0.194c0.085,0.062 0.188,0.093 0.291,0.093l0.008,0c0.077,-0.002 0.154,-0.021 0.224,-0.059c0.047,-0.026 0.09,-0.059 0.126,-0.099c0.042,-0.045 0.075,-0.098 0.097,-0.155c0.022,-0.057 0.034,-0.119 0.033,-0.18c0,-0.077 -0.022,-0.147 -0.048,-0.219c-0.015,-0.043 -0.031,-0.085 -0.048,-0.127c-0.084,-0.209 -0.189,-0.409 -0.312,-0.596c-0.436,-0.664 -1.102,-1.164 -1.862,-1.395c-0.214,-0.066 -0.434,-0.11 -0.657,-0.132c-0.09,-0.009 -0.181,-0.014 -0.272,-0.016c-0.009,0 -0.018,0 -0.028,-0.001l-0.013,0Z" style="fill:#3a3a3a;"/></svg>\n'},function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    \x3c!-- Generator: Sketch 3.5.2 (25235) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>link</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="link" sketch:type="MSArtboardGroup" fill="#222222">\n            <g id="icon:link" sketch:type="MSLayerGroup">\n                <g id="Rectangle-18-+-Rectangle-18-Copy-+-Path-28" transform="translate(9.646447, 9.853553) rotate(-315.000000) translate(-9.646447, -9.853553) translate(5.646447, 0.853553)" sketch:type="MSShapeGroup">\n                    <path d="M8,6.55919636 L8,4.82450549 C8,2.61334348 6.2104719,0.828427125 4,0.828427125 C1.79353398,0.828427125 -3.20810045e-12,2.61822724 -3.20810045e-12,4.82450549 L-3.20810045e-12,7.75542568 C-3.20810045e-12,9.96658769 1.7895281,11.751504 4,11.751504 C4.5511606,11.751504 5.07655559,11.6398264 5.55466651,11.437876 L5.12132034,11.437876 L5.12132034,10.5346402 C4.77469964,10.6745028 4.39616036,10.751504 4,10.751504 C2.34314575,10.751504 1,9.41562927 1,7.75542568 L1,4.82450549 C1,3.1698171 2.34651712,1.82842712 4,1.82842712 C5.65685425,1.82842712 7,3.1643019 7,4.82450549 L7,6.55919636 L8,6.55919636 Z" id="Shape"></path>\n                    <path d="M2.63603897,6.90151354 C3.06184352,6.74698845 3.52119959,6.66270951 4,6.66270951 C6.2104719,6.66270951 8,8.44762587 8,10.6587879 L8,13.5897081 C8,15.7959863 6.20646602,17.5857864 4,17.5857864 C1.7895281,17.5857864 -2.32347475e-12,15.8008701 -2.32347475e-12,13.5897081 L-2.32347475e-12,11.6627095 L1,11.6627095 L1,13.5897081 C1,15.2499117 2.34314575,16.5857864 4,16.5857864 C5.65348288,16.5857864 7,15.2443965 7,13.5897081 L7,10.6587879 C7,8.99858429 5.65685425,7.66270951 4,7.66270951 C3.5092458,7.66270951 3.04553235,7.78087311 2.63603897,7.99032058 L2.63603897,6.90151354 Z" id="Shape"></path>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>'},function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    \x3c!-- Generator: Sketch 3.5.2 (25235) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>unlink</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="unlink" sketch:type="MSArtboardGroup" fill="#222222">\n            <g id="icon:unlink" sketch:type="MSLayerGroup">\n                <g id="Rectangle-18-+-Rectangle-18-Copy-+-Path-28-Copy" transform="translate(12.828427, 13.035534) rotate(-315.000000) translate(-12.828427, -13.035534) translate(4.328427, 4.035534)" sketch:type="MSShapeGroup">\n                    <path d="M8,6.55919636 L8,4.82450549 C8,2.61334348 6.2104719,0.828427125 4,0.828427125 C1.79353398,0.828427125 -3.20454774e-12,2.61822724 -3.20454774e-12,4.82450549 L-3.20454774e-12,7.75542568 C-3.20454774e-12,9.96658769 1.7895281,11.751504 4,11.751504 C4.5511606,11.751504 5.07655559,11.6398264 5.55466651,11.437876 L5.12132034,11.437876 L5.12132034,10.5346402 C4.77469964,10.6745028 4.39616036,10.751504 4,10.751504 C2.34314575,10.751504 1,9.41562927 1,7.75542568 L1,4.82450549 C1,3.1698171 2.34651712,1.82842712 4,1.82842712 C5.65685425,1.82842712 7,3.1643019 7,4.82450549 L7,6.55919636 L8,6.55919636 Z" id="Shape"></path>\n                    <path d="M12.1301896,9.691731 L12.1301896,6.07623654 L11.1099103,6.07623654 L11.1099103,9.691731 L7.79324873,9.691731 L7.79324873,10.7120103 L11.1099103,10.7120103 L11.1099103,14.3275047 L12.1301896,14.3275047 L12.1301896,10.7120103 L16.0445169,10.7120103 L16.0445169,9.691731 L12.1301896,9.691731 Z M7.52584209,8.6418508 C6.80172121,7.49371533 5.53005392,6.73384534 4.08111717,6.73384534 C3.59260703,6.73384534 3.12393555,6.82077136 2.68949598,6.98014985 L2.68949598,8.10315471 C3.10729359,7.8871288 3.58041083,7.76525387 4.08111717,7.76525387 C5.2472836,7.76525387 6.26112906,8.4209623 6.77783518,9.38985772 L7.52584209,8.6418508 Z M8.16223435,12.3942945 L8.16223435,13.8784107 C8.16223435,16.1539849 6.33232877,18 4.08111717,18 C1.82581847,18 -8.17124146e-14,16.1590221 -8.17124146e-14,13.8784107 L-8.17124146e-14,11.890888 L1.02027929,11.890888 L1.02027929,13.8784107 C1.02027929,15.5907588 2.39066309,16.9685915 4.08111717,16.9685915 C5.76813152,16.9685915 7.14195505,15.5850704 7.14195505,13.8784107 L7.14195505,11.3740152 L8.16223435,12.3942945 Z" id="Shape"></path>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>'},function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    \x3c!-- Generator: Sketch 3.5.2 (25235) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>bulletedlist</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="bulletedlist" sketch:type="MSArtboardGroup" fill="#454545">\n            <g id="icon:bulletedlist" sketch:type="MSLayerGroup" transform="translate(1.000000, 3.000000)">\n                <path d="M5,13 L5,14 L15,14 L15,13 L5,13 L5,13 Z M5,1 L5,2 L17,2 L17,1 L5,1 L5,1 Z M5,7 L5,8 L16,8 L16,7 L5,7 L5,7 Z M0,1.5 C0,0.671572875 0.665797234,0 1.5,0 L1.5,0 C2.32842712,0 3,0.665797234 3,1.5 L3,1.5 C3,2.32842712 2.33420277,3 1.5,3 L1.5,3 C0.671572875,3 0,2.33420277 0,1.5 L0,1.5 Z M0,7.5 C0,6.67157288 0.665797234,6 1.5,6 L1.5,6 C2.32842712,6 3,6.66579723 3,7.5 L3,7.5 C3,8.32842712 2.33420277,9 1.5,9 L1.5,9 C0.671572875,9 0,8.33420277 0,7.5 L0,7.5 Z M0,13.5 C0,12.6715729 0.665797234,12 1.5,12 L1.5,12 C2.32842712,12 3,12.6657972 3,13.5 L3,13.5 C3,14.3284271 2.33420277,15 1.5,15 L1.5,15 C0.671572875,15 0,14.3342028 0,13.5 L0,13.5 Z" id="path4634" sketch:type="MSShapeGroup"></path>\n            </g>\n        </g>\n    </g>\n</svg>'},function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    \x3c!-- Generator: Sketch 3.5.2 (25235) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>numberedlist</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="numberedlist" sketch:type="MSArtboardGroup" fill="#454545">\n            <g id="icon:numberedlist" sketch:type="MSLayerGroup" transform="translate(2.000000, 2.000000)">\n                <path d="M5,15 L15,15 L15,14 L5,14 L5,15 Z M4,2 L4,3 L17,3 L17,2 L4,2 L4,2 Z M5,8 L5,9 L16,9 L16,8 L5,8 L5,8 Z" id="path4634" sketch:type="MSShapeGroup"></path>\n                <g id="path4712-path-+-path4712-path-+-path4712-path-copy" sketch:type="MSShapeGroup">\n                    <path d="M0,0.5 C0,0.77699 0.223,1 0.5,1 L1,1 L1,4.5 C1,4.77699 1.223,5 1.5,5 C1.777,5 2,4.77699 2,4.5 L2,0.5 C2,0.223 1.777,0 1.5,0 L0.5,0 C0.223,0 0,0.223 0,0.5 Z" id="path4712-path"></path>\n                    <path d="M0.5,6 C0.223,6 0,6.223 0,6.5 C0,6.77699 0.223,7 0.5,7 L2,7 L2,8 L0.5,8 C0.223,8 0,8.223 0,8.5 L0,10.5 C0,10.77699 0.223,11 0.5,11 L2.5,11 C2.777,11 3,10.77699 3,10.5 C3,10.223 2.777,10 2.5,10 L1,10 L1,9 L2.5,9 C2.5693,9 2.62764,8.994 2.6875,8.9688 C2.81468,8.9278 2.9182,8.82667 2.96875,8.68755 C2.99395,8.62765 2.99995,8.5693 2.99995,8.50005 L2.99995,6.50005 C2.99995,6.43075 2.99395,6.3724 2.96875,6.31255 C2.91825,6.17342 2.81468,6.07227 2.6875,6.0313 C2.6471,6.0142 2.6076,6.006 2.5625,6.0001 L2.5,6.0001 L0.5,6.0001 L0.5,6 Z" id="path4712-path"></path>\n                    <path d="M2.85209534,16.8526748 C2.94267961,16.7627344 3,16.6389489 3,16.5023012 L3,12.4976988 C3,12.3570579 2.94465639,12.2332311 2.85505992,12.1442682 C2.76454727,12.057652 2.64101746,12 2.50461102,12 L0.495388985,12 C0.215752602,12 0,12.2238576 0,12.5 C0,12.7680664 0.221793203,13 0.495388985,13 L2,13 L2,14 L0.495388985,14 C0.215752602,14 0,14.2238576 0,14.5 C0,14.7680664 0.221793203,15 0.495388985,15 L2,15 L2,16 L0.495388985,16 C0.215752602,16 0,16.2238576 0,16.5 C0,16.7680664 0.221793203,17 0.495388985,17 L2.50461102,17 C2.6440432,17 2.76759251,16.9443442 2.85643212,16.854302 Z" id="Rectangle-403"></path>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>'},function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 3.8.2 (29753) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>redo</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Mockups" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="redo" fill="#454545">\n            <g id="undo">\n                <path d="M10.00002,15.99998 L11,12.0184937 C7.58334,12.0184937 2.38444,12.88666 1,16 C1,10.01667 7.60112,8.03985596 11,8.03985596 C10.99998,7.18907596 9.99999,4.71945 10,4 L18,10 L10.00002,15.99998 Z"></path>\n            </g>\n        </g>\n    </g>\n</svg>'},function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 3.8.2 (29753) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>undo</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Mockups" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="undo" fill="#454545">\n            <g>\n                <path d="M2,10 L9.99998,15.99998 L9,12.0184937 C12.41666,12.0184937 17.61556,12.88666 19,16 C19,10.01667 12.39888,8.03985596 9,8.03985596 C9.00002,7.18907596 10.00001,4.71945 10,4 L2,10 Z"></path>\n            </g>\n        </g>\n    </g>\n</svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M4 13H3v-1h1v1zm8-6v7c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h1V4c0-2.2 1.8-4 4-4s4 1.8 4 4v2h1c.55 0 1 .45 1 1zM3.8 6h4.41V4c0-1.22-.98-2.2-2.2-2.2-1.22 0-2.2.98-2.2 2.2v2H3.8zM11 7H2v7h9V7zM4 8H3v1h1V8zm0 2H3v1h1v-1z"/></svg>'},function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="12px" height="16px" viewBox="0 0 12 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 40.3 (33839) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>check</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="check" fill="#000000">\n            <polygon id="Shape" points="12 5 4 13 0 9 1.5 7.5 4 10 10.5 3.5"></polygon>\n        </g>\n    </g>\n</svg>'},function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 40.3 (33839) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>markdown</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="markdown" fill="#000000">\n            <path d="M14.85,3 L1.15,3 C0.52,3 0,3.52 0,4.15 L0,11.84 C0,12.48 0.52,13 1.15,13 L14.84,13 C15.48,13 15.99,12.48 15.99,11.85 L15.99,4.15 C16,3.52 15.48,3 14.85,3 L14.85,3 Z M9,11 L7,11 L7,8 L5.5,9.92 L4,8 L4,11 L2,11 L2,5 L4,5 L5.5,7 L7,5 L9,5 L9,11 L9,11 Z M11.99,11.5 L9.5,8 L11,8 L11,5 L13,5 L13,8 L14.5,8 L11.99,11.5 L11.99,11.5 Z" id="Shape"></path>\n        </g>\n    </g>\n</svg>'},function(t,e,n){(function(e){!function(e){"use strict";var n,i=Object.prototype,r=i.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag",l="object"==typeof t,u=e.regeneratorRuntime;if(u)l&&(t.exports=u);else{(u=e.regeneratorRuntime=l?t.exports:{}).wrap=y;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",g={},m={};m[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(R([])));w&&w!==i&&r.call(w,o)&&(m=w);var v=C.prototype=k.prototype=Object.create(m);x.prototype=v.constructor=C,C.constructor=x,C[c]=x.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,C):(t.__proto__=C,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(v),t},u.awrap=function(t){return{__await:t}},A(T.prototype),T.prototype[a]=function(){return this},u.AsyncIterator=T,u.async=function(t,e,n,i){var r=new T(y(t,e,n,i));return u.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},A(v),v[c]="Generator",v[o]=function(){return this},v.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},u.values=R,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,r){return a.type="throw",a.arg=t,e.next=i,r&&(e.method="next",e.arg=n),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:R(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=n),g}}}function y(t,e,n,i){var r=e&&e.prototype instanceof k?e:k,s=Object.create(r.prototype),o=new O(i||[]);return s._invoke=function(t,e,n){var i=h;return function(r,s){if(i===f)throw new Error("Generator is already running");if(i===p){if("throw"===r)throw s;return N()}for(n.method=r,n.arg=s;;){var o=n.delegate;if(o){var a=S(o,n);if(a){if(a===g)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var c=_(t,e,n);if("normal"===c.type){if(i=n.done?p:d,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=p,n.method="throw",n.arg=c.arg)}}}(t,n,o),s}function _(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function k(){}function x(){}function C(){}function A(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function T(t){function n(e,i,s,o){var a=_(t[e],t,i);if("throw"!==a.type){var c=a.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(t){n("next",t,s,o)},function(t){n("throw",t,s,o)}):Promise.resolve(l).then(function(t){c.value=t,s(c)},o)}o(a.arg)}var i;"object"==typeof e.process&&e.process.domain&&(n=e.process.domain.bind(n)),this._invoke=function(t,e){function r(){return new Promise(function(i,r){n(t,e,i,r)})}return i=i?i.then(r,r):r()}}function S(t,e){var i=t.iterator[e.method];if(i===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,S(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=_(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,g;var s=r.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,g):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function R(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return s.next=s}}return{next:N}}function N(){return{value:n,done:!0}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,n(149))},function(t,e,n){"use strict";function i(t,e){var n=" ";return 0===Array.prototype.indexOf.call(e.parentNode.childNodes,e)&&(n="| "),n+t+" |"}var r=/highlight highlight-(\S+)/;t.exports=[{filter:"br",replacement:function(){return"\n"}},{filter:["del","s","strike"],replacement:function(t){return"~~"+t+"~~"}},{filter:function(t){return"checkbox"===t.type&&"LI"===t.parentNode.nodeName},replacement:function(t,e){return(e.checked?"[x]":"[ ]")+" "}},{filter:["th","td"],replacement:function(t,e){return i(t,e)}},{filter:"tr",replacement:function(t,e){var n="",r={left:":--",right:"--:",center:":-:"};if("THEAD"===e.parentNode.nodeName)for(var s=0;s<e.childNodes.length;s++){var o=e.childNodes[s].attributes.align,a="---";o&&(a=r[o.value]||a),n+=i(a,e.childNodes[s])}return"\n"+t+(n?"\n"+n:"")}},{filter:"table",replacement:function(t){return"\n\n"+t+"\n\n"}},{filter:["thead","tbody","tfoot"],replacement:function(t){return t}},{filter:function(t){return"PRE"===t.nodeName&&t.firstChild&&"CODE"===t.firstChild.nodeName},replacement:function(t,e){return"\n\n```\n"+e.firstChild.textContent+"\n```\n\n"}},{filter:function(t){return"PRE"===t.nodeName&&"DIV"===t.parentNode.nodeName&&r.test(t.parentNode.className)},replacement:function(t,e){return"\n\n```"+e.parentNode.className.match(r)[1]+"\n"+e.textContent+"\n```\n\n"}},{filter:function(t){return"DIV"===t.nodeName&&r.test(t.className)},replacement:function(t){return"\n\n"+t+"\n\n"}}]},function(t,e,n){var i="undefined"!=typeof window?window:this;t.exports=function(){var t=i.DOMParser,e=!1;try{(new t).parseFromString("","text/html")&&(e=!0)}catch(t){}return e}()?i.DOMParser:function(){var t=function(){};if("undefined"==typeof document){var e=n(532);t.prototype.parseFromString=function(t){return e.jsdom(t,{features:{FetchExternalResources:[],ProcessExternalResources:!1}})}}else!function(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch(e){window.ActiveXObject&&(t=!0)}return t}()?t.prototype.parseFromString=function(t){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(t),e.close(),e}:t.prototype.parseFromString=function(t){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(t),e.close(),e};return t}()},function(t,e,n){"use strict";t.exports=[{filter:"p",replacement:function(t){return"\n\n"+t+"\n\n"}},{filter:"br",replacement:function(){return"  \n"}},{filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e){for(var n=e.nodeName.charAt(1),i="",r=0;r<n;r++)i+="#";return"\n\n"+i+" "+t+"\n\n"}},{filter:"hr",replacement:function(){return"\n\n* * *\n\n"}},{filter:["em","i"],replacement:function(t){return"_"+t+"_"}},{filter:["strong","b"],replacement:function(t){return"**"+t+"**"}},{filter:function(t){var e=t.previousSibling||t.nextSibling,n="PRE"===t.parentNode.nodeName&&!e;return"CODE"===t.nodeName&&!n},replacement:function(t){return"`"+t+"`"}},{filter:function(t){return"A"===t.nodeName&&t.getAttribute("href")},replacement:function(t,e){var n=e.title?' "'+e.title+'"':"";return"["+t+"]("+e.getAttribute("href")+n+")"}},{filter:"img",replacement:function(t,e){var n=e.alt||"",i=e.getAttribute("src")||"",r=e.title||"";return i?"!["+n+"]("+i+(r?' "'+r+'"':"")+")":""}},{filter:function(t){return"PRE"===t.nodeName&&"CODE"===t.firstChild.nodeName},replacement:function(t,e){return"\n\n    "+e.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},{filter:"blockquote",replacement:function(t){return"\n\n"+(t=(t=(t=t.trim()).replace(/\n{3,}/g,"\n\n")).replace(/^/gm,"> "))+"\n\n"}},{filter:"li",replacement:function(t,e){t=t.replace(/^\s+/,"").replace(/\n/gm,"\n    ");var n="*   ",i=e.parentNode;if("OL"===i.nodeName){var r=i.getAttribute("start"),s=Array.prototype.indexOf.call(i.children,e);n=(r?Number(r)+s:s+1)+".  "}return n+t}},{filter:["ul","ol"],replacement:function(t,e){for(var n=[],i=0;i<e.childNodes.length;i++)n.push(e.childNodes[i]._replacement);return/li/i.test(e.parentNode.nodeName)?"\n"+n.join("\n"):"\n\n"+n.join("\n")+"\n\n"}},{filter:function(t){return this.isBlock(t)},replacement:function(t,e){return"\n\n"+this.outer(e,t)+"\n\n"}},{filter:function(){return!0},replacement:function(t,e){return this.outer(e,t)}}]},function(t,e){t.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},function(t,e){},function(t,e,n){t.exports=n(270)}]);